{"version":3,"file":"main.6c820eb1d2618e93616a.js","mappings":"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","sources":["webpack://Microtonality/webpack/runtime/chunk loaded","webpack://Microtonality/webpack/runtime/create fake namespace object","webpack://Microtonality/./src/ui/NavLink.tsx","webpack://Microtonality/./src/ui/Knobs.tsx","webpack://Microtonality/./src/utility/microtonal/notes/ScaleNote.ts","webpack://Microtonality/./src/utility/microtonal/notes/CentNote.ts","webpack://Microtonality/./src/utility/microtonal/notes/RatioNote.ts","webpack://Microtonality/./src/utility/microtonal/Scale.ts","webpack://Microtonality/./src/utility/microtonal/scala/ScalaParser.ts","webpack://Microtonality/./src/utility/microtonal/ScaleGeneration.ts","webpack://Microtonality/./src/utility/microtonal/PianoKeyMapping.ts","webpack://Microtonality/./src/utility/microtonal/notes/ScaleNoteUtility.ts","webpack://Microtonality/./src/utility/audio/OscillatorSettings.ts","webpack://Microtonality/./src/utility/audio/Instruments.tsx","webpack://Microtonality/./src/pages/play/Reducers.ts","webpack://Microtonality/./src/pages/play/settings panel/elements/animations/Animations.ts","webpack://Microtonality/./src/pages/play/DeviceAndBrowserSupport.ts","webpack://Microtonality/./src/pages/play/settings panel/elements/animations/Animator.tsx","webpack://Microtonality/./src/ui/ErrorPopup.tsx","webpack://Microtonality/./src/pages/play/PlayProvider.tsx","webpack://Microtonality/./src/utility/MicrotonalConfig.tsx","webpack://Microtonality/./src/pages/play/PlayContext.ts","webpack://Microtonality/./src/ui/Oscillator.tsx","webpack://Microtonality/./src/ui/InstrumentPresets.tsx","webpack://Microtonality/./src/pages/play/SynthSettings.tsx","webpack://Microtonality/./src/pages/play/settings panel/elements/SettingsFieldTitle.tsx","webpack://Microtonality/./src/pages/play/settings panel/SettingsPanelContext.ts","webpack://Microtonality/./src/pages/play/settings panel/SettingsPanelProvider.tsx","webpack://Microtonality/./src/pages/play/settings panel/SettingsPanelTabSwitcher.tsx","webpack://Microtonality/./src/pages/play/settings panel/elements/TuningFrequencyEditor.tsx","webpack://Microtonality/./src/pages/play/settings panel/elements/Popup.tsx","webpack://Microtonality/./src/pages/play/settings panel/basic settings/EqualTemperedScaleSlider.tsx","webpack://Microtonality/./src/pages/play/settings panel/elements/UploadFileButton.tsx","webpack://Microtonality/./src/ui/Button.tsx","webpack://Microtonality/./src/ui/HandleClickOutside.ts","webpack://Microtonality/./src/pages/play/settings panel/elements/CloseButton.tsx","webpack://Microtonality/./src/pages/play/settings panel/elements/FilenameEditor.tsx","webpack://Microtonality/./src/pages/play/settings panel/elements/DescriptionEditor.tsx","webpack://Microtonality/./src/pages/play/settings panel/basic settings/synth files/SynthFileSettingsPopup.tsx","webpack://Microtonality/./src/pages/play/settings panel/elements/SVGButton.tsx","webpack://Microtonality/./src/pages/play/settings panel/basic settings/synth files/SynthFileSettings.tsx","webpack://Microtonality/./src/pages/play/settings panel/basic settings/synth files/SynthFileHandler.tsx","webpack://Microtonality/./src/pages/play/settings panel/basic settings/BasicSettings.tsx","webpack://Microtonality/./src/utility/microtonal/scala/ScalaGenerator.ts","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scala files/ScalaFileHandler.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scale editor/visual editor/note input/elements/ReorderIcon.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scale editor/visual editor/note input/elements/DisabledReorderIcon.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scale editor/visual editor/note input/elements/BaseNoteConverter.tsx","webpack://Microtonality/./src/pages/play/settings panel/elements/DisabledCloseButton.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scale editor/visual editor/note input/BaseNoteInput.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scale editor/visual editor/note input/elements/NoteInputField.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scale editor/visual editor/note input/elements/NoteConverter.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scale editor/visual editor/note input/ScaleNoteInput.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scale editor/visual editor/note list/DraggableNote.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scale editor/visual editor/note list/DraggableNoteList.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scale editor/visual editor/note input/OctaveNoteInput.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scale editor/ScaleEditorTabSwitcher.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scala files/ScalaFileSettingsPopup.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scale editor/visual editor/VisualScaleEditor.tsx","webpack://Microtonality/./src/pages/play/settings panel/elements/SaveButton.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scale editor/ScalaFileEditor.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/scale editor/ScaleEditor.tsx","webpack://Microtonality/./src/pages/play/settings panel/scale settings/ScaleSettings.tsx","webpack://Microtonality/./src/pages/play/settings panel/SettingsPanelTab.tsx","webpack://Microtonality/./src/pages/play/settings panel/SettingsPanel.tsx","webpack://Microtonality/./src/pages/play/FrequencyBar.tsx","webpack://Microtonality/./src/ui/PianoKeyButton.tsx","webpack://Microtonality/./src/pages/play/OctaveButtons.tsx","webpack://Microtonality/./src/pages/play/ReactPianoWrapper.tsx","webpack://Microtonality/./src/pages/play/PianoKeyReducer.ts","webpack://Microtonality/./src/pages/play/MicrotonalPiano.tsx","webpack://Microtonality/./src/utility/midi/MIDIReceiver.ts","webpack://Microtonality/./src/utility/audio/OscillatorStack.ts","webpack://Microtonality/./src/pages/play/Play.tsx","webpack://Microtonality/./src/utility/audio/AdditiveSynthesizer.ts","webpack://Microtonality/./src/ui/BorderedContainer.tsx","webpack://Microtonality/./src/pages/Learn.tsx","webpack://Microtonality/./src/pages/Download.tsx","webpack://Microtonality/./src/pages/Contact.tsx","webpack://Microtonality/./src/pages/Splash.tsx","webpack://Microtonality/./src/App.tsx","webpack://Microtonality/./src/reportWebVitals.js","webpack://Microtonality/./src/index.tsx","webpack://Microtonality/webpack/bootstrap","webpack://Microtonality/webpack/runtime/amd options","webpack://Microtonality/webpack/runtime/compat get default export","webpack://Microtonality/webpack/runtime/define property getters","webpack://Microtonality/webpack/runtime/ensure chunk","webpack://Microtonality/webpack/runtime/global","webpack://Microtonality/webpack/runtime/hasOwnProperty shorthand","webpack://Microtonality/webpack/runtime/make namespace object","webpack://Microtonality/webpack/runtime/jsonp chunk loading","webpack://Microtonality/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","import {NavLink as RRDNavLink, NavLinkProps} from \"react-router-dom\";\nimport * as React from \"react\";\n\nexport default function NavLink(props: NavLinkProps) {\n    return <RRDNavLink {...props} className={({isActive}) =>\n        `2xl:text-xl xl:text-lg lg:text-md md:text-sm sm:text-xs xs:text-xs font-agrandir-wide leading-relaxed \n        inline-block mr-4 px-5 whitespace-nowrap uppercase \n        ${isActive ? 'text-gold underline' : 'text-white hover:underlin'\n    }`}>{props.children}</RRDNavLink>\n}\n","import * as React from 'react'\nimport {useEffect, useRef, useState} from 'react';\n\ninterface KnobProps {\n  min: number;\n  max: number;\n  value: number;\n  onChange: (value: number) => void;\n  minAngle?: number;\n  maxAngle?: number;\n  className: string;\n  knobLabel: string;\n  small: boolean;\n}\n\nconst defaultProps = {\n  min: 0,\n  max: 1,\n  value: 0,\n  minAngle: 30,\n  maxAngle: 330,\n  className: \"w-96\",\n  knobLabel: \"Label\",\n  small: false\n}\n\nexport default function Knob (props: KnobProps) {\n  let [value, setValue] = useState<number>(props.value);\n  let [textBox, setTextBoxRaw] = useState<string>(props.value.toFixed(2).toString())\n  let [isMouseDown, setIsMouseDown] = useState(false);\n  const valueInputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (!isMouseDown && props.value !== value) {\n      handleSubmit();\n    }\n  }, [isMouseDown]);\n\n  useEffect(() => {\n    setValue(props.value);\n  }, [props.value]);\n\n  useEffect(() => {\n    updateTextbox();\n  }, [value]);\n\n  const updateTextbox = () => {\n    setTextBoxRaw(value.toFixed(2).toString());\n  }\n\n  const valueToAngle = (value: number) => {\n    const range = props.max - props.min;\n    const percent = (value - props.min) / range;\n    const angle = percent * (props.maxAngle - props.minAngle) + props.minAngle;\n    return angle-180;\n  }\n\n  const handleMouseDown = (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    event.preventDefault();\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n    setIsMouseDown(true);\n  };\n\n  const handleMouseMove = (event: MouseEvent) => {\n    const { movementX, movementY } = event;\n    setValue((prevValue) => {\n      return clampValue((movementX/(100/props.max)) + (-1)*(movementY/(100/props.max)) + prevValue);\n    });\n  };\n\n  const handleMouseUp = () => {\n    document.removeEventListener('mousemove', handleMouseMove);\n    document.removeEventListener('mouseup', handleMouseUp);\n    setIsMouseDown(false);\n  };\n\n  const submitTextbox = () => {\n    let val = clampValue(parseFloat(textBox));\n    // If the user didn't give us a valid number, reset the textbox\n    if (isNaN(val) || val === props.value) {\n      updateTextbox();\n      return;\n    }\n\n    setValue(val);\n    props.onChange(val);  // This is no good, the textbox should be in its component\n    // better to have two components with simple state updating rather than one kinda complicated one\n  }\n\n  const clampValue = (val: number): number => {\n    return Math.min(props.max, Math.max(props.min, val));\n  }\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n    if (event.key === 'Enter') {\n      valueInputRef.current.blur();\n      // submitTextbox(); // Unnecessary since blurring already calls submit textbox\n    }\n  }\n\n  const handleSubmit = () => {\n    props.onChange(value);\n  }\n\n    return (\n      <div className={`flex flex-col min-h-full w-full justify-around items-center bg-neutral-700 rounded-xl ${props.className}`}>\n\n        <div className=\"flex w-[7rem] justify-center\">\n          <a className=\"2xl:text-xl xl:text-lg md:text-sm sm:text-xs font-agrandir-wide uppercase px-5 py-3 rounded block leading-normal text-center text-white\">{props.knobLabel}</a>\n        </div>\n\n        <div className={`aspect-square rounded-full ${props.small ? 'p-1' : 'p-2'} bg-gradient-to-b from-neutral-500 to-neutral-900 flex w-3/4 mb-1`} onMouseDown={(e) => handleMouseDown(e)}>\n          <div className={\"w-full h-full rounded-full p-0.5 bg-gradient-to-b from-stone-700 to-neutral-800 flex-1\"} >\n            <div style={{transform: `rotate(${valueToAngle(value)}deg)`}} className={\"w-full h-full flex items-start justify-center\"}>\n              <div className={`${props.small ? 'w-2 h-2' : 'w-3.5 h-3.5'} rounded-full bg-black`}>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <input className={\"text-center self-center w-3/4 text-sm settings-panel-input p-px\"} type=\"number\" ref={valueInputRef} value={textBox} onChange={(e) => {setTextBoxRaw(e.target.value)}} onBlur={() => submitTextbox()} onKeyDown={(e) => handleKeyDown(e)} min={0} max={1} step={0.01} />\n      </div>\n    );\n}\n\nKnob.defaultProps = defaultProps;","import { v4 as UUIDv4 } from 'uuid';\n\n// The ScaleNote class is the parent for the CentNote and RatioNote classes.\n// For consistency with Scala files, all notes containing\n// a decimal place are cent notes, and notes without a decimal\n// or containing a '/' are ratio notes.\nexport class ScaleNote {\n    public id: string;\n    public num: string;\n    public multiplier: number;\n    public comments: string;\n\n    constructor(num: string, multiplier: number, comments: string = '') {\n        this.id = UUIDv4();\n        this.num = num;\n        this.multiplier = multiplier;\n        this.comments = comments;\n    }\n\n    public exportScala(): string {\n        if (this.comments === '')\n            return this.num;\n\n        return this.num + ' ' + this.comments;\n    }\n\n    public abstractEquals(note: ScaleNote): boolean {\n        if (this.multiplier === 1 &&\n            this.multiplier === note.multiplier &&\n            this.comments === note.comments) {\n\n            return true;\n        }\n\n        return (this.num === note.num && this.comments === note.comments);\n    }\n\n    public equals(note: ScaleNote): boolean {\n        return this.id === note.id;\n    }\n}","import {ScaleNote} from \"./ScaleNote\";\n\n// The CentNote represents all note values with a decimal place.\n// For more information on how the calculations here differ\n// from ratios, see section 4.5.2 in the design document.\nexport class CentNote extends ScaleNote {\n    public cents: number;\n\n    // Placeholder in case this cent value\n    // was calculated from a ratio.\n    public prevRatio: string;\n\n    constructor(cents: number | string, comments: string = '', prevRatio: string = '') {\n\n        let num: string;\n        if (typeof cents === 'string') {\n            num = cents;\n            cents = parseFloat(cents);\n        }\n        else {\n            num = cents.toString();\n        }\n\n        if (!num.includes('.'))\n            num += '.0';\n        \n        super(num, CentNote.centsToMultiplier(cents), comments);\n        this.cents = cents;\n        this.prevRatio = prevRatio;\n    }\n\n    static centsToMultiplier(cents: number): number {\n        return Math.pow(2, cents / 1200);\n    }\n}\n\nexport const BaseCentNote: CentNote = new CentNote(0);","import {ScaleNote} from \"./ScaleNote\";\n\n// The RatioNote class contains all the notes with a '/'.\nexport class RatioNote extends ScaleNote {\n    public ratio: string;\n\n    constructor(ratio: string, comments: string = '') {\n        if (!ratio.includes('/'))\n            ratio += '/1';\n\n        super(ratio, RatioNote.ratioToMultiplier(ratio), comments);\n        this.ratio = ratio;\n    }\n\n    static ratioToMultiplier(ratio: string): number {\n        let ratioRegex: RegExp = new RegExp(/(\\d+)\\/(\\d+)/);\n        let parsedRatio: string[] = ratioRegex.exec(ratio);\n\n        let numerator: number = parseInt(parsedRatio[1]);\n        let denominator: number = parseInt(parsedRatio[2]) || 1;\n\n        return numerator / denominator;\n    }\n}\n\nexport const BaseRatioNote: RatioNote = new RatioNote('1/1');\nexport const BaseOctaveNote: RatioNote = new RatioNote('2/1');\n","import { ScaleNote, CentNote } from \"./notes\";\nimport {BaseOctaveNote, BaseRatioNote} from \"./notes/RatioNote\";\n\n// The Scale contains all the notes (starting with the 1/1)\n// and some fields used by Scala files.\n// Note: The octaveNote is not inside the notes array.\nexport interface Scale {\n    notes?: ScaleNote[],\n    title?: string,\n    description?: string,\n    octaveNote?: ScaleNote\n}\n\nexport const DEFAULT_SCALE: Scale = {\n    notes: [BaseRatioNote],\n    title: '',\n    description: '',\n    octaveNote: BaseOctaveNote\n};\n\nexport function scaleAbstractEquals(scale1: Scale, scale2: Scale): boolean {\n    if (scale1.title !== scale2.title ||\n        scale1.description !== scale2.description ||\n        scale1.notes.length !== scale2.notes.length ||\n        !scale1.octaveNote.abstractEquals(scale2.octaveNote)) {\n\n        return false;\n    }\n\n    for (let i = 0; i < scale1.notes.length; i++) {\n        if (!scale1.notes.at(i).abstractEquals(scale2.notes.at(i)))\n            return false;\n    }\n\n    return true;\n}\n\n// Based off the scale degree, find which note we are currently using.\nexport function scaleDegreeToNote(scale: Scale, scaleDegree: number): ScaleNote {\n    return scale.notes[scaleDegree % scale.notes.length];\n}\n\n// Given an array of cent values, create a scale.\nexport function scaleFromCents(centValues: Array<number>, title: string = '', description: string = ''): Scale {\n    let notes: CentNote[] = centValues.map((value: number) => new CentNote(value));\n    return {\n        ...DEFAULT_SCALE,\n        notes: notes,\n        title: title,\n        description: description\n    } as Scale;\n}","import {DEFAULT_SCALE, Scale} from '../Scale'\nimport {ScaleNote, RatioNote, CentNote} from '../notes'\nimport {BaseRatioNote} from \"../notes/RatioNote\";\nimport {BaseCentNote} from \"../notes/CentNote\";\n\nenum ParserPhase {\n    DESCRIPTION,\n    KEYS_PER_OCTAVE,\n    PITCH_VALUES\n}\n\n// For more information on the structure of Scala files,\n// refer to https://huygens-fokker.org/scala/scl_format.html.\nexport function parseScalaFile(file: string): Scale {\n\n    let scale: Scale = DEFAULT_SCALE;\n    let notes: ScaleNote[] = [];\n    let octaveNote: ScaleNote = null;\n\n    let fileLines: string[] = file.split('\\n');\n    let lineNum: number = 1;\n\n    let firstLine: string = fileLines.at(0).trim();\n    if (firstLine.startsWith('!')) {\n        scale = {...scale, title: readTitle(firstLine)};\n\n        fileLines.shift();\n        lineNum++;\n    }\n\n    let keysPerOctave: number = -1;\n    let phase: ParserPhase = ParserPhase.DESCRIPTION;\n    for (let line of fileLines) {\n\n        line = line.trim();\n        lineNum++;\n\n        if (line.startsWith('!'))\n            continue;\n\n        if (phase === ParserPhase.DESCRIPTION) {\n            scale = {...scale, description: line};\n            phase = ParserPhase.KEYS_PER_OCTAVE;\n        }\n        else if (phase === ParserPhase.KEYS_PER_OCTAVE) {\n            keysPerOctave = parseInt(line);\n            if (isNaN(keysPerOctave))\n                throw new Error(INCORRECT_KEYS_PER_OCTAVE_ERROR(lineNum, line));\n\n            phase = ParserPhase.PITCH_VALUES;\n        }\n        else if (phase === ParserPhase.PITCH_VALUES) {\n            let note: ScaleNote = parsePitchValue(line, lineNum);\n            if (!note)\n                throw new Error(INCORRECT_PITCH_VALUE_ERROR(line, lineNum));\n\n            if (notes.length === keysPerOctave - 1) {\n                octaveNote = note;\n                break;\n            }\n\n            notes.push(note);\n        }\n    }\n\n    if (notes.length < keysPerOctave - 1 || !octaveNote)\n        throw new Error(NOT_ENOUGH_PITCH_VALUES_ERROR(keysPerOctave, notes.length));\n\n    notes.unshift(getBaseNote(notes.at(0) ?? octaveNote));\n\n    scale = {...scale, notes: notes, octaveNote: octaveNote};\n    return scale;\n}\n\nfunction readTitle(line: string): string {\n    let title: string = line;\n\n    // Remove '!'\n    title = title.substring(1);\n    title = title.trim();\n\n    // Make sure to grab the first word.\n    let words: string[] = title.split(' ');\n    title = words.at(0);\n\n    if (title.endsWith('.scl'))\n        title = title.substring(0, title.length - 4);\n\n    return title;\n}\n\n// Based on the pitch line from the Scala file, figure\n// out which kind of note it is and where exactly the value lies.\n// Then, separate the value from the comments and create a new ScaleNote object.\n//\n// Unfortunately we cannot use regex here, as there\n// are too many edge cases that would yield inconsistent results.\n// The user is allowed to put any characters they want\n// after the pitch value, so a regex could easily catch numbers\n// in the comments as well as the value itself.\n//\n// Note: lineNum is optional because parsePitchValue() is called from other files.\nexport function parsePitchValue(line: string, lineNum?: number): ScaleNote {\n\n    let num: string = '';\n    let noteType: (typeof CentNote | typeof RatioNote) = null;\n\n    if (line.startsWith('-')) {\n        num += '-';\n        noteType = CentNote;\n        line = line.substring(1);\n    }\n\n    let curIndex: number = 0;\n    for (; curIndex < line.length; curIndex++) {\n        let char: string = line.charAt(curIndex);\n\n        if (!isNaN(parseInt(char))) {\n            num += char;\n            continue;\n        }\n\n        if (char === '.' && !num.includes('.')) {\n            noteType = CentNote;\n            num += char;\n        }\n        else if (char === '/' && !num.includes('/')) {\n            noteType = RatioNote;\n            num += char;\n        }\n        else {\n            if (num.length === 0)\n                throw new Error(COMMENT_BEFORE_PITCH_VALUE_ERROR(line, lineNum));\n\n            break;\n        }\n    }\n\n    noteType ??= RatioNote\n    num = cleanPitchValue((noteType === RatioNote), num);\n\n    return new noteType(num, line.substring(curIndex).trim());\n}\n\nexport function cleanPitchValue(isRatio: boolean, num: string): string {\n    return (isRatio) ? cleanRatioValue(num) : cleanCentValue(num);\n}\n\nfunction cleanCentValue(cent: string): string {\n    if (cent === '' || cent === '-' || cent === '.')\n        return BaseCentNote.num;\n\n    cent = parseFloat(cent).toString();\n\n    if (!cent.includes('.'))\n        cent += '.0';\n\n    return cent;\n}\n\nfunction cleanRatioValue(ratio: string): string {\n    if (ratio === '' || ratio === '/')\n        return BaseRatioNote.num;\n\n    if (ratio.startsWith('-'))\n        ratio = ratio.substring(1);\n\n    if (ratio.startsWith('/'))\n        ratio = '1' + ratio;\n\n    if (ratio.endsWith('/'))\n        ratio += '1';\n    else if (!ratio.includes('/'))\n        ratio += '/1';\n\n    let cleanedNumerator: number = parseInt(ratio.slice(0, ratio.indexOf('/')));\n    let cleanedDenominator: number = parseInt(ratio.slice(ratio.indexOf('/') + 1));\n    if (cleanedDenominator === 0)\n        cleanedDenominator = 1;\n\n    return cleanedNumerator + '/' + cleanedDenominator;\n}\n\nfunction getBaseNote(note: ScaleNote): ScaleNote {\n    return (note instanceof RatioNote) ? BaseRatioNote : BaseCentNote;\n}\n\n// Error Messages\nexport const INCORRECT_KEYS_PER_OCTAVE_ERROR = (lineNum: number, line: string): string => {\n    return (\n        `The number of pitch values in your Scala file must be an integer.\n        \n         Check line ${lineNum}: \"${line}\"\n        `\n    );\n};\n\nexport const NOT_ENOUGH_PITCH_VALUES_ERROR = (keysPerOctave: number, notesLength: number): string => {\n    let difference: number = keysPerOctave - notesLength;\n    let s: string = (difference === 1) ? \"\" : \"s\";\n    return (\n        `The Scala file needs ${keysPerOctave} pitch values but only has ${notesLength}.\n        \n         Please insert ${difference} more pitch value${s} or adjust the scale's size.\n        `\n    );\n};\n\nexport const INCORRECT_PITCH_VALUE_ERROR = (line: string, lineNum?: number): string => {\n    return (\n        `Pitch value at line ${lineNum} is incorrect: \"${line}\"\n        \n         Only cents (100.0), ratios (1/2), or integers (2 (shorthand for 2/1)) \n         are allowed, followed by an optional comment.\n        `\n    );\n};\n\nexport const COMMENT_BEFORE_PITCH_VALUE_ERROR = (line: string, lineNum?: number): string => {\n    return (\n        `You cannot have comments before a pitch value.\n        \n         Check line ${lineNum}: \"${line}\"\n        `\n    );\n};\n","import {Scale, scaleFromCents} from \"./Scale\";\nimport {CentNote, RatioNote, ScaleNote} from \"./notes\";\n\n// Since the scale is an interface but its fields contain classes,\n// we have to be careful about setting a scale directly otherwise\n// we risk losing the typing on the ScaleNote objects.\n// This prevents null and undefined errors that will crash the site.\nexport function rebuildScale(scale: Scale): Scale {\n\n    let notes: ScaleNote[] = [];\n    let octaveNote: ScaleNote;\n\n    let noteType: (typeof CentNote | typeof RatioNote) = null;\n\n    for (let untypedNote of scale.notes) {\n        noteType = (untypedNote.num.includes('.')) ? CentNote : RatioNote;\n        notes.push(new noteType(untypedNote.num, untypedNote.comments));\n    }\n\n    noteType = (scale.octaveNote.num.includes('.')) ? CentNote : RatioNote;\n    octaveNote = new noteType(scale.octaveNote.num, scale.octaveNote.comments);\n\n    return {\n        title: scale.title,\n        description: scale.description,\n        notes: notes,\n        octaveNote: octaveNote\n    } as Scale;\n}\n\nexport function generateEqualTemperedScale(numberOfNotes: number): Scale {\n    let cents: number[] = [];\n\n    for (let i = 0; i < numberOfNotes; i++) {\n        cents.push(1200 / numberOfNotes * i);\n    }\n\n    return scaleFromCents(cents, `${numberOfNotes}-TET`, `A ${numberOfNotes}-tone equal tempered scale.`);\n}\n\nconst generateETScales = (): Scale[] => {\n    let scales: Scale[] = [];\n    for (let i = 12; i <= 32; i++)\n        scales.push(generateEqualTemperedScale(i));\n\n    return scales;\n};\n\nexport const EQUAL_TEMPERED_SCALES: Scale[] = [...generateETScales()];","import {Scale} from \"./Scale\";\nimport {generateEqualTemperedScale} from \"./ScaleGeneration\";\nimport {KeyboardShortcuts} from \"react-piano\";\n\nexport interface KeyShortcut {\n    key: string;\n    midiNumber: number;\n}\n\n// Fits a given scale to the number of keys per octave\n// Returns an array, mapping each index of a range 0-(keysPerOctave-1) to a scale degree of the given scale\nexport const mapScaleToKeys = (scale: Scale, keysPerOctave: number) : Record<number, number> => {\n    // For the default mapping, we find the note closest to each note from the keysPerOctave-tone scale\n    let defaultMultipliers = generateEqualTemperedScale(keysPerOctave).notes.map(note => note.multiplier);\n    // We need to store the original index because we'll be deleting and reordering entries from this list,\n    // so indexes will no longer line up correctly\n    let scaleMultipliers = scale.notes.map(note => note.multiplier);\n    // console.log(\"mapscale\", defaultMultipliers, multipliers.slice());\n    let mapping: Array<number> = [];\n\n    // If the scale is smaller than the keyboard we are mapping it to, we need to search in the other direction\n    // Swap the lists\n    if (keysPerOctave > scale.notes.length) {\n        let b = defaultMultipliers;\n        defaultMultipliers = scaleMultipliers;\n        scaleMultipliers = b;\n    }\n\n    let multipliers = scaleMultipliers.map((multiplier, i) => {return {multiplier: multiplier, originalIndex: i}});\n\n    for (let originalMultiplier of defaultMultipliers) {\n        if (multipliers.length === 0) {\n            break;\n        }\n        // Sort multipliers, scoring them based on how close they are to our original multiplier\n        multipliers = multipliers.sort((a, b) => {\n            return Math.abs(originalMultiplier - a.multiplier) - Math.abs(originalMultiplier - b.multiplier);\n        })\n        // multipliers[0] is now the closest note, push it onto mapping\n        // console.log(originalMultiplier, \"is closest to\", multipliers[0].multiplier)\n        mapping.push(multipliers[0].originalIndex)\n        // remove it from multipliers so we can't double assign it\n        multipliers.splice(0, 1)\n    }\n\n    // Now convert the array to a record\n    let finalMapping: Record<number, number> = {};\n\n    // If we had to swap the lists, swap the numbers around when we make the mapping\n    if (keysPerOctave > scale.notes.length) {\n        for (let scaleDegree in mapping) {\n            finalMapping[mapping[scaleDegree]] = Number(scaleDegree);\n        }\n    } else {\n        for (let scaleDegree in mapping) {\n            finalMapping[scaleDegree] = mapping[scaleDegree];\n        }\n    }\n\n    return finalMapping;\n}\n\n// Map a given scale mapping of keysPerOctave to a scale to a given set of keys\nexport const mapScaleToKeyboardShortcuts = (scale: Scale, keysPerOctave: number) => {\n    let keyMapping = mapScaleToKeys(scale, keysPerOctave);\n    let keyLength = Object.keys(keyMapping).length;\n    let finalMapping: Record<number, number> = {};\n    for (let i=0; i<keysPerOctave; i++) {\n        // console.log(i % keyMapping.length, keyMapping[i % keyMapping.length]);\n        // Mod i so we wrap around in case we are going above an octave\n        // Add an octave to the key number if we reach the next octave in mapping\n        finalMapping[keyMapping[i % keyLength] + Math.floor(i / keyLength) * scale.notes.length] = i;\n    }\n\n    // console.log(keyMapping, finalMapping);\n    return keyMapping;\n}\n\nexport const createPianoKeyboardShortcuts = (rootKey: number, keyboardLength: number): Array<KeyShortcut> => KeyboardShortcuts.create({\n    firstNote: rootKey,\n    lastNote: rootKey + keyboardLength,\n    keyboardConfig: KeyboardShortcuts.HOME_ROW\n});\n","import {ScaleNote} from \"./ScaleNote\";\nimport {RatioNote} from \"./RatioNote\";\nimport {CentNote} from \"./CentNote\";\n\n\nexport const averageNotes = (note1: ScaleNote, note2: ScaleNote): ScaleNote => {\n    if (note1 instanceof RatioNote && note2 instanceof RatioNote) {\n        return averageRatios(note1, note2);\n    }\n    return averageOtherNotes(note1, note2);\n}\n\n// Convert a ratio value to a cent value always.\n// Only convert a cent value to a ratio value if\n// the cent value had been previously converted from a ratio.\nexport const convertNote = (note: ScaleNote): ScaleNote => {\n    if (note instanceof RatioNote)\n        return new CentNote(ratioToCent(note), note.comments, note.num);\n    else if (note instanceof CentNote)\n        return new RatioNote(centToRatio(note), note.comments);\n}\n\nconst ratioToCent = (ratio: RatioNote): string => {\n    return multiplierToCents(ratio.multiplier);\n}\n\nconst centToRatio = (cent: CentNote): string => {\n    return (cent.prevRatio) ? cent.prevRatio : '1/1';\n}\n\nexport function multiplierToCents(multiplier: number): string {\n    if (multiplier <= 1)\n        return '0.0';\n\n    let cents: string = (1200 * Math.log2(multiplier)).toString();\n    if (!cents.includes('.'))\n        cents += '.0'\n\n    return cents;\n}\n\nconst averageRatios = (ratio1: RatioNote, ratio2: RatioNote): RatioNote => {\n\n    let ratioRegex: RegExp = new RegExp(/(\\d+)\\/(\\d+)/);\n    let parse1: string[] = ratioRegex.exec(ratio1.num);\n    let parse2: string[] = ratioRegex.exec(ratio2.num);\n\n    let numerator1: number = parseInt(parse1[1]);\n    let denominator1: number = parseInt(parse1[2]);\n    let numerator2: number = parseInt(parse2[1]);\n    let denominator2: number = parseInt(parse2[2]);\n\n    let addedNumerator: number;\n    let addedDenominator: number = lcm(denominator1, denominator2);\n\n    if (denominator1 !== addedDenominator) {\n        numerator1 *= addedDenominator;\n    }\n    if (denominator2 !== addedDenominator) {\n        numerator2 *= addedDenominator;\n    }\n    addedNumerator = numerator1 + numerator2;\n\n    // 'divide' by 2\n    addedDenominator *= 2;\n\n    return new RatioNote(`${addedNumerator}/${addedDenominator}`);\n}\n\nconst averageOtherNotes = (note1: ScaleNote, note2: ScaleNote): CentNote => {\n\n    let averaged: CentNote;\n    let tempNote: CentNote;\n\n    if (note1 instanceof CentNote && note2 instanceof CentNote) {\n        averaged = new CentNote((note1.cents + note2.cents) / 2);\n    }\n    else if (note1 instanceof CentNote && note2 instanceof RatioNote) {\n        tempNote = new CentNote(ratioToCent(note2));\n        averaged = new CentNote((note1.cents + tempNote.cents) / 2);\n    }\n    else if (note1 instanceof RatioNote && note2 instanceof CentNote) {\n        tempNote = new CentNote(ratioToCent(note1));\n        averaged = new CentNote((tempNote.cents + note2.cents) / 2);\n    }\n\n    return averaged;\n}\n\n// least common multiple\nconst lcm = (a: number, b: number): number => {\n    return Math.abs((a * b) / gcd(a, b));\n}\n\n// greatest common denominator\nconst gcd = (a: number, b: number): number => {\n    a = Math.abs(a);\n    b = Math.abs(b);\n    while(b) {\n        let t: number = b;\n        b = a % b;\n        a = t;\n    }\n    return a;\n}","\nexport interface OscillatorSettings {\n    pitchRatio?: number,\n    localGain?: number,\n    waveType?: OscillatorType,\n}\n\nexport const DEFAULT_OSCILLATOR_SETTINGS: OscillatorSettings = {\n    pitchRatio: 1,\n    localGain: 0.5,\n    waveType: \"sine\",\n}\n","import {SynthConfig} from \"../MicrotonalConfig\";\nimport {OscillatorSettings, DEFAULT_OSCILLATOR_SETTINGS} from \"./OscillatorSettings\";\n\nexport const BASIC_SYNTH: SynthConfig = {\n    gain: 0.45,\n    pitchBend: 0,\n\n    attack: 0.1,\n    decay: 0.1,\n    sustain: 0.5,\n    release: 0.1,\n\n    oscillators: [\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 1} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 2} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 3} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 4} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 5} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 6} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 7} as OscillatorSettings,\n        ]\n}\n\nexport const PIANO_SYNTH: SynthConfig = {\n    gain: 0.45,\n    pitchBend: 0,\n\n    attack: 0.01,\n    decay: 0.1,\n    sustain: 0.4,\n    release: 0.3,\n\n    oscillators: [\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 1, waveType: \"triangle\", localGain: 0.67} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 2, waveType: \"triangle\", localGain: 0.32} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 3, waveType: \"sine\", localGain: 0.18} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 4, waveType: \"sine\", localGain: 0.08} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 5, waveType: \"triangle\", localGain: 0.04} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 6, waveType: \"sine\", localGain: 0.02} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 7, waveType: \"sawtooth\", localGain: 0.01} as OscillatorSettings,\n        ]\n}\n\nexport const FLUTE_SYNTH: SynthConfig = {\n    gain: 0.45,\n    pitchBend: 0,\n\n    attack: 0.2,\n    decay: 1,\n    sustain: 1,\n    release: 0.2,\n\n    oscillators: [\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 1, waveType: \"triangle\", localGain: 0.83} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 2, waveType: \"sine\", localGain: 0.15} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 3, waveType: \"triangle\", localGain: 0.17} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 4, waveType: \"sine\", localGain: 0.1} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 5, waveType: \"triangle\", localGain: 0.01} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 6, waveType: \"sine\", localGain: 0.06} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 7, localGain: 0.0} as OscillatorSettings,\n        ]\n}\n\nexport const OBOE_SYNTH: SynthConfig = {\n    gain: 0.45,\n    pitchBend: 0,\n\n    attack: 0.3,\n    decay: 1,\n    sustain: 0.3,\n    release: 1,\n\n    oscillators: [\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 1} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 2} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 3} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 4} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 5} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 6} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 7} as OscillatorSettings,\n        ]\n}\n\nexport const CLARINET_SYNTH: SynthConfig = {\n    gain: 0.45,\n    pitchBend: 0,\n\n    attack: 0.08,\n    decay: 0.1,\n    sustain: 0.4,\n    release: 0.3,\n\n    oscillators: [\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 1, waveType: \"sine\", localGain: 0.5} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 2, waveType: \"triangle\", localGain: 0.13} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 3, waveType: \"sine\", localGain: 0.5} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 4, waveType: \"triangle\", localGain: 0.15} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 5, waveType: \"sine\", localGain: 0.5} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 6, waveType: \"triangle\", localGain: 0.17} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 7, waveType: \"sine\", localGain: 0.5} as OscillatorSettings,\n        ]\n}\n\nexport const BASSOON_SYNTH: SynthConfig = {\n    gain: 0.45,\n    pitchBend: 0,\n\n    attack: 1,\n    decay: 1,\n    sustain: 1,\n    release: 1,\n\n    oscillators: [\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 1} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 2} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 3} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 4} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 5} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 6} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 7} as OscillatorSettings,\n        ]\n}\n\nexport const TRUMPET_SYNTH: SynthConfig = {\n    gain: 0.45,\n    pitchBend: 0,\n\n    attack: 0.10,\n    decay: 0.25,\n    sustain: 0.50,\n    release: 0.27,\n\n    oscillators: [\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 1, waveType: \"sine\", localGain: 0.67} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 2, waveType: \"sine\", localGain: 0.82} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 3, waveType: \"sine\", localGain: 0.69} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 4, waveType: \"sine\", localGain: 0.5} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 5, waveType: \"sine\", localGain: 0.27} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 6, waveType: \"sine\", localGain: 0.12} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 7, waveType: \"sawtooth\", localGain: 0.09} as OscillatorSettings,\n        ]\n}\n\nexport const FRENCH_HORN_SYNTH: SynthConfig = {\n    gain: 0.45,\n    pitchBend: 0,\n\n    attack: 1,\n    decay: 1,\n    sustain: 1,\n    release: 1,\n\n    oscillators: [\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 1} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 2} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 3} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 4} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 5} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 6} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 7} as OscillatorSettings,\n        ]\n}\n\nexport const TROMBONE_SYNTH: SynthConfig = {\n    gain: 0.45,\n    pitchBend: 0,\n\n    attack: 1,\n    decay: 1,\n    sustain: 1,\n    release: 1,\n\n    oscillators: [\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 1} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 2} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 3} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 4} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 5} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 6} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 7} as OscillatorSettings,\n        ]\n}\n\nexport const TUBA_SYNTH: SynthConfig = {\n    gain: 0.45,\n    pitchBend: 0,\n\n    attack: 0.13,\n    decay: 0.14,\n    sustain: 0.31,\n    release: 0.43,\n\n    oscillators: [\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 1, waveType: \"sawtooth\", localGain: 1} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 2, waveType: \"triangle\", localGain: 0.75} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 3, waveType: \"triangle\", localGain: 0.3} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 4, waveType: \"sine\", localGain: 0.37} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 5, waveType: \"sine\", localGain: 0.43} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 6, waveType: \"sine\", localGain: 0.46} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 7, waveType: \"sine\", localGain: 0.08} as OscillatorSettings,\n        ]\n}\n\nexport const VIOLIN_SYNTH: SynthConfig = {\n    gain: 0.45,\n    pitchBend: 0,\n\n    attack: 0.43,\n    decay: 1.0,\n    sustain: 1.0,\n    release: 0.19,\n\n    oscillators: [\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 1, waveType: \"square\", localGain: 0.45} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 2, waveType: \"sine\", localGain: 0.5} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 3, waveType: \"square\", localGain: 0.42} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 4, waveType: \"sawtooth\", localGain: 0.5} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 5, waveType: \"sine\", localGain: 0.43} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 6, waveType: \"sawtooth\", localGain: 0.34} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 7, waveType: \"sine\", localGain: 0.47} as OscillatorSettings,\n        ]\n}\n\nexport const CELLO_SYNTH: SynthConfig = {\n    gain: 0.45,\n    pitchBend: 0,\n\n    attack: 1,\n    decay: 1,\n    sustain: 1,\n    release: 1,\n\n    oscillators: [\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 1} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 2} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 3} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 4} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 5} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 6} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 7} as OscillatorSettings,\n        ]\n}","import {MicrotonalConfig} from \"../../utility/MicrotonalConfig\";\nimport {OscillatorSettings} from \"../../utility/audio/OscillatorSettings\";\nimport {Scale} from \"../../utility/microtonal/Scale\";\nimport {ScaleNote} from \"../../utility/microtonal/notes\";\nimport {parsePitchValue} from \"../../utility/microtonal/scala/ScalaParser\";\nimport {mapScaleToKeyboardShortcuts} from \"../../utility/microtonal/PianoKeyMapping\";\nimport {convertNote} from \"../../utility/microtonal/notes/ScaleNoteUtility\";\nimport { v4 as UUIDv4 } from 'uuid';\nimport {BASIC_SYNTH, PIANO_SYNTH, FLUTE_SYNTH, OBOE_SYNTH, CLARINET_SYNTH,\n    BASSOON_SYNTH, TRUMPET_SYNTH, FRENCH_HORN_SYNTH, TROMBONE_SYNTH, TUBA_SYNTH,\n    VIOLIN_SYNTH, CELLO_SYNTH} from \"../../utility/audio/Instruments\";\nimport {rebuildScale} from \"../../utility/microtonal/ScaleGeneration\";\n\nexport interface MicrotonalConfigHistory {\n    previous: Array<MicrotonalConfig>,\n    current: MicrotonalConfig,\n    next: Array<MicrotonalConfig>\n}\n\nenum MCActions {\n    UNDO_CONFIG,\n    REDO_CONFIG,\n    SET_CONFIG,\n    SET_SCALE,\n    SET_PRESET,\n    ADD_NOTE,\n    EDIT_NOTE,\n    CONVERT_NOTE,\n    DELETE_NOTE,\n    EDIT_OCTAVE_NOTE,\n    CONVERT_OCTAVE_NOTE,\n    SET_TUNING_FREQUENCY,\n    SET_OSCILLATOR,\n    SET_ATTACK,\n    SET_DECAY,\n    SET_SUSTAIN,\n    SET_RELEASE,\n    SET_MASTER_GAIN,\n    UNSET_KEYBIND,\n    SET_KEYBIND,\n}\n\ntype Action =\n    | {type: MCActions.UNDO_CONFIG}\n    | {type: MCActions.REDO_CONFIG}\n    | {type: MCActions.SET_CONFIG, config: MicrotonalConfig}\n    | {type: MCActions.SET_SCALE, scale: Scale}\n    | {type: MCActions.ADD_NOTE, note: ScaleNote}\n    | {type: MCActions.EDIT_NOTE, noteValue: string, noteIndex: number}\n    | {type: MCActions.CONVERT_NOTE, noteIndex: number}\n    | {type: MCActions.DELETE_NOTE, noteIndex: number}\n    | {type: MCActions.EDIT_OCTAVE_NOTE, noteValue: string}\n    | {type: MCActions.CONVERT_OCTAVE_NOTE}\n    | {type: MCActions.SET_TUNING_FREQUENCY, tuningFrequency: number}\n    | {type: MCActions.SET_OSCILLATOR, osc: OscillatorSettings, oscIndex: number}\n    | {type: MCActions.SET_ATTACK, attack: number}\n    | {type: MCActions.SET_DECAY, decay: number}\n    | {type: MCActions.SET_SUSTAIN, sustain: number}\n    | {type: MCActions.SET_RELEASE, release: number}\n    | {type: MCActions.SET_MASTER_GAIN, gain: number}\n    | {type: MCActions.UNSET_KEYBIND, keyIndex: number}\n    | {type: MCActions.SET_KEYBIND, keyIndex: number, scaleDegree: number}\n    | {type: MCActions.SET_PRESET, preset: string}\n\nconst MicrotonalConfigReducer = (state: MicrotonalConfigHistory, action: Action): MicrotonalConfigHistory => {\n\n    console.log({...action, actionString: MCActions[action.type]});\n    let newState: MicrotonalConfigHistory = {...state};\n\n    if (action.type === MCActions.UNDO_CONFIG) {\n        if (newState.previous.length !== 0) {\n            newState.next.unshift(newState.current);\n            newState.current = newState.previous.pop();\n        }\n    }\n    else if (action.type === MCActions.REDO_CONFIG) {\n        if (newState.next.length !== 0) {\n            newState.previous.push(newState.current);\n            newState.current = newState.next.shift();\n        }\n    }\n\n    let configChange: MicrotonalConfig;\n    let config: MicrotonalConfig = newState.current;\n\n    if (action.type === MCActions.SET_CONFIG) {\n        // Since this is called when a user uploads a JSON file,\n        // we need to rebuild the scale to avoid losing the typing\n        // for the notes.\n        configChange = {...action.config, scaleConfig: {...action.config.scaleConfig, scale: rebuildScale(action.config.scaleConfig.scale)}};\n    }\n\n    // Scale Changes\n    else if (action.type === MCActions.SET_SCALE) {\n        configChange = {scaleConfig: {scale: action.scale}};\n        configChange.keyMapping = mapScaleToKeyboardShortcuts(configChange.scaleConfig.scale, newState.current.scaleConfig.keysPerOctave);\n    }\n    else if (action.type === MCActions.ADD_NOTE ||\n        action.type === MCActions.DELETE_NOTE ||\n        action.type === MCActions.EDIT_NOTE ||\n        action.type === MCActions.CONVERT_NOTE) {\n\n        let notes: ScaleNote[] = [...config.scaleConfig.scale.notes];\n\n        if (action.type === MCActions.ADD_NOTE) {\n            notes.push(action.note);\n        }\n        else if (action.type === MCActions.DELETE_NOTE) {\n            notes.splice(action.noteIndex, 1);\n        }\n        else if (action.type === MCActions.EDIT_NOTE ||\n                 action.type === MCActions.CONVERT_NOTE) {\n\n            let newNote: ScaleNote;\n            if (action.type === MCActions.EDIT_NOTE) {\n                newNote = parsePitchValue(`${action.noteValue} ${notes[action.noteIndex].comments}`);\n            }\n            else if (action.type === MCActions.CONVERT_NOTE) {\n                let oldNote: ScaleNote = notes.at(action.noteIndex);\n                newNote = convertNote(oldNote);\n            }\n\n            notes.splice(action.noteIndex, 1, newNote);\n        }\n\n        configChange = {scaleConfig: {scale: {notes: notes}}};\n\n        if (configChange.scaleConfig.scale.notes.length !== state.current.scaleConfig.scale.notes.length) {\n            configChange.keyMapping = mapScaleToKeyboardShortcuts(configChange.scaleConfig.scale, newState.current.scaleConfig.keysPerOctave);\n        }\n    }\n    else if (action.type === MCActions.EDIT_OCTAVE_NOTE ||\n        action.type === MCActions.CONVERT_OCTAVE_NOTE) {\n\n        let oldOctaveNote: ScaleNote = config.scaleConfig.scale.octaveNote;\n        let newOctaveNote: ScaleNote;\n        switch (action.type) {\n            case MCActions.EDIT_OCTAVE_NOTE:\n                newOctaveNote = parsePitchValue(`${action.noteValue} ${oldOctaveNote.comments}`);\n                break;\n\n            case MCActions.CONVERT_OCTAVE_NOTE:\n                newOctaveNote = convertNote(oldOctaveNote);\n                break;\n        }\n\n        configChange = {scaleConfig: {scale: {octaveNote: newOctaveNote}}};\n    }\n    else if (action.type === MCActions.SET_TUNING_FREQUENCY) {\n        configChange = {scaleConfig: {tuningFrequency: action.tuningFrequency}};\n    }\n\n    // Synthesizer Changes\n    else if (action.type === MCActions.SET_OSCILLATOR) {\n        let newOscillators = [...config.synthConfig.oscillators];\n        newOscillators.splice(action.oscIndex, 1, action.osc);\n        configChange = {synthConfig: {oscillators: newOscillators}};\n    }\n    else if (action.type === MCActions.SET_ATTACK) {\n        configChange = {synthConfig: {attack: action.attack}};\n    }\n    else if (action.type === MCActions.SET_DECAY) {\n        configChange = {synthConfig: {decay: action.decay}};\n    }\n    else if (action.type === MCActions.SET_SUSTAIN) {\n        configChange = {synthConfig: {sustain: action.sustain}};\n    }\n    else if (action.type === MCActions.SET_RELEASE) {\n        configChange = {synthConfig: {release: action.release}};\n    }\n    else if (action.type === MCActions.SET_MASTER_GAIN) {\n        configChange = {synthConfig: {gain: action.gain}};\n    }\n    else if (action.type === MCActions.UNSET_KEYBIND) {\n        configChange = {keyMapping: {[action.keyIndex]: null}}\n    }\n    else if (action.type === MCActions.SET_KEYBIND) {\n        configChange = {keyMapping: {[action.keyIndex]: action.scaleDegree}}\n    }\n    else if (action.type === MCActions.SET_PRESET) {\n        switch(action.preset) {\n            case \"Basic\":\n                configChange = {synthConfig: BASIC_SYNTH}\n                break;\n            case \"Piano\":\n                configChange = {synthConfig: PIANO_SYNTH}\n                break;\n            case \"Flute\":\n                configChange = {synthConfig: FLUTE_SYNTH}\n                break;\n            case \"Oboe\":\n                configChange = {synthConfig: OBOE_SYNTH}\n                break;\n            case \"Clarinet\":\n                configChange = {synthConfig: CLARINET_SYNTH}\n                break;\n            case \"Bassoon\":\n                configChange = {synthConfig: BASSOON_SYNTH}\n                break;\n            case \"Trumpet\":\n                configChange = {synthConfig: TRUMPET_SYNTH}\n                break;\n            case \"French Horn\":\n                configChange = {synthConfig: FRENCH_HORN_SYNTH}\n                break;\n            case \"Trombone\":\n                configChange = {synthConfig: TROMBONE_SYNTH}\n                break;\n            case \"Tuba\":\n                configChange = {synthConfig: TUBA_SYNTH}\n                break;\n            case \"Violin\":\n                configChange = {synthConfig: VIOLIN_SYNTH}\n                break;\n            case \"Cello\":\n                configChange = {synthConfig: CELLO_SYNTH}\n                break;\n            default:\n                break;\n        }\n    }\n\n    if (commitChange(config, configChange, true) !== null) {\n        newState.previous.push(newState.current);\n        newState.current = {...commitChange(config, configChange), configId: UUIDv4()};\n        newState.next = [];\n    }\n\n    return newState;\n}\n\nconst OBJECT_PROTOTYPE = Object.getPrototypeOf({});\n\nconst commitChange = (config: any, change: any, dryRun = false) => {\n    let hasChanged = false;\n    let newConfig = config;\n    for (let key in change) {\n        // If this equals null, avoid checking its prototype\n        if (change[key] === null) {\n            if (newConfig[key] !== change[key]) {\n                if (!dryRun) {\n                    newConfig = {...newConfig, [key]: change[key]};\n                }\n                hasChanged = true;\n            }\n            continue;\n        }\n\n        if (Object.getPrototypeOf(change[key]) === OBJECT_PROTOTYPE) {\n            let result = commitChange(newConfig[key], change[key]);\n            if (result !== null) {\n                hasChanged = true;\n                if (!dryRun) {\n                    newConfig = {...newConfig, [key]: result};\n                }\n            }\n        } else if (newConfig[key] !== change[key]) {\n            if (!dryRun) {\n                newConfig = {...newConfig, [key]: change[key]};\n            }\n            hasChanged = true;\n        }\n    }\n\n    if (hasChanged) {\n        return newConfig;\n    }\n\n    return null;\n}\n\nexport {MicrotonalConfigReducer, MCActions}\n","import {AnimationControls, TargetAndTransition, Transition} from \"framer-motion\";\n\nexport interface AnimationMap {\n    // Typings for this parameter are not exported by framer.\n    initial?: any;\n\n    enter?: TargetAndTransition | AnimationControls;\n    exit?: TargetAndTransition;\n    transition?: Transition;\n}\n\nexport const InstantTransition: Transition = { type: 'tween', duration: 0 };\nexport const SpringTransition: Transition = { type: 'spring', stiffness: 200 };\n\n// Animations\nexport const FadeInAndOut: AnimationMap = {\n    initial: { opacity: 0 },\n    enter: { opacity: 1 },\n    exit: { opacity: 0 },\n}\n\nexport const ScaleIn: AnimationMap = {\n    initial: { scale: 0 },\n    enter: { scale: 1 },\n}\n\nexport const ScaleInAndOut: AnimationMap = {\n    initial: { scale: 0 },\n    enter: { scale: 1 },\n    exit: { scale: 0 },\n}\n\n// Note: null values revert to element's original value.\nexport const GrowX: AnimationMap = {\n    initial: { width: 0 },\n    enter: { width: null },\n}\n\nexport const GrowY: AnimationMap = {\n    initial: { height: 0 },\n    enter: { height: null },\n}\n\nexport const EnterLeftExitLeft: AnimationMap = {\n    initial: { left: -window.innerWidth },\n    enter: { left: null },\n    exit: { left: -window.innerWidth },\n}\n\nexport const EnterTopExitTop: AnimationMap = {\n    initial: { top: -window.innerHeight },\n    enter: { top: null },\n    exit: { top: -window.innerHeight },\n}\n","import {isChrome, isChromium, isDesktop, isFirefox, isOpera} from \"react-device-detect\";\n\nexport const userIsSupported = (): boolean => {\n    return deviceIsSupported() && browserIsSupported();\n}\n\nexport const deviceIsSupported = (): boolean => {\n    return isDesktop;\n}\n\nexport const browserIsSupported = (): boolean => {\n    return (isChrome || isChromium || isFirefox || isOpera);\n}","import {AnimatePresence, motion, useReducedMotion} from \"framer-motion\";\nimport * as React from \"react\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport {MutableRefObject} from \"react\";\nimport {AnimationMap, FadeInAndOut} from \"./Animations\";\nimport {userIsSupported} from \"../../../DeviceAndBrowserSupport\";\n\ninterface AnimatorProps {\n    className?: string;\n    clickOutsideRef?: MutableRefObject<any>;\n    visible?: boolean;\n    animation: AnimationMap;\n    children: ReactJSXElement | ReactJSXElement[];\n}\n\nexport default function Animator(props: AnimatorProps): ReactJSXElement {\n\n    const reducedMotion: boolean = useReducedMotion();\n    const animationMap: AnimationMap = (\n        (reducedMotion || !userIsSupported()) ? FadeInAndOut : props.animation\n    );\n\n    return (\n        <AnimatePresence>\n            {(props.visible ?? true) &&\n                <motion.div\n                    className={props.className}\n                    ref={props.clickOutsideRef}\n                    initial={...animationMap.initial}\n                    animate={animationMap.enter}\n                    transition={animationMap.transition}\n                    exit={animationMap.exit}\n                >\n                    {props.children}\n                </motion.div>\n            }\n        </AnimatePresence>\n    );\n}\n","import * as React from \"react\";\nimport {useErrorMsg, useSetErrorMsg} from \"../pages/play/PlayProvider\";\nimport Animator from \"../pages/play/settings panel/elements/animations/Animator\";\nimport {EnterTopExitTop} from \"../pages/play/settings panel/elements/animations/Animations\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\nexport const HIDE_ERROR: string = '';\n\nexport default function ErrorPopup(): ReactJSXElement {\n\n    let errorMsg: string = useErrorMsg();\n    let errorMsgDispatch: Function = useSetErrorMsg();\n\n    const closeButtonOffset: number = 4;\n    const closeButtonSize: number = 14;\n\n    const hideError = (): void => {\n        errorMsgDispatch(HIDE_ERROR);\n    }\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>): void => {\n        if (event.key === 'Enter' || event.key === ' ') {\n            hideError();\n            event.preventDefault();\n        }\n    }\n\n    return (\n        <Animator\n            className={'absolute flex justify-center w-full p-12 z-10'}\n            animation={EnterTopExitTop}\n            visible={errorMsg !== HIDE_ERROR}\n        >\n            <div className={'inline-flex max-w-4xl max-h-96 bg-rederror dark:bg-black rounded-lg shadow-lg shadow-black'}>\n\n                <strong className={'whitespace-pre-line text-xl px-4 py-3 overflow-y-scroll text-black dark:text-rederror font-agrandir font-black'}>\n                    {errorMsg}\n                </strong>\n\n                {/*Close Button Column*/}\n                <div\n                    className={'px-3.5 py-4 bg-neutral-200 rounded-r-lg cursor-pointer group hover:bg-bgdark dark:bg-bgdark dark:hover:bg-bglight'}\n                    tabIndex={0}\n                    onClick={() => hideError()}\n                    onKeyDown={(e) => handleKeyDown(e)}\n                    onMouseLeave={(e) => e.currentTarget.blur()}\n                >\n                    <svg\n                        className={'w-6 h-6 stroke-black group-hocus:stroke-neutral-200 dark:stroke-neutral-200 dark:group-hocus:stroke-black outline-0'}\n                        xmlns={'http://www.w3.org/2000/svg'}\n                        strokeWidth={'3'}\n                        strokeLinecap={'round'}\n                    >\n                        <line x1={closeButtonOffset} y1={closeButtonOffset + closeButtonSize} x2={closeButtonOffset + closeButtonSize} y2={closeButtonOffset} />\n                        <line x1={closeButtonOffset + closeButtonSize} y1={closeButtonOffset + closeButtonSize} x2={closeButtonOffset} y2={closeButtonOffset} />\n                    </svg>\n                </div>\n\n            </div>\n        </Animator>\n    );\n}\n","import * as React from \"react\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport {useContext, useReducer, useState} from \"react\";\nimport {HIDE_ERROR} from \"../../ui/ErrorPopup\";\nimport {MicrotonalConfigHistory, MicrotonalConfigReducer} from \"./Reducers\";\nimport {createMicrotonalConfig, MicrotonalConfig} from \"../../utility/MicrotonalConfig\";\nimport {ErrorMsgContext, ErrorMsgDispatchContext, MCDispatchContext, MCHistoryContext} from \"./PlayContext\";\nimport {Scale} from \"../../utility/microtonal/Scale\";\nimport {browserIsSupported, deviceIsSupported} from \"./DeviceAndBrowserSupport\";\n\n// More information on Contexts and Providers:\n// https://react.dev/learn/scaling-up-with-reducer-and-context\n// Docs on how this function should be written:\n// https://react.dev/learn/scaling-up-with-reducer-and-context#moving-all-wiring-into-a-single-file\ninterface PlayProviderProps {\n    children: ReactJSXElement;\n}\n\n// This is used to help prop drilling throughout\n// the entirety of the Play page and its placement in\n// DOM allows the synth to maintain state if the user\n// happened to click to another page. (check usages)\nexport default function PlayProvider(props: PlayProviderProps): ReactJSXElement {\n\n    const [microtonalConfigHistory, mcDispatch] = useReducer(\n        MicrotonalConfigReducer,\n        {\n            previous: [],\n            current: createMicrotonalConfig(),\n            next: []\n        } as MicrotonalConfigHistory\n    );\n\n    const initErrorMsg = (): string => {\n        if (!deviceIsSupported())\n            return UNSUPPORTED_DEVICE_ERROR();\n        if (!browserIsSupported())\n            return UNSUPPORTED_BROWSER_ERROR();\n        return HIDE_ERROR;\n    }\n    const [errorMsg, displayErrorMsg] = useState<string>(initErrorMsg());\n\n    return (\n        <MCHistoryContext.Provider value={microtonalConfigHistory}>\n        <MCDispatchContext.Provider value={mcDispatch}>\n            <ErrorMsgContext.Provider value={errorMsg}>\n            <ErrorMsgDispatchContext.Provider value={displayErrorMsg}>\n                {props.children}\n            </ErrorMsgDispatchContext.Provider>\n            </ErrorMsgContext.Provider>\n        </MCDispatchContext.Provider>\n        </MCHistoryContext.Provider>\n    );\n}\n\nexport function useMConfigHistory(): MicrotonalConfigHistory { return useContext(MCHistoryContext); }\nexport function useMConfig(): MicrotonalConfig { return useMConfigHistory().current; }\nexport function useScale(): Scale { return useMConfig().scaleConfig.scale; }\nexport function useMCDispatch(): Function { return useContext(MCDispatchContext); }\n\nexport function useErrorMsg(): string { return useContext(ErrorMsgContext); }\nexport function useSetErrorMsg(): Function { return useContext(ErrorMsgDispatchContext); }\n\nconst UNSUPPORTED_DEVICE_ERROR = (): string => {\n    return (\n        `Your current device is not supported. \n        \n         It is recommended you use a desktop for the best experience.\n         \n         There may be unintended behavior and display issues on other devices.\n        `\n    );\n};\n\nconst UNSUPPORTED_BROWSER_ERROR = (): string => {\n    return (\n        `Your current browser is not supported. \n        \n         It is recommended you use Chrome, Chromium, Firefox, or Opera for the best experience.\n         \n         There may be unintended behavior and display issues on other browsers.\n        `\n    );\n};","import {Scale} from \"./microtonal/Scale\";\nimport {OscillatorSettings, DEFAULT_OSCILLATOR_SETTINGS} from \"./audio/OscillatorSettings\";\nimport {mapScaleToKeyboardShortcuts} from \"./microtonal/PianoKeyMapping\";\nimport {EQUAL_TEMPERED_SCALES} from \"./microtonal/ScaleGeneration\";\n\nexport interface MicrotonalConfig {\n    title?: string;\n    description?: string;\n    keyMapping?: Record<number, number>; // Map keyboard keys (0-keysPerOctave) to scale degrees, ex. 0: 1\n    scaleConfig?: ScaleConfig;\n    synthConfig?: SynthConfig;\n\n    // Removes need for useEffect hook in some places if the id is unique.\n    // For this we use the uuid package for a v4 (random) uuid and any components that\n    // need to update with the microtonal config will have a key property which is the config's id.\n    // https://react.dev/learn/preserving-and-resetting-state#resetting-a-form-with-a-key.\n    // useEffect() should only be used for special cases.\n    configId?: string;\n}\n\nexport interface SynthConfig {\n    gain?: number\n    pitchBend?: number\n\n    attack?: number\n    decay?: number\n    sustain?: number\n    release?: number\n\n    oscillators?: Array<OscillatorSettings>\n}\n\nexport interface ScaleConfig {\n    keysPerOctave?: number; // How many piano keys are mapped per octave, 12 by default\n    tuningFrequency?: number; // Anchor frequency of scale\n    rootKey?: number; // Which MIDI key maps to the tuningFrequency. In normal 12-tone equal-temperament\n    // western music, this is A4 == 440Hz. A4 is MIDI key 69.\n    scale?: Scale // The configuration for the scale\n}\n\nexport const DEFAULT_SYNTH_CONFIG: SynthConfig = {\n    gain: 0.30,\n    pitchBend: 0,\n\n    attack: 0.2,\n    decay: 0.5,\n    sustain: 0.4,\n    release: 0.3,\n\n    oscillators: [\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 1} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 2} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 3} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 4} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 5} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 6} as OscillatorSettings,\n        {...DEFAULT_OSCILLATOR_SETTINGS, pitchRatio: 7} as OscillatorSettings,\n    ]\n}\n\nexport const DEFAULT_SCALE_CONFIG: ScaleConfig = {\n    keysPerOctave: 12,\n    tuningFrequency: 261.6255653005986,\n    rootKey: 72,\n    scale: EQUAL_TEMPERED_SCALES.at(0)\n}\n\nexport const DEFAULT_MICROTONAL_CONFIG: MicrotonalConfig = {\n    title: 'MicrotonalSynthConfig',\n    keyMapping: mapScaleToKeyboardShortcuts(DEFAULT_SCALE_CONFIG.scale, DEFAULT_SCALE_CONFIG.keysPerOctave),\n    scaleConfig: DEFAULT_SCALE_CONFIG,\n    synthConfig: DEFAULT_SYNTH_CONFIG\n}\n\nconst createMicrotonalConfig = (\n    microtonalConfig?: MicrotonalConfig,\n    synthConfig?: SynthConfig,\n    scaleConfig?: ScaleConfig\n) => {\n\n    let newScaleConfig = {...DEFAULT_SCALE_CONFIG, ...microtonalConfig?.scaleConfig, ...scaleConfig} as ScaleConfig;\n    let newSynthConfig = {...DEFAULT_SYNTH_CONFIG, ...microtonalConfig?.synthConfig, ...synthConfig} as SynthConfig;\n\n    return {\n        ...DEFAULT_MICROTONAL_CONFIG,\n        ...microtonalConfig,\n        scaleConfig: newScaleConfig,\n        synthConfig: newSynthConfig\n    } as MicrotonalConfig;\n}\n\nexport {createMicrotonalConfig};\n","import {Context, createContext} from 'react';\nimport {MicrotonalConfigHistory} from \"./Reducers\";\n\n// More information on Contexts and Providers:\n// https://react.dev/learn/scaling-up-with-reducer-and-context\nexport const MCHistoryContext: Context<MicrotonalConfigHistory> = createContext(null);\nexport const MCDispatchContext: Context<Function> = createContext(null);\n\nexport const ErrorMsgContext: Context<string> = createContext(null);\nexport const ErrorMsgDispatchContext: Context<Function> = createContext(null);","import * as React from \"react\";\nimport {useEffect, useRef, useState} from \"react\";\nimport {OscillatorSettings} from \"../utility/audio/OscillatorSettings\";\nimport { Range, Direction } from 'react-range';\nimport Knob from \"./Knobs\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport {MicrotonalConfig} from \"../utility/MicrotonalConfig\";\nimport {MCActions} from \"../pages/play/Reducers\";\nimport {useMCDispatch, useMConfig} from \"../pages/play/PlayProvider\";\n\ninterface OscillatorProps {\n    oscIndex: number;\n    settings: OscillatorSettings;\n}\n\nexport default function Oscillator(props: OscillatorProps): ReactJSXElement {\n\n    const microtonalConfig: MicrotonalConfig = useMConfig();\n    const mcDispatch: Function = useMCDispatch();\n\n    let [localGain, setLocalGain] = useState<number>(props.settings.localGain);\n    let [localGainInput, setLocalGainInput] = useState<string>(props.settings.localGain.toString());\n    const gainInputRef = useRef<HTMLInputElement>(null);\n    const supportedWaveTypes: Array<string> = ['sine', 'square', 'triangle', 'sawtooth'];\n\n    // Wave Type (dropdown menu)\n    const handleWaveTypeChange = (event: React.ChangeEvent<HTMLSelectElement>): void => {\n        let wave: string = event.currentTarget.value;\n        if (!supportedWaveTypes.includes(wave))\n            return;\n\n        let newOsc: OscillatorSettings = {...props.settings, waveType: wave} as OscillatorSettings;\n        updateOscillator(newOsc);\n    }\n\n    const mapWaveTypes = (): ReactJSXElement[] => {\n        let wavesJSX: ReactJSXElement[] = [];\n\n        supportedWaveTypes.forEach((waveType: string, i: number): void => {\n            wavesJSX.push(\n                <option value={waveType} key={i}>{waveType.toUpperCase()}</option>\n            );\n        });\n\n        return wavesJSX;\n    }\n\n    // Local Gain (slider and input field)\n    useEffect(() => {\n        setLocalGain(props.settings.localGain);\n    }, [microtonalConfig]);\n\n    useEffect(() => {\n        setLocalGainInput(localGain.toString());\n    }, [localGain]);\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>): void => {\n        if (event.key === 'Enter') {\n            gainInputRef.current.blur();\n            submitLocalGainInput();\n            return;\n        }\n    }\n\n    const submitLocalGainInput = (): void => {\n        let gain: number = clampGain(parseFloat(localGainInput));\n        if (isNaN(gain) || gain === localGain) {\n            setLocalGainInput(localGain.toString());\n            return;\n        }\n\n        let newOsc = {...props.settings, localGain: gain} as OscillatorSettings;\n        updateOscillator(newOsc);\n\n\n        // If the last element the user clicked on is the slider,\n        // the values of it will change with the J and K keys, which\n        // we need mapped to piano keys. React's Range does not allow\n        // for blur() or any onMouseUp events, so we will focus another\n        // element instead, here being the input field just below the range.\n        // This not only fixes the issue but also allows for small changes\n        // to be made by the user quickly in case they are unable to set\n        // the value they want from the slider.\n\n        // Additionally, a html input of type 'number' does not\n        // allow for setting the location of the cursor.\n        // As such, we must change it to a 'text' type for a bit.\n        // This is to ensure that the cursor is at the end of the\n        // input every time it is focused.\n        gainInputRef.current.focus();\n        gainInputRef.current.setAttribute('type', 'text');\n        gainInputRef.current.selectionStart = gain.toString().length;\n        gainInputRef.current.selectionEnd = gain.toString().length;\n        gainInputRef.current.setAttribute('type', 'number');\n    }\n\n    const clampGain = (gain: number): number => {\n        return Math.min(1, Math.max(0, gain));\n    }\n\n    // Pitch Multiplier (knob and input field)\n    const handleMultiplierSubmit = (value: number): void => {\n        let newOsc: OscillatorSettings = {...props.settings, pitchRatio: value} as OscillatorSettings;\n        updateOscillator(newOsc);\n    }\n\n    const updateOscillator = (osc: OscillatorSettings): void => {\n        mcDispatch({type: MCActions.SET_OSCILLATOR, osc: osc, oscIndex: props.oscIndex});\n    }\n\n    return (\n        <div className=\"flex h-[95%] flex-col items-center justify-between mr-1\">\n\n            <select data-te-select-init value={props.settings.waveType} className=\"flex h-8 w-full pt-0.5 rounded-md text-center font-agrandir text-sm dark:bg-bgdark dark:text-gold\" onChange={(e) => handleWaveTypeChange(e)}>\n                {mapWaveTypes()}\n            </select>\n\n            <Range\n            step={0.01}\n            min={0}\n            max={1}\n            values={[((localGainInput === '') ? 0 : clampGain(parseFloat(localGainInput)))]}\n            onChange={(values) => setLocalGainInput(values[0].toString())}\n            onFinalChange={() => submitLocalGainInput()}\n            direction={Direction.Up}\n            renderTrack={({ props, children }) => (\n                <div\n                {...props}\n                style={{\n                    ...props.style,\n                    border: '1px solid',\n                    borderColor: 'gray',\n                    borderRadius: '10px',\n                    height: '60%',\n                    width: '10%',\n                    backgroundColor: '#212121',\n                    marginTop: '10%',\n                    marginBottom: '20%'\n                }}\n                >\n                {children}\n                </div>\n            )}\n            renderThumb={({ props }) => (\n                <div\n                {...props}\n                style={{\n                    ...props.style,\n                    width: '1rem',\n                    height: '1rem',\n                    border: '1px-solid',\n                    backgroundColor: 'white',\n                    borderRadius: '100%'\n                }}\n                />\n            )}\n            />\n\n            <input  \n                className={\"text-center self-center w-3/4 text-sm settings-panel-input p-px\"}\n                type=\"number\"\n                ref={gainInputRef}\n                value={localGainInput}\n                onChange={(e) => setLocalGainInput(e.target.value)}\n                onBlur={() => submitLocalGainInput()}\n                onKeyDown={(e) => handleKeyDown(e)}\n                min={0} \n                max={1} \n                step={0.01}\n            />\n\n            <div className=\"h-[10vw] w-[3.5vw]\">\n                <Knob\n                    min={0}\n                    max={16}\n                    value={props.settings.pitchRatio}\n                    onChange={(value: number) => handleMultiplierSubmit(value)}\n                    knobLabel=\"\"\n                    className=\"\"\n                    small\n                />\n            </div>\n        </div>\n    )\n}\n","import * as React from \"react\";\nimport {useState} from 'react';\nimport { MCActions } from \"../pages/play/Reducers\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport {useMCDispatch} from \"../pages/play/PlayProvider\";\n\nexport default function InstrumentPresets(): ReactJSXElement {\n\n    const mcDispatch: Function = useMCDispatch();\n\n    const [preset, setPreset] = useState(\"Custom\");\n\n    const onChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\n        mcDispatch({type: MCActions.SET_PRESET, preset: e.target.value});\n    }\n\n    // useEffect(() => {\n    //     console.log(preset)\n    // }, [preset])\n\n    return(\n            <div className=\"flex flex-col m-2 font-agrandir text-black text-md\" onChange={onChange}>\n                <select className=\"flex rounded-md py-1 justify-center items-center dark:bg-bgdark dark:text-gold\">\n                    <option>Custom</option>\n                    <option>Basic</option>\n                    <option>Piano</option>\n                    <option>Flute</option>\n                    <option>Clarinet</option>\n                    <option>Trumpet</option>\n                    <option>Tuba</option>\n                    <option>Violin</option>\n                </select>\n            </div>\n    )\n}","import * as React from \"react\";\nimport Oscillator from \"../../ui/Oscillator\";\nimport Knobs from \"../../ui/Knobs\";\nimport InstrumentPresets from \"../../ui/InstrumentPresets\";\nimport {SynthConfig} from \"../../utility/MicrotonalConfig\";\nimport {OscillatorSettings} from \"../../utility/audio/OscillatorSettings\";\nimport {MCActions} from \"./Reducers\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport {useMCDispatch, useMConfig} from \"./PlayProvider\";\n\nconst textClassName = \"2xl:text-xl xl:text-lg lg:text-md md:text-sm sm:text-xs xs:text-xs font-agrandir-wide uppercase px-5 py-3 rounded block leading-normal text-white text-center\"\n\nexport default function SynthSettings(): ReactJSXElement {\n\n    const synthConfig: SynthConfig = useMConfig().synthConfig;\n    const mcDispatch: Function = useMCDispatch();\n\n    const handleAttackChange = (value: number): void => {\n        mcDispatch({type: MCActions.SET_ATTACK, attack: value});\n    }\n\n    const handleDecayChange = (value: number): void => {\n        mcDispatch({type: MCActions.SET_DECAY, decay: value});\n    }\n\n    const handleSustainChange = (value: number): void => {\n        mcDispatch({type: MCActions.SET_SUSTAIN, sustain: value});\n    }\n\n    const handleReleaseChange = (value: number): void => {\n        mcDispatch({type: MCActions.SET_RELEASE, release: value});\n    }\n\n    const mapOscillators = (): ReactJSXElement[] => {\n        let oscJSX: ReactJSXElement[] = [];\n        let oscillators: OscillatorSettings[] = synthConfig.oscillators;\n\n        for (let i = 0; i < oscillators.length; i++) {\n            oscJSX.push(\n                <Oscillator\n                    key={i}\n                    oscIndex={i}\n                    settings={synthConfig.oscillators[i]}\n                />\n            );\n        }\n\n        return oscJSX;\n    }\n\n    return  <div className=\"flex h-full w-full border-gold border-t-2 border-l-2 rounded-tl-xl bg-bglight\">\n\n                <div className=\"flex h-full p-4\">\n\n                    <div className=\"flex mx-2 ml-0\">\n                        <div className=\"flex\">\n                            <div>\n                                <Knobs\n                                    knobLabel={'Attack'}\n                                    value={synthConfig.attack}\n                                    onChange={(value: number) => handleAttackChange(value)}\n                                    className={'border-gold border-2'}\n                                />\n                            </div>\n                            <div className={'ml-2'}>\n                                <Knobs\n                                    knobLabel={'Decay'}\n                                    value={synthConfig.decay}\n                                    onChange={(value: number) => handleDecayChange(value)}\n                                    className={'border-gold border-2'}\n                                />\n                            </div>\n                            <div className={'ml-2'}>\n                                <Knobs\n                                    knobLabel={'Sustain'}\n                                    value={synthConfig.sustain}\n                                    onChange={(value: number) => handleSustainChange(value)}\n                                    className={'border-gold border-2'}\n                                />\n                            </div>\n                            <div className={'ml-2'}>\n                                <Knobs\n                                    knobLabel={'Release'}\n                                    value={synthConfig.release}\n                                    onChange={(value: number) => handleReleaseChange(value)}\n                                    className={'border-gold border-2'}\n                                />\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"flex flex-row mx-2 p-4 pt-6 bg-neutral-700 rounded-xl border-gold border-2\">\n                        {mapOscillators()}\n                    </div>\n\n                    <div className=\"flex flex-col mx-2 mr-0\">\n                        <div className=\"border-gold border-2 rounded-t-xl font-agrandir-wide text-white text-center bg-neutral-700\">\n                            <div>INSTRUMENT </div>\n                            <div>PRESETS</div>\n                        </div>\n                        <div className=\"flex flex-col bg-neutral-700 rounded-b-xl border-gold border-2 border-t-0 h-full w-40 overflow-auto\">\n                            <InstrumentPresets />\n                        </div>\n                    </div>\n\n                </div>\n\n            </div>;\n}\n","import * as React from \"react\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface SettingsFieldTitleProps {\n    className?: string;\n    text: string;\n}\n\nexport default function SettingsFieldTitle(props: SettingsFieldTitleProps): ReactJSXElement {\n    return (\n            <div className={`${props.className} w-full mb-0.5 select-none font-agrandir-wide text-white dark:text-neutral-200 2xl:text-xl xl:text-lg lg:text-md md:text-sm sm:text-xs xs:text-xs`}>\n                {props.text}\n            </div>\n    );\n}","import {Context, createContext, Dispatch, SetStateAction} from 'react';\n\n// This data is insignificant in that we don't want\n// changes to it to update the microtonal config,\n// which would create a new config in the history.\n// So, we never call mcDispatch on updates, and we use\n// this context helps us manage the states cleanly.\ninterface FileData {\n    title: string;\n    description: string;\n}\n\nexport interface MConfigData extends FileData {}\nexport const MConfigDataContext: Context<MConfigData> = createContext(null);\nexport const MConfigDataDispatchContext: Context<Function> = createContext(null);\n\nexport interface ScalaData extends FileData {}\nexport const ScalaDataContext: Context<ScalaData> = createContext(null);\nexport const ScalaDataDispatchContext: Context<Function> = createContext(null);\n\n\nexport enum ScaleEditorTab {\n    VISUAL,\n    SCALA\n}\n\nexport const ScaleEditorTabContext: Context<ScaleEditorTab> = createContext(null);\nexport const ScaleEditorTabDispatchContext: Context<Dispatch<SetStateAction<ScaleEditorTab>>> = createContext(null);\n\n","import * as React from \"react\";\nimport {Dispatch, SetStateAction, useContext, useEffect, useState} from \"react\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport {\n    MConfigData,\n    MConfigDataContext,\n    MConfigDataDispatchContext,\n    ScalaData,\n    ScalaDataContext,\n    ScalaDataDispatchContext,\n    ScaleEditorTab,\n    ScaleEditorTabContext,\n    ScaleEditorTabDispatchContext\n} from \"./SettingsPanelContext\";\nimport {useMConfig} from \"../PlayProvider\";\nimport {Scale} from \"../../../utility/microtonal/Scale\";\nimport {MicrotonalConfig} from \"../../../utility/MicrotonalConfig\";\n\ninterface SettingsPanelProviderProps {\n    children: ReactJSXElement | ReactJSXElement[];\n}\n\n// This is mainly used to update the title and description\n// of both the config and scala files without updating the config history.\nexport default function SettingsPanelProvider(props: SettingsPanelProviderProps): ReactJSXElement {\n\n    const microtonalConfig: MicrotonalConfig = useMConfig();\n    const initMConfigData = (): MConfigData => {\n        return {title: microtonalConfig.title, description: microtonalConfig.description} as MConfigData;\n    }\n    const [mConfigData, setMConfigData] = useState<MConfigData>(initMConfigData());\n\n    const scale: Scale = microtonalConfig.scaleConfig.scale;\n    const initScalaData = (): ScalaData => {\n        return {title: scale.title, description: scale.description} as ScalaData;\n    }\n    const [scalaData, setScalaData] = useState<ScalaData>(initScalaData());\n\n    const [scaleEditorTab, setScaleEditorTab] = useState<ScaleEditorTab>(ScaleEditorTab.VISUAL);\n\n    useEffect((): void => {\n        if (microtonalConfig.title && microtonalConfig.description) {\n            if (microtonalConfig.title !== mConfigData.title &&\n                microtonalConfig.description !== mConfigData.description)\n                setMConfigData(initMConfigData());\n        }\n    }, [microtonalConfig.configId]);\n\n    useEffect((): void => {\n        if (scale.title && scale.description) {\n            if (scale.title !== scalaData.title &&\n                scale.description !== scalaData.description)\n                setScalaData(initScalaData());\n        }\n    }, [scale.title, scale.description]);\n\n    return (\n        <MConfigDataContext.Provider value={mConfigData}>\n        <MConfigDataDispatchContext.Provider value={setMConfigData}>\n            <ScalaDataContext.Provider value={scalaData}>\n            <ScalaDataDispatchContext.Provider value={setScalaData}>\n                <ScaleEditorTabContext.Provider value={scaleEditorTab}>\n                <ScaleEditorTabDispatchContext.Provider value={setScaleEditorTab}>\n                    {props.children}\n                </ScaleEditorTabDispatchContext.Provider>\n                </ScaleEditorTabContext.Provider>\n            </ScalaDataDispatchContext.Provider>\n            </ScalaDataContext.Provider>\n        </MConfigDataDispatchContext.Provider>\n        </MConfigDataContext.Provider>\n    );\n}\n\nexport function useMConfigData(): MConfigData { return useContext(MConfigDataContext); }\nexport function useSetMConfigData(): Function { return useContext(MConfigDataDispatchContext); }\n\nexport function useScalaData(): ScalaData { return useContext(ScalaDataContext); }\nexport function useSetScalaData(): Function { return useContext(ScalaDataDispatchContext); }\n\nexport function useScaleEditorTab(): ScaleEditorTab { return useContext(ScaleEditorTabContext); }\nexport function useSetScaleEditorTab(): Dispatch<SetStateAction<ScaleEditorTab>> { return useContext(ScaleEditorTabDispatchContext); }\n\n\nexport enum SettingsPanelTabs {\n    BASIC,\n    SCALE\n}\n","import {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport * as React from \"react\";\nimport {SettingsPanelTabs} from \"./SettingsPanelProvider\";\n\ninterface SettingsPanelTabSwitcherProps {\n    currentTab: number;\n    setCurrentTab: (tab: number) => void;\n}\n\nexport default function SettingsPanelTabSwitcher(props: SettingsPanelTabSwitcherProps): ReactJSXElement {\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLLIElement>): void => {\n        if (event.key === 'Enter' || event.key === ' ') {\n            props.setCurrentTab(\n                props.currentTab === SettingsPanelTabs.BASIC ?\n                    SettingsPanelTabs.SCALE :\n                    SettingsPanelTabs.BASIC\n            );\n        }\n    }\n\n    const basicTab = (): ReactJSXElement => {\n        if (props.currentTab === 1) {\n            return (\n                <li tabIndex={0}\n                    className={'settings-tab-inactive settings-tab-l'}\n                    onClick={() => props.setCurrentTab(0)}\n                    onKeyDown={(e) => handleKeyDown(e)}\n                >\n                    BASIC\n                </li>\n            );\n        }\n\n        return (\n            <li className={'settings-tab-active settings-tab-l'}>\n                BASIC\n                <div className={'settings-tab-hook-parent-l'}>\n                    <div className={'settings-tab-hook-l'}/>\n                </div>\n            </li>\n        );\n    }\n\n    const scaleTab = (): ReactJSXElement => {\n        if (props.currentTab === 0) {\n            return (\n                <li tabIndex={0}\n                    className={'settings-tab-inactive settings-tab-r'}\n                    onClick={() => props.setCurrentTab(1)}\n                    onKeyDown={(e) => handleKeyDown(e)}\n                >\n                    SCALE\n                </li>\n            );\n        }\n\n        return (\n            <li className={'settings-tab-active settings-tab-r'}>\n                SCALE\n                <div className={'settings-tab-hook-parent-r'}>\n                    <div className={'settings-tab-hook-r'}/>\n                </div>\n            </li>\n        );\n    }\n\n    return (\n        <ul className={'flex flex-row text-center'}>\n            {basicTab()}\n            {scaleTab()}\n        </ul>\n    );\n}","import * as React from \"react\";\nimport {useState} from \"react\";\nimport {MCActions} from \"../../Reducers\";\nimport SettingsFieldTitle from \"./SettingsFieldTitle\";\nimport {useMCDispatch, useMConfig} from \"../../PlayProvider\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\nexport default function TuningFrequencyEditor(): ReactJSXElement {\n\n    const currentTuningFreq = useMConfig().scaleConfig.tuningFrequency;\n    const mcDispatch: Function = useMCDispatch();\n    const [tuningFreqInput, setTuningFreqInput] = useState<number>(currentTuningFreq)\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>) => {\n        if (event.key === 'Enter') {\n            event.currentTarget.blur();\n        }\n    }\n\n    const submitTuningFreqInput = (): void => {\n        let frequency: number = clampTuningFrequency(tuningFreqInput);\n        if (frequency === currentTuningFreq) {\n            setTuningFreqInput(frequency);\n            return;\n        }\n\n        mcDispatch({type: MCActions.SET_TUNING_FREQUENCY, tuningFrequency: frequency});\n    }\n\n    const clampTuningFrequency = (freq: number): number => {\n        if (isNaN(freq))\n            return currentTuningFreq;\n\n        return Math.max(0, freq);\n    }\n\n    return (\n        <div className={'flex flex-col mb-4'}>\n            <SettingsFieldTitle text={'BASE FREQUENCY'} />\n            <input\n                className={'settings-panel-input text-lg'}\n                type={'number'}\n                value={tuningFreqInput}\n                onBlur={() => submitTuningFreqInput()}\n                onKeyDown={(e) => handleKeyDown(e)}\n                onChange={(e) => setTuningFreqInput(parseFloat(e.target.value))}\n            />\n        </div>\n    );\n}","import * as React from \"react\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface PopupProps {\n    text: string;\n}\n\nexport default function Popup(props: PopupProps): ReactJSXElement {\n    return (\n        <div className={'px-2 py-1 text-white dark:text-gold select-none font-agrandir-wide border border-gold rounded bg-bglight dark:bg-bgdark'}>\n            {props.text}\n        </div>\n    );\n}\n","import * as React from \"react\";\nimport {ChangeEvent, MutableRefObject, useEffect, useRef, useState} from \"react\";\nimport {MCActions} from \"../../Reducers\";\nimport {Scale, scaleAbstractEquals} from \"../../../../utility/microtonal/Scale\";\nimport Popup from \"../elements/Popup\";\nimport SettingsFieldTitle from \"../elements/SettingsFieldTitle\";\nimport {EQUAL_TEMPERED_SCALES} from \"../../../../utility/microtonal/ScaleGeneration\";\nimport {useMCDispatch, useScale} from \"../../PlayProvider\";\nimport {Transition, useReducedMotion} from \"framer-motion\";\nimport {\n    AnimationMap,\n    FadeInAndOut,\n    GrowX,\n    InstantTransition, SpringTransition\n} from \"../elements/animations/Animations\";\nimport Animator from \"../elements/animations/Animator\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport {userIsSupported} from \"../../DeviceAndBrowserSupport\";\n\nexport default function EqualTemperedScaleSlider(): ReactJSXElement {\n\n    const scale: Scale = useScale();\n    const mcDispatch: Function = useMCDispatch();\n\n    const min: number = 12;\n    const max: number = 32;\n    const [value, setValue] = useState<number>(12);\n    const sliderRef: MutableRefObject<HTMLInputElement> = useRef(null);\n\n    const [displayValuePopup, setDisplayValuePopup] = useState<boolean>(false);\n    const [popupPosition, setPopupPosition] = useState<{ left: number }>({ left: 0 });\n    const popupTransition: Transition = ((useReducedMotion() || !userIsSupported()) ? InstantTransition : SpringTransition);\n    const popupAnimationMap: AnimationMap = {\n        ...FadeInAndOut,\n        enter: {...FadeInAndOut.enter, ...popupPosition},\n        transition: popupTransition,\n    };\n\n    useEffect(() => {\n        let val: number = scale.notes.length;\n        if (val >= min && scaleAbstractEquals(scale, EQUAL_TEMPERED_SCALES[val - min])) {\n            setValue(val);\n            setPopupPosition(getNextPopupPosition(val - min));\n        }\n    }, [scale]);\n\n    const wrapSetValue = (event: ChangeEvent<HTMLInputElement>): void => {\n        let val: number = Number(event.target.value);\n\n        setValue(val);\n        setPopupPosition(getNextPopupPosition(val - min));\n    }\n\n    const beginAdjustment = (): void => {\n        setDisplayValuePopup(true);\n    }\n\n    const endAdjustment = (): void => {\n        setDisplayValuePopup(false);\n        handleSliderChange();\n    }\n\n    const handleSliderChange = (): void => {\n        let newScale: Scale = EQUAL_TEMPERED_SCALES.at(value - min);\n        if (scaleAbstractEquals(newScale, scale))\n            return;\n\n        mcDispatch({type: MCActions.SET_SCALE, scale: newScale});\n    };\n\n    // Adapted from: https://codepen.io/chriscoyier/pen/eYNQyPe\n    const getNextPopupPosition = (step: number): { left: number } => {\n        let size: number = max - min;\n        let percentage: number = step / size;\n\n        let left: number = sliderRef.current.offsetWidth * percentage;\n\n        // Move back some pixels based on the current step.\n        left -= step;\n\n        return { left: left };\n    };\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>): void => {\n        if (event.key === 'Enter')\n            event.currentTarget.blur();\n    };\n\n    return (\n        <div className={'flex flex-col mb-4'}>\n\n            <Animator animation={FadeInAndOut}>\n                <SettingsFieldTitle text={'EQUAL-TEMPERED SCALE GENERATOR'} />\n            </Animator>\n\n            <Animator\n                className={'relative'}\n                animation={GrowX}\n            >\n                <input\n                    className={'appearance-none w-full h-2 accent-neutral-200 cursor-pointer rounded-lg bg-bgdark border border-neutral-500 outline-0'}\n                    ref={sliderRef}\n                    type={'range'}\n                    step={1}\n                    min={min}\n                    max={max}\n                    value={value}\n                    onMouseDown={() => beginAdjustment()}\n                    onMouseUp={() => endAdjustment()}\n                    onFocus={() => beginAdjustment()}\n                    onBlur={() => endAdjustment()}\n                    onChange={(e) => wrapSetValue(e)}\n                    onKeyDown={(e) => handleKeyDown(e)}\n                />\n\n                <Animator\n                    className={'absolute -mx-2 -mt-14'}\n                    visible={displayValuePopup}\n                    animation={popupAnimationMap}\n                >\n                    <Popup text={value.toString()} />\n                </Animator>\n            </Animator>\n\n        </div>\n    );\n};","import * as React from \"react\";\nimport {MutableRefObject, useRef} from \"react\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface UploadFileButtonProps {\n    text: string;\n    accept: string;\n    uploadFile: (event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nexport default function UploadFileButton(props: UploadFileButtonProps): ReactJSXElement {\n\n    const fileInputRef: MutableRefObject<HTMLInputElement> = useRef(null);\n\n    const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n        event.currentTarget.blur();\n        fileInputRef.current.click();\n    }\n\n    const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>): void => {\n        props.uploadFile(event);\n        fileInputRef.current.value = '';\n    }\n\n    return (\n        <div className={'flex flex-col mb-1'}>\n            <button\n                className={'settings-panel-button'}\n                onClick={(e) => handleClick(e)}\n            >\n                {props.text}\n            </button>\n            <input\n                className={'hidden'}\n                type={'file'}\n                ref={fileInputRef}\n                accept={props.accept}\n                onChange={(e) => handleFileUpload(e)}\n            />\n        </div>\n    );\n}","import * as React from \"react\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface ButtonProps {\n    onClick: (event: any) => void;\n    text: string;\n    disabled?: boolean;\n    className?: string;\n}\n\nexport default function Button(props: ButtonProps): ReactJSXElement {\n    return(\n        <button\n            disabled={props.disabled}\n            className={`${props.className} settings-panel-button`}\n            onClick={props.onClick}\n            onMouseOut={(e) => e.currentTarget.blur()}\n        >\n            {props.text}\n        </button>\n    );\n}","import {useEffect, MutableRefObject, useRef} from 'react';\n\nexport default function useHandleClickOutsideRef(onClickOutside: Function, ...args: any[]): MutableRefObject<any> {\n    const ref: MutableRefObject<any> = useRef(null);\n    \n    const handleClickOutside = (event: any) => {\n        if (ref.current && !ref.current.contains(event.target)) {\n            onClickOutside(...args);\n        }\n    };\n\n    useEffect(() => {\n        document.addEventListener('mousedown', handleClickOutside, true);\n        return (): void => {\n            document.removeEventListener('mousedown', handleClickOutside, true);\n        };\n    }, []);\n    \n    return ref;\n}","import * as React from \"react\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface CloseButtonProps {\n    className?: string;\n    onClick: () => void;\n}\n\nexport default function CloseButton(props: CloseButtonProps): ReactJSXElement {\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLOrSVGElement>): void => {\n        if (event.key === 'Enter' || event.key === ' ') {\n            props.onClick();\n            event.preventDefault();\n        }\n    }\n\n    return (\n        <svg className={`${props.className} ${deleteNoteSVG} cursor-pointer bg-gold hocus:stroke-gold hocus:bg-black outline-none`}\n             xmlns={'http://www.w3.org/2000/svg'}\n             tabIndex={0}\n             onClick={props.onClick}\n             onKeyDown={handleKeyDown}\n        >\n            <line x1={4} y1={4} x2={8} y2={8} strokeLinecap={'round'} strokeLinejoin={'round'}/>\n            <line x1={8} y1={4} x2={4} y2={8} strokeLinecap={'round'} strokeLinejoin={'round'}/>\n        </svg>\n    );\n}\n\nexport const deleteNoteSVG: string = 'absolute w-4 h-4 stroke-black stroke-2 border-2 border-black rounded-full';","import * as React from \"react\";\nimport SettingsFieldTitle from \"./SettingsFieldTitle\";\nimport {MutableRefObject, useRef, useState} from \"react\";\nimport {useSetErrorMsg} from \"../../PlayProvider\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface FilenameEditorProps {\n    className?: string;\n    title: string;\n    filename: string;\n    setFilename: (name: string) => void;\n}\n\nexport default function FilenameEditor(props: FilenameEditorProps): ReactJSXElement {\n\n    const errorMsgDispatch: Function = useSetErrorMsg();\n\n    const [tempFilename, setTempFilename] = useState<string>(props.filename);\n    const filenameInputRef: MutableRefObject<HTMLInputElement> = useRef(null);\n\n    // These help prevent the cursor from moving to the end of\n    // the input field when a user enters a character that isn't\n    // accepted (ex: a letter) while they are typing in the middle of the number.\n    //\n    // For more information and original code:\n    // https://github.com/facebook/react/issues/18404#issuecomment-605294038\n    const [selection, setSelection] = React.useState<[number | null, number | null] | null>(null);\n    React.useLayoutEffect(() => {\n        if (selection && filenameInputRef.current) {\n            [filenameInputRef.current.selectionStart, filenameInputRef.current.selectionEnd] = selection;\n        }\n    }, [selection]);\n\n    const wrapSetFilename = (event: React.ChangeEvent<HTMLInputElement>): void => {\n\n        let updatedName: string = event.target.value;\n        let curSelection: [number, number] = [event.target.selectionStart, event.target.selectionEnd];\n\n        let letterOrNumber: RegExp = new RegExp(/[A-z0-9]/);\n        let validChars: string[] = ['-', '_', ' '];\n\n        let cleanedName: string = '';\n        for (let char of updatedName) {\n            if (letterOrNumber.test(char) || validChars.includes(char)) {\n                cleanedName += char;\n                continue;\n            }\n\n            // Invalid character, move the text cursor back one.\n            curSelection = [curSelection[0] - 1, curSelection[1] - 1];\n        }\n\n        setSelection(curSelection);\n        setTempFilename(cleanedName);\n    }\n\n    const validateFilename = (name: string): void => {\n        // Source: https://en.wikipedia.org/wiki/Filename#Reserved_characters_and_words\n        let reservedFilenames: RegExp = new RegExp(/^(CON|PRN|AUX|NUL|LST|COM[0-9]|LPT[0-9])$/);\n        if (reservedFilenames.test(name))\n            throw new Error(RESERVED_FILENAME_ERROR(name));\n    }\n\n    const handleSubmit = (name: string): void => {\n        try {\n            name.trim();\n            validateFilename(name);\n            props.setFilename(name);\n        } catch (e) {\n            errorMsgDispatch(e.message);\n        }\n    }\n\n    const handleKeyDown = (key: string): void => {\n        if (key === 'Enter') {\n            filenameInputRef.current.blur();\n        }\n    }\n\n    return (\n        <div className={props.className}>\n            <SettingsFieldTitle text={props.title}/>\n            <input\n                className={'settings-panel-input w-full'}\n                tabIndex={0}\n                value={tempFilename}\n                ref={filenameInputRef}\n                onChange={(e) => wrapSetFilename(e)}\n                onKeyDown={(e) => handleKeyDown(e.key)}\n                onBlur={(e) => handleSubmit(e.target.value)}\n            />\n        </div>\n    );\n}\n\nconst RESERVED_FILENAME_ERROR = (filename: string): string => {\n    return (\n        `The synth config's filename '${filename}' is a reserved filename. \n        \n         Please change the filename and try again.\n        `\n    );\n};","import * as React from \"react\";\nimport {useState} from \"react\";\nimport SettingsFieldTitle from \"./SettingsFieldTitle\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface DescriptionEditorProps {\n    className?: string;\n    title: string;\n    description: string;\n    setDescription: (desc: string) => void;\n}\n\nexport default function DescriptionEditor(props: DescriptionEditorProps): ReactJSXElement {\n\n    const [tempDescription, setTempDescription] = useState<string>(props.description);\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLTextAreaElement>): void => {\n        if (event.key === 'Enter') {\n            event.currentTarget.blur();\n        }\n    }\n\n    return (\n        <div className={props.className}>\n            <SettingsFieldTitle text={props.title} />\n            <textarea\n                className={'settings-panel-input w-full resize-none'}\n                key={props.description}\n                value={tempDescription}\n                onKeyDown={(e) => handleKeyDown(e)}\n                onChange={(e) => setTempDescription(e.target.value.replace(/\\n/g, ''))}\n                onBlur={(e) => props.setDescription(e.target.value)}\n            />\n        </div>\n    );\n}","import * as React from \"react\";\nimport {MutableRefObject} from \"react\";\nimport useHandleClickOutsideRef from \"../../../../../ui/HandleClickOutside\";\nimport CloseButton from \"../../elements/CloseButton\";\nimport FilenameEditor from \"../../elements/FilenameEditor\";\nimport DescriptionEditor from \"../../elements/DescriptionEditor\";\nimport {MConfigData} from \"../../SettingsPanelContext\";\nimport {useMConfigData, useSetMConfigData} from \"../../SettingsPanelProvider\";\nimport Animator from \"../../elements/animations/Animator\";\nimport {EnterLeftExitLeft} from \"../../elements/animations/Animations\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface SynthFileSettingsPopupProps {\n    visible: boolean;\n    setVisible: (val: boolean) => void;\n}\n\nexport default function SynthFileSettingsPopup(props: SynthFileSettingsPopupProps): ReactJSXElement {\n\n    const mConfigFileData: MConfigData = useMConfigData();\n    const setMConfigFileData: Function = useSetMConfigData();\n\n    const clickOutsideRef: MutableRefObject<HTMLDivElement> = useHandleClickOutsideRef(props.setVisible, false);\n\n    const setMConfigFilename = (name: string): void => {\n        setMConfigFileData({...mConfigFileData, title: name});\n    }\n\n    const setMConfigDescription = (desc: string): void => {\n        setMConfigFileData({...mConfigFileData, description: desc});\n    }\n\n    const closePopup = (): void => {\n        props.setVisible(false);\n    }\n\n    return (\n        <Animator\n            className={'absolute w-full p-1 bg-neutral-700 border-2 border-black rounded'}\n            clickOutsideRef={clickOutsideRef}\n            animation={EnterLeftExitLeft}\n            visible={props.visible}\n        >\n            <FilenameEditor\n                title={'Synth Name'}\n                filename={mConfigFileData.title}\n                setFilename={setMConfigFilename}\n            />\n\n            <DescriptionEditor\n                className={'mt-1'}\n                title={'Synth Description'}\n                description={mConfigFileData.description}\n                setDescription={setMConfigDescription}\n            />\n\n            <CloseButton\n                className={'-top-1.5 -right-1.5'}\n                onClick={closePopup}\n            />\n        </Animator>\n    );\n}","import * as React from \"react\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport Animator from \"./animations/Animator\";\nimport {ScaleIn} from \"./animations/Animations\";\n\ninterface SVGButtonProps {\n    className?: string;\n    svg: SVGButtons;\n    onClick: Function;\n    disabled?: boolean;\n    children?: ReactJSXElement | ReactJSXElement[];\n}\n\nexport default function SVGButton(props: SVGButtonProps): ReactJSXElement {\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>): void => {\n        if (event.key === 'Enter' || event.key === ' ') {\n            props.onClick();\n            event.preventDefault();\n        }\n    }\n\n    return (\n        <Animator animation={ScaleIn}>\n            <div\n                className={`${props.className} relative settings-panel-svg-button-parent group ${props.disabled ? 'pointer-events-none' : ''}`}\n                tabIndex={0}\n                onClick={() => props.onClick()}\n                onKeyDown={(e) => handleKeyDown(e)}\n                onMouseLeave={(e) => e.currentTarget.blur()}\n            >\n                <svg\n                    className={'settings-panel-svg-button'}\n                    xmlns={'http://www.w3.org/2000/svg'}\n                    strokeLinecap={'round'}\n                    strokeLinejoin={'round'}\n                >\n                    {SVGButtonPaths(props.svg)}\n                </svg>\n\n                {props.children}\n\n            </div>\n        </Animator>\n    );\n}\n\nexport enum SVGButtons {\n    pencilSquare,\n    listBullet,\n    arrowDownTray,\n    cog6tooth,\n    questionMarkCircle,\n}\n\n// All SVG paths from https://heroicons.com\nexport const SVGButtonPaths = (buttonType: SVGButtons): ReactJSXElement[] => {\n\n    let path: ReactJSXElement[] = [];\n\n    switch (buttonType) {\n        case SVGButtons.pencilSquare: {\n            path.push(pathBase('M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10'));\n            break;\n        }\n        case SVGButtons.listBullet: {\n            path.push(pathBase('M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z'));\n            break;\n        }\n        case SVGButtons.arrowDownTray: {\n            path.push(pathBase('M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3'));\n            break;\n        }\n        case SVGButtons.cog6tooth: {\n            path.push(pathBase('M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z'));\n            path.push(pathBase('M15 12a3 3 0 11-6 0 3 3 0 016 0z'));\n            break;\n        }\n        case SVGButtons.questionMarkCircle: {\n            path.push(pathBase('M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z'));\n        }\n    }\n\n    return path;\n}\n\nconst pathBase = (d: string): ReactJSXElement => {\n    return (\n        <path\n            d={d}\n            key={d}\n        />\n    );\n}","import * as React from \"react\";\nimport {useState} from \"react\";\nimport SynthFileSettingsPopup from \"./SynthFileSettingsPopup\";\nimport SVGButton, {SVGButtons} from \"../../elements/SVGButton\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\nexport default function SynthFileSettings(): ReactJSXElement {\n\n    const [visible, setVisible] = useState<boolean>(false);\n\n    return (\n        <>\n            <SVGButton\n                svg={SVGButtons.cog6tooth}\n                onClick={() => setVisible(true)}\n            />\n\n            <SynthFileSettingsPopup\n                visible={visible}\n                setVisible={setVisible}\n            />\n        </>\n    );\n}","import SettingsFieldTitle from \"../../elements/SettingsFieldTitle\";\nimport UploadFileButton from \"../../elements/UploadFileButton\";\nimport Button from \"../../../../../ui/Button\";\nimport * as React from \"react\";\nimport {MCActions} from \"../../../Reducers\";\nimport {MicrotonalConfig} from \"../../../../../utility/MicrotonalConfig\";\nimport SynthFileSettings from \"./SynthFileSettings\";\nimport {useSetErrorMsg, useMCDispatch, useMConfig} from \"../../../PlayProvider\";\nimport {MConfigData} from \"../../SettingsPanelContext\";\nimport {useMConfigData, useSetMConfigData} from \"../../SettingsPanelProvider\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport { v4 as UUIDv4 } from 'uuid';\n\nexport default function SynthFileHandler(): ReactJSXElement {\n\n    const microtonalConfig: MicrotonalConfig = useMConfig();\n    const mcDispatch = useMCDispatch();\n    const errorMsgDispatch = useSetErrorMsg();\n\n    const mConfigFileData: MConfigData = useMConfigData();\n    const setMConfigFileData: Function = useSetMConfigData();\n\n    const handleConfigUpload = (event: React.ChangeEvent<HTMLInputElement>): void => {\n        let file: File = event.target.files[0];\n        let reader: FileReader = new FileReader();\n        let readerResult: string | ArrayBuffer;\n        let fileAsText: string = '';\n\n        reader.onload = (): void => {\n            readerResult = reader.result;\n            if (readerResult instanceof ArrayBuffer)\n                fileAsText = new TextDecoder().decode(readerResult);\n            else\n                fileAsText = readerResult;\n\n            try {\n                let config = JSON.parse(fileAsText);\n                let configTitle: string = file.name.substring(0, file.name.length - 8); // Remove '.mConfig'\n\n                // Create new configId to allow for multiple uploads of the same config.\n                mcDispatch({type: MCActions.SET_CONFIG, config: {...config, title: configTitle, configId: UUIDv4()} as MicrotonalConfig});\n                setMConfigFileData({title: config.title, description: config.description} as MConfigData);\n            } catch (e) {\n                errorMsgDispatch(MCONFIG_UPLOAD_ERROR(file.name));\n            }\n        }\n        reader.onerror = (): void => {\n            errorMsgDispatch(MCONFIG_UPLOAD_ERROR(file.name));\n        }\n        reader.readAsText(file);\n    }\n\n    const handleConfigDownload = (): void => {\n        let config: MicrotonalConfig = {...microtonalConfig};\n        if (mConfigFileData.title !== microtonalConfig.title || mConfigFileData.description !== microtonalConfig.description)\n            config = {...microtonalConfig, title: mConfigFileData.title, description: mConfigFileData.description};\n\n        let configJSON: string[] = [JSON.stringify(config)];\n        let file: File = new File(configJSON, `${config.title}.mConfig`, {type: 'text'});\n\n        // Create download link and click\n        const element = document.createElement('a');\n        element.href = URL.createObjectURL(file);\n        element.download = file.name;\n        element.click();\n        element.remove();\n    }\n\n    return (\n        <div className={'flex flex-col mb-4'}>\n\n            <div className={'flex justify-between relative'}>\n                <SettingsFieldTitle text={'SYNTH FILES'}/>\n                <SynthFileSettings />\n            </div>\n\n            <UploadFileButton\n                text={'UPLOAD SYNTH FILE'}\n                accept={'.mConfig'}\n                uploadFile={(e) => handleConfigUpload(e)}\n            />\n\n            <Button\n                text={'DOWNLOAD SYNTH'}\n                onClick={() => handleConfigDownload()}\n            />\n        </div>\n    );\n}\n\nconst MCONFIG_UPLOAD_ERROR = (filename: string): string => {\n    return `Your synth file '${filename}' could not be uploaded. Please try again.`;\n};","import * as React from \"react\";\nimport TuningFrequencyEditor from \"../elements/TuningFrequencyEditor\";\nimport EqualTemperedScaleSlider from \"./EqualTemperedScaleSlider\";\nimport SynthFileHandler from \"./synth files/SynthFileHandler\";\nimport {useMConfig} from \"../../PlayProvider\";\nimport {FadeInAndOut} from \"../elements/animations/Animations\";\nimport Animator from \"../elements/animations/Animator\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\nexport default function BasicSettings(): ReactJSXElement {\n\n    const tuningFreq: number = useMConfig().scaleConfig.tuningFrequency;\n\n    return(\n        <div className={'flex flex-col'}>\n            <TuningFrequencyEditor key={tuningFreq} />\n\n            <Animator animation={FadeInAndOut}>\n                <SynthFileHandler />\n            </Animator>\n\n            <EqualTemperedScaleSlider />\n        </div>\n    )\n}\n","import {Scale} from \"../Scale\";\nimport {ScaleNote} from \"../notes\";\n\nexport const GENERATED_TITLE: string = 'CustomScale.scl';\n\nexport function generateScalaText(scale: Scale): string[] {\n\n    let scala: string[] = [];\n\n    let title: string = getTitle(scale);\n    scala.push('! ' + title + '\\n');\n    scala.push('!\\n');\n\n    scala.push(scale.description + '\\n');\n\n    scala.push('  ' + scale.notes.length + '\\n');\n    scala.push('!\\n');\n\n    // Remove 1/1 note before printing\n    // as this isn't present in Scala files.\n    let notes: ScaleNote[] = scale.notes.slice(1);\n    let note: ScaleNote;\n    for (note of notes)\n        scala.push('  ' + note.exportScala() + '\\n');\n    scala.push('  ' + scale.octaveNote.exportScala());\n\n    return scala;\n}\n\nexport function generateScalaFile(scale: Scale): File {\n    let scala: string[] = generateScalaText(scale);\n    return new File(scala, getTitle(scale), {type: \"text\"});\n}\n\nexport function getTitle(scale: Scale): string {\n\n    // If the current title doesn't exist, generate one.\n    if (scale.title === '') {\n        return GENERATED_TITLE;\n    }\n\n    validateTitle(scale.title);\n    return (scale.title.endsWith('.scl') ? scale.title : scale.title + '.scl');\n}\n\n// Check for illegal characters and filenames.\n// The only characters allowed are numbers, letters, dashes, and underscores.\nexport function validateTitle(title: string): boolean {\n\n    let letterOrNumber: RegExp = new RegExp(/[A-z0-9]/)\n    let validCharacters: string[] = ['-', '_', ' '];\n\n    // Remove '.scl'\n    if (title.endsWith('.scl'))\n        title = title.substring(0, title.length - 4);\n\n    // Check for invalid characters.\n    for (let i = 0; i < title.length; i++) {\n\n        if (!letterOrNumber.test(title[i])) {\n            let validChar: string;\n            for (validChar of validCharacters) {\n                if (title[i] === validChar)\n                    break;\n\n                if (validChar === validCharacters[validCharacters.length - 1])\n                    throw new Error(INVALID_CHAR_IN_TITLE_ERROR(title, title[i]));\n            }\n        }\n    }\n\n    // Check if the title is a reserved filename.\n    // Source: https://en.wikipedia.org/wiki/Filename#Reserved_characters_and_words \n    let reservedFilenamesRegex: RegExp = new RegExp(/^(CON|PRN|AUX|NUL|LST|COM[0-9]|LPT[0-9])$/);\n    if (reservedFilenamesRegex.test(title))\n        throw new Error(RESERVED_FILENAME_ERROR(title));\n\n    return true;\n}\n\n\n// Error Messages\nexport const INVALID_CHAR_IN_TITLE_ERROR = (title: string, invalidChar: string): string => {\n    return (\n        `The scale's title '${title}' contains an invalid character, '${invalidChar}'. \n         Only letters, numbers, underscores, and dashes are allowed.\n         \n         Please change the title and try again.\n        `\n    );\n};\n\nexport const RESERVED_FILENAME_ERROR = (title: string): string => {\n    return (\n        `The scale's title '${title}' is a reserved filename. \n        \n         Please change the title and try again.\n        `\n    );\n};","import SettingsFieldTitle from \"../../elements/SettingsFieldTitle\";\nimport UploadFileButton from \"../../elements/UploadFileButton\";\nimport Button from \"../../../../../ui/Button\";\nimport * as React from \"react\";\nimport {Scale} from \"../../../../../utility/microtonal/Scale\";\nimport {parseScalaFile} from \"../../../../../utility/microtonal/scala/ScalaParser\";\nimport {MCActions} from \"../../../Reducers\";\nimport {generateScalaFile} from \"../../../../../utility/microtonal/scala/ScalaGenerator\";\nimport {useSetErrorMsg, useMCDispatch, useScale} from \"../../../PlayProvider\";\nimport {useScalaData, useSetScalaData} from \"../../SettingsPanelProvider\";\nimport {ScalaData} from \"../../SettingsPanelContext\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\nexport default function ScalaFileHandler(): ReactJSXElement {\n\n    const scale: Scale = useScale();\n    const mcDispatch: Function = useMCDispatch();\n    const errorMsgDispatch: Function = useSetErrorMsg();\n\n    const scalaData: ScalaData = useScalaData();\n    const scalaTitle: string = scalaData.title;\n    const scalaDescription: string = scalaData.description;\n    const setScalaData: Function = useSetScalaData();\n\n    const handleScalaUpload = (event: React.ChangeEvent<HTMLInputElement>): void => {\n\n        let file: File = event.target.files[0];\n        let reader: FileReader = new FileReader();\n        let readerResult: string | ArrayBuffer;\n        let fileAsText: string = \"\";\n\n        reader.onload = (): void => {\n            readerResult = reader.result\n            if (readerResult instanceof ArrayBuffer)\n                fileAsText = new TextDecoder().decode(readerResult);\n            else\n                fileAsText = readerResult;\n\n            try {\n                let newScale: Scale = parseScalaFile(fileAsText);\n                mcDispatch({type: MCActions.SET_SCALE, scale: newScale});\n                setScalaData({title: newScale.title, description: newScale.description} as ScalaData);\n            } catch (e) {\n                errorMsgDispatch(e.message);\n            }\n        }\n        reader.onerror = (): void => {\n            errorMsgDispatch(SCALA_FILE_UPLOAD_ERROR(file.name));\n        }\n        reader.readAsText(file);\n    }\n\n    const handleScalaDownload = (): void => {\n        let curScale: Scale = scale;\n        if (scalaTitle !== curScale.title || scalaDescription !== curScale.description)\n            curScale = {...scale, title: scalaTitle, description: scalaDescription};\n\n        let file: File = null;\n        try {\n            file = generateScalaFile(curScale);\n        } catch(e) {\n            errorMsgDispatch(e.message);\n            return;\n        }\n\n        // Create download link and simulate click.\n        const element: HTMLAnchorElement = document.createElement('a');\n        element.href = URL.createObjectURL(file);\n        element.download = file.name;\n        element.click();\n        element.remove();\n    }\n\n    return (\n        <div className={'flex flex-col mb-4'}>\n\n            <SettingsFieldTitle text={'SCALA FILES'} />\n\n            <UploadFileButton\n                text={'UPLOAD SCALA FILE'}\n                accept={'.scl'}\n                uploadFile={(e) => handleScalaUpload(e)}\n            />\n\n            <Button\n                text={'DOWNLOAD SCALA'}\n                onClick={() => handleScalaDownload()}\n            />\n        </div>\n    );\n}\n\nconst SCALA_FILE_UPLOAD_ERROR = (fileName: string): string => {\n    return `Your scala file '${fileName}' could not be uploaded. Please try again.`;\n}","import * as React from \"react\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface ReorderIconProps {\n    isDragging: boolean;\n    setIsDragging: (val:boolean) => void;\n    startDragging: (event: React.PointerEvent<HTMLDivElement>) => void;\n}\n\nexport const reorderIconDiv: string = 'ml-px my-1 p-1.5 touch-none border-2 rounded-md bg-bglight group hover:border-black';\nexport const reorderIconSVG: string = 'w-3 h-3 stroke-2 group-hover:stroke-black';\n\nexport default function ReorderIcon(props: ReorderIconProps): ReactJSXElement {\n\n    const notDraggingDiv: string = 'cursor-grab border-gold';\n    const notDraggingSVG: string = 'stroke-gold';\n    const draggingDiv: string = 'cursor-grabbing border-black';\n    const draggingSVG: string = 'stroke-black';\n\n    let curDiv: string = (!props.isDragging) ? notDraggingDiv : draggingDiv;\n    let curSVG: string = (!props.isDragging) ? notDraggingSVG : draggingSVG;\n\n    return (\n        <div className={`${reorderIconDiv} ${curDiv}`}\n             onPointerDown={(e) => props.startDragging(e)}\n             onPointerUp={() => props.setIsDragging(false)}\n        >\n            <svg\n                className={`${reorderIconSVG} ${curSVG}`}\n                xmlns={'http://www.w3.org/2000/svg'}\n                strokeLinecap={'round'}\n                strokeLinejoin={'round'}\n            >\n                <line x1={1} y1={1} x2={11} y2={1}/>\n                <line x1={1} y1={6} x2={11} y2={6}/>\n                <line x1={1} y1={11} x2={11} y2={11}/>\n            </svg>\n        </div>\n    );\n}","import * as React from \"react\";\nimport {reorderIconDiv, reorderIconSVG} from \"./ReorderIcon\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\nexport default function DisabledReorderIcon(): ReactJSXElement {\n    return (\n        <div className={`${reorderIconDiv} border-black`}>\n            <svg className={`${reorderIconSVG} stroke-black`} xmlns={'http://www.w3.org/2000/svg'}>\n                <line x1={1} y1={1} x2={11} y2={1} strokeLinecap={'round'} strokeLinejoin={'round'}/>\n                <line x1={1} y1={6} x2={11} y2={6} strokeLinecap={'round'} strokeLinejoin={'round'}/>\n                <line x1={1} y1={11} x2={11} y2={11} strokeLinecap={'round'} strokeLinejoin={'round'}/>\n            </svg>\n        </div>\n    );\n}","import * as React from \"react\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport {ScaleNote} from \"../../../../../../../../utility/microtonal/notes\";\nimport {BaseCentNote} from \"../../../../../../../../utility/microtonal/notes/CentNote\";\nimport {BaseRatioNote} from \"../../../../../../../../utility/microtonal/notes/RatioNote\";\n\ninterface BaseNoteConverterProps {\n    isRatio: boolean;\n    setIsRatio: (val: boolean) => void;\n    setBaseNote: (baseNote: ScaleNote) => void;\n}\n\n// Converting the base note just involves visually\n// changing the note's value from '1/1' to '0.0'.\nexport default function BaseNoteConverter(props: BaseNoteConverterProps): ReactJSXElement {\n\n    const convertBaseNote = (): void => {\n        if (props.isRatio) {\n            props.setBaseNote(BaseCentNote);\n            props.setIsRatio(false);\n            return;\n        }\n\n        props.setBaseNote(BaseRatioNote);\n        props.setIsRatio(true);\n    }\n\n    const createRatioBox = (): ReactJSXElement => {\n\n        if (!props.isRatio) {\n            return (\n                <div className={'note-converter-box-inactive note-converter-box-l'}\n                     onClick={() => convertBaseNote()}>\n                    RATIO\n                </div>\n            );\n        }\n\n        return (\n            <div className={'note-converter-box-active note-converter-box-l'}>\n                RATIO\n            </div>\n        );\n    }\n\n    const createCentBox = (): ReactJSXElement => {\n\n        if (props.isRatio) {\n            return (\n                <div className={'note-converter-box-inactive note-converter-box-r'}\n                     onClick={() => convertBaseNote()}>\n                    CENT\n                </div>\n            );\n        }\n\n        return (\n            <div className={'note-converter-box-active note-converter-box-r'}>\n                CENT\n            </div>\n        );\n    }\n\n    return (\n        <div className={'note-converter-container'}>\n            {createRatioBox()}\n            {createCentBox()}\n        </div>\n    );\n}","import * as React from \"react\";\nimport {deleteNoteSVG} from \"./CloseButton\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface DisabledCloseButtonProps {\n    className: string;\n}\n\nexport default function DisabledCloseButton(props: DisabledCloseButtonProps): ReactJSXElement {\n    return (\n        <svg className={`${props.className} ${deleteNoteSVG} bg-bglight`} xmlns={'http://www.w3.org/2000/svg'}>\n            <line x1={4} y1={4} x2={8} y2={8} strokeLinecap={'round'} strokeLinejoin={'round'}/>\n            <line x1={8} y1={4} x2={4} y2={8} strokeLinecap={'round'} strokeLinejoin={'round'}/>\n        </svg>\n    );\n}","import * as React from \"react\";\nimport {useState} from \"react\";\nimport DisabledReorderIcon from \"./elements/DisabledReorderIcon\";\nimport BaseNoteConverter from \"./elements/BaseNoteConverter\";\nimport DisabledCloseButton from \"../../../../elements/DisabledCloseButton\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport {ScaleNote} from \"../../../../../../../utility/microtonal/notes\";\n\ninterface BaseNoteInputProps {\n    baseNote: ScaleNote;\n    setBaseNote: (baseNote: ScaleNote) => void;\n}\n\nexport default function BaseNoteInput(props: BaseNoteInputProps): ReactJSXElement {\n\n    const [isRatio, setIsRatio] = useState<boolean>(!props.baseNote.num.includes('.'));\n\n    return (\n        <div className={`inline-flex my-1`}>\n            <div className={'relative'}>\n                <BaseNoteConverter\n                    isRatio={isRatio}\n                    setIsRatio={setIsRatio}\n                    setBaseNote={props.setBaseNote}\n                />\n                <DisabledCloseButton className={'-top-1.5 -left-1.5'}/>\n            </div>\n\n            <input\n                className={'settings-panel-input mx-px'}\n                type={'string'}\n                disabled={true}\n                value={props.baseNote.num}\n            />\n\n            <DisabledReorderIcon/>\n        </div>\n    );\n}\n","import * as React from \"react\";\nimport {MutableRefObject, useRef, useState} from \"react\";\nimport {cleanPitchValue} from \"../../../../../../../../utility/microtonal/scala/ScalaParser\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface NoteInputFieldProps {\n    noteValue: string;\n    isRatio: boolean;\n    setIsRatio: (val: boolean) => void;\n    editNote: (val: string) => void;\n}\n\n// The note's input field is limited to only numbers and\n// a single '/' or '.', indicating which type of value (ratio or cent).\nexport default function NoteInputField(props: NoteInputFieldProps): ReactJSXElement {\n\n    const [noteValue, setNoteValue] = useState<string>(props.noteValue);\n    const noteInputRef: MutableRefObject<HTMLInputElement> = useRef<HTMLInputElement>(null);\n\n    // These help prevent the cursor from moving to the end of\n    // the input field when a user enters a character that isn't\n    // accepted (ex: a letter) while they are typing in the middle of the number.\n    //\n    // For more information and original code:\n    // https://github.com/facebook/react/issues/18404#issuecomment-605294038\n    const [selection, setSelection] = React.useState<[number | null, number | null] | null>(null);\n    React.useLayoutEffect(() => {\n        if (selection && noteInputRef.current) {\n            [noteInputRef.current.selectionStart, noteInputRef.current.selectionEnd] = selection;\n        }\n    }, [selection]);\n\n    // This function prevents any characters besides\n    // numbers, '/', and '.' from being entered into the input.\n    //\n    // This is needed because a html input of type 'number'\n    // will not allow for forward slashes which are needed to type ratios.\n    //\n    // The curSelection variable is used to keep track of where the\n    // text field's cursor should be. If the user enters an invalid character,\n    // subtract 1 to keep it in place, since it increments on every keypress.\n    const wrapSetNoteValue = (event: React.ChangeEvent<HTMLInputElement>) => {\n\n        let updatedNote: string = event.target.value;\n        let curSelection: [number, number] = [event.target.selectionStart, event.target.selectionEnd];\n\n        let cleanedNote: string = '';\n        let seenSlashOrPeriod: boolean = false;\n        let curIndex: number = 0;\n\n        if (updatedNote.charAt(0) === '-') {\n            if (!updatedNote.includes('/')) {\n                cleanedNote += '-';\n\n                curIndex++;\n                props.setIsRatio(false);\n            }\n        }\n\n        for (; curIndex < updatedNote.length; curIndex++) {\n            let char: string = updatedNote.charAt(curIndex);\n\n            if (!isNaN(parseInt(char))) {\n                cleanedNote += char;\n                continue;\n            }\n\n            if (!seenSlashOrPeriod && (char === '.' || char === '/')) {\n                seenSlashOrPeriod = true;\n                cleanedNote += char;\n\n                props.setIsRatio(char === '/');\n                continue;\n            }\n\n            // Invalid character, move the text cursor back one.\n            curSelection = [curSelection[0] - 1, curSelection[1] - 1];\n        }\n\n        setSelection(curSelection);\n        setNoteValue(cleanedNote);\n    };\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLInputElement>): void => {\n        if (event.key === 'Enter')\n            event.currentTarget.blur();\n    };\n\n    const handleEditNote = (): void => {\n        let newNote: string = cleanPitchValue(props.isRatio, noteValue);\n        if (newNote === props.noteValue) {\n            setNoteValue(props.noteValue);\n            return;\n        }\n\n        props.editNote(newNote);\n    };\n\n    return (\n        <input\n            type={'string'}\n            ref={noteInputRef}\n            value={noteValue}\n            onChange={(e) => wrapSetNoteValue(e)}\n            onKeyDown={(e) => handleKeyDown(e)}\n            onBlur={() => handleEditNote()}\n            className={'settings-panel-input mx-px'}\n        />\n    );\n}\n","import * as React from \"react\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport {ScaleNote, CentNote} from \"../../../../../../../../utility/microtonal/notes\";\n\ninterface NoteConverterProps {\n    note: ScaleNote;\n    isRatio: boolean;\n    convertNote: Function;\n}\n\n// A user can convert from a ratio to a cent value and convert back.\n// Converting from any cent to a ratio is not allowed.\nexport default function NoteConverter(props: NoteConverterProps): ReactJSXElement {\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLOrSVGElement>): void => {\n        if (event.key === 'Enter' || event.key === ' ') {\n            props.convertNote();\n            event.preventDefault();\n        }\n    }\n\n    const createRatioBox = (): ReactJSXElement => {\n\n        if (!props.isRatio) {\n\n            // If the current note is a cent note but does not have a previous ratio to convert to.\n            if (props.note instanceof CentNote && props.note.prevRatio === '') {\n                return (\n                    <div className={'note-converter-box-inactive-disabled note-converter-box-l'}>\n                        RATIO\n                    </div>\n                );\n            }\n\n            return (\n                <div className={'note-converter-box-inactive note-converter-box-l'}\n                     tabIndex={0}\n                     onClick={() => props.convertNote()}\n                     onKeyDown={handleKeyDown}\n                >\n                    RATIO\n                </div>\n            );\n        }\n\n        return (\n            <div className={'note-converter-box-active note-converter-box-l'}>\n                RATIO\n            </div>\n        );\n    }\n\n    const createCentBox = (): ReactJSXElement => {\n\n        if (props.isRatio) {\n            return (\n                <div\n                    className={'note-converter-box-inactive note-converter-box-r'}\n                    tabIndex={0}\n                    onClick={() => props.convertNote()}\n                    onKeyDown={handleKeyDown}\n                >\n                    CENT\n                </div>\n            );\n        }\n\n        return (\n            <div className={'note-converter-box-active note-converter-box-r'}>\n                CENT\n            </div>\n        );\n    }\n\n    return (\n        <div className={'note-converter-container'}>\n            {createRatioBox()}\n            {createCentBox()}\n        </div>\n    );\n}\n","import * as React from \"react\";\nimport {useState} from \"react\";\nimport {ScaleNote} from \"../../../../../../../utility/microtonal/notes\";\nimport NoteInputField from \"./elements/NoteInputField\";\nimport NoteConverter from \"./elements/NoteConverter\";\nimport CloseButton from \"../../../../elements/CloseButton\";\nimport {MCActions} from \"../../../../../Reducers\";\nimport {useMCDispatch} from \"../../../../../PlayProvider\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface ScaleNoteInputProps {\n    note: ScaleNote;\n    noteIndex: number;\n}\n\nexport default function ScaleNoteInput(props: ScaleNoteInputProps): ReactJSXElement {\n\n    const mcDispatch: Function = useMCDispatch();\n\n    const [isRatio, setIsRatio] = useState<boolean>(!props.note.num.includes('.'));\n\n    const convertNote = (): void => {\n        mcDispatch({type: MCActions.CONVERT_NOTE, noteIndex: props.noteIndex});\n    }\n\n    const deleteNote = (): void => {\n        mcDispatch({type: MCActions.DELETE_NOTE, noteIndex: props.noteIndex});\n    }\n\n    const editNote = (newNote: string): void => {\n        mcDispatch({type: MCActions.EDIT_NOTE, noteValue: newNote, noteIndex: props.noteIndex});\n    }\n\n    return (\n        <div className={'inline-flex'}>\n            <div className={'relative'}>\n                <NoteConverter\n                    note={props.note}\n                    isRatio={isRatio}\n                    convertNote={convertNote}\n                />\n                <CloseButton\n                    className={'-top-1.5 -left-1.5'}\n                    onClick={deleteNote}\n                />\n            </div>\n\n            <NoteInputField\n                noteValue={props.note.num}\n                isRatio={isRatio}\n                setIsRatio={setIsRatio}\n                editNote={editNote}\n            />\n\n            {/* ReorderIcon is found in: scale editor/note list/DraggableNote.tsx */}\n        </div>\n    );\n}\n","import * as React from \"react\";\nimport {DragControls, MotionValue, Reorder, useDragControls, useMotionValue} from \"framer-motion\";\nimport ScaleNoteInput from \"../note input/ScaleNoteInput\";\nimport {ScaleNote} from \"../../../../../../../utility/microtonal/notes\";\nimport {MutableRefObject, useState} from \"react\";\nimport ReorderIcon from \"../note input/elements/ReorderIcon\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface DraggableNoteProps {\n    note: ScaleNote;\n    noteIndex: number;\n    listRef: MutableRefObject<HTMLUListElement>;\n    reorderScale: () => void;\n}\n\nexport default function DraggableNote(props: DraggableNoteProps): ReactJSXElement {\n\n    const [isDragging, setIsDragging] = useState<boolean>(false);\n    const dragControls: DragControls = useDragControls();\n    const yValue: MotionValue<number> = useMotionValue(0);\n\n    const startDragging = (event: React.PointerEvent<HTMLDivElement>): void => {\n        setIsDragging(true);\n        dragControls.start(event);\n    };\n\n    const stopDragging = (): void => {\n        setIsDragging(false);\n        props.reorderScale();\n    };\n\n    return (\n        <Reorder.Item\n            value={props.note}\n            style={{ y: yValue }}\n            dragListener={false}\n            dragControls={dragControls}\n            dragConstraints={props.listRef}\n            onDragEnd={() => stopDragging()}\n            className={`inline-flex relative select-none my-1 ${(isDragging) ? 'z-10' : 'z-0'}`}\n        >\n            <ScaleNoteInput\n                note={props.note}\n                noteIndex={props.noteIndex}\n            />\n            <ReorderIcon\n                isDragging={isDragging}\n                setIsDragging={setIsDragging}\n                startDragging={startDragging}\n            />\n        </Reorder.Item>\n    );\n};","import * as React from \"react\";\nimport {ScaleNote} from \"../../../../../../../utility/microtonal/notes\";\nimport {Reorder} from \"framer-motion\";\nimport {Scale} from \"../../../../../../../utility/microtonal/Scale\";\nimport {MCActions} from \"../../../../../Reducers\";\nimport DraggableNote from \"./DraggableNote\";\nimport {useEffect, useRef, useState} from \"react\";\nimport {useMCDispatch, useScale} from \"../../../../../PlayProvider\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface DraggableNoteListProps {\n    baseNote: ScaleNote;\n}\n\nexport default function DraggableNoteList(props: DraggableNoteListProps): ReactJSXElement {\n\n    const scale: Scale = useScale();\n    const mcDispatch: Function = useMCDispatch();\n\n    const [fixedNotes, setFixedNotes] = useState<ScaleNote[]>(scale.notes.slice(1));\n    const listRef: React.MutableRefObject<HTMLUListElement> = useRef(null);\n\n    // Necessary for some Framer animations and\n    // to prevent scrolling to the top on update.\n    // (versus updating with a key prop in the DOM like usual)\n    useEffect(() => {\n        setFixedNotes(scale.notes.slice(1));\n    }, [scale]);\n\n    const reorderScale = (): void => {\n        if (notesAreUnchanged()) {\n            return;\n        }\n\n        let newScale: Scale = {...scale, notes: [props.baseNote, ...fixedNotes]} as Scale;\n        mcDispatch({type: MCActions.SET_SCALE, scale: newScale});\n    }\n\n    const notesAreUnchanged = (): boolean => {\n        let currentFixedNotes: ScaleNote[] = scale.notes.slice(1);\n        for (let i = 0; i < fixedNotes.length; i++) {\n            if (fixedNotes.at(i).id !== currentFixedNotes.at(i).id) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    return (\n        <Reorder.Group\n            className={'select-none'}\n            axis={'y'}\n            layoutScroll\n            ref={listRef}\n            values={fixedNotes}\n            onReorder={setFixedNotes}\n        >\n            {fixedNotes.map((note: ScaleNote, i: number) => (\n                <DraggableNote \n                    key={note.id} \n                    note={note} \n                    noteIndex={i + 1}\n                    listRef={listRef}\n                    reorderScale={reorderScale}\n                />\n            ))}\n        </Reorder.Group>\n    );\n}","import * as React from \"react\";\nimport {useState} from \"react\";\nimport {MCActions} from \"../../../../../Reducers\";\nimport {ScaleNote} from \"../../../../../../../utility/microtonal/notes\";\nimport DisabledReorderIcon from \"./elements/DisabledReorderIcon\";\nimport NoteConverter from \"./elements/NoteConverter\";\nimport DisabledCloseButton from \"../../../../elements/DisabledCloseButton\";\nimport NoteInputField from \"./elements/NoteInputField\";\nimport {useMCDispatch, useScale} from \"../../../../../PlayProvider\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\nexport default function OctaveNoteInput(): ReactJSXElement {\n\n    const octaveNote: ScaleNote = useScale().octaveNote;\n    const mcDispatch: Function = useMCDispatch();\n\n    const [isRatio, setIsRatio] = useState<boolean>(!octaveNote.num.includes('.'));\n\n    const convertOctaveNote = () => {\n        mcDispatch({type: MCActions.CONVERT_OCTAVE_NOTE});\n    }\n\n    const editOctaveNote = (newNote: string) => {\n        mcDispatch({type: MCActions.EDIT_OCTAVE_NOTE, noteValue: newNote});\n    }\n\n    return (\n        <div className={'inline-flex'}>\n            <div className={'relative'}>\n                <NoteConverter\n                    note={octaveNote}\n                    isRatio={isRatio}\n                    convertNote={convertOctaveNote}\n                />\n                <DisabledCloseButton className={'-top-1.5 -left-1.5'}/>\n            </div>\n\n            <NoteInputField\n                noteValue={octaveNote.num}\n                isRatio={isRatio}\n                setIsRatio={setIsRatio}\n                editNote={editOctaveNote}\n            />\n\n            <DisabledReorderIcon/>\n        </div>\n    );\n}\n","import * as React from \"react\";\nimport SVGButton, {SVGButtons} from \"../../elements/SVGButton\";\nimport {useScaleEditorTab, useSetScaleEditorTab} from \"../../SettingsPanelProvider\";\nimport {ScaleEditorTab} from \"../../SettingsPanelContext\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\nexport default function ScaleEditorTabSwitcher(): ReactJSXElement {\n\n    const currentTab: ScaleEditorTab = useScaleEditorTab();\n    const setCurrentTab: React.Dispatch<React.SetStateAction<ScaleEditorTab>> = useSetScaleEditorTab();\n\n    const svg: SVGButtons = (currentTab === ScaleEditorTab.VISUAL) ? SVGButtons.pencilSquare : SVGButtons.listBullet;\n\n    const switchTab = (): void => {\n        setCurrentTab((prev: ScaleEditorTab) =>\n            (prev === ScaleEditorTab.VISUAL) ? ScaleEditorTab.SCALA : ScaleEditorTab.VISUAL\n        );\n    }\n\n    return (\n        <SVGButton\n            className={'ml-px'}\n            svg={svg}\n            onClick={switchTab}\n        />\n    );\n}","import * as React from \"react\";\nimport {MutableRefObject} from \"react\";\nimport useHandleClickOutsideRef from \"../../../../../ui/HandleClickOutside\";\nimport CloseButton from \"../../elements/CloseButton\";\nimport FilenameEditor from \"../../elements/FilenameEditor\";\nimport DescriptionEditor from \"../../elements/DescriptionEditor\";\nimport {ScalaData} from \"../../SettingsPanelContext\";\nimport {useScalaData, useSetScalaData} from \"../../SettingsPanelProvider\";\nimport Animator from \"../../elements/animations/Animator\";\nimport {EnterLeftExitLeft} from \"../../elements/animations/Animations\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface ScalaFileSettingsPopupProps {\n    visible: boolean;\n    setVisible: (val: boolean) => void;\n}\n\nexport default function ScalaFileSettingsPopup(props: ScalaFileSettingsPopupProps): ReactJSXElement {\n\n    const scalaData: ScalaData = useScalaData();\n    const setScalaData: Function = useSetScalaData();\n\n    const clickOutsideRef: MutableRefObject<HTMLDivElement> = useHandleClickOutsideRef(props.setVisible, false);\n\n    const setScalaFilename = (name: string): void => {\n        setScalaData({...scalaData, title: name});\n    }\n\n    const setScalaDescription = (desc: string): void => {\n        setScalaData({...scalaData, description: desc});\n    }\n\n    const closePopup = (): void => {\n        props.setVisible(false);\n    }\n\n    return (\n        <Animator\n            className={'absolute w-full p-1 bg-neutral-700 border-2 border-black rounded'}\n            clickOutsideRef={clickOutsideRef}\n            animation={EnterLeftExitLeft}\n            visible={props.visible}\n        >\n            <FilenameEditor\n                title={'Scale Name'}\n                filename={scalaData.title}\n                setFilename={setScalaFilename}\n            />\n\n            <DescriptionEditor\n                className={'mt-1'}\n                title={'Scale Description'}\n                description={scalaData.description}\n                setDescription={setScalaDescription}\n            />\n\n            <CloseButton\n                className={'-top-1.5 -right-1.5'}\n                onClick={closePopup}\n            />\n        </Animator>\n    );\n}","import * as React from \"react\";\nimport {useState} from \"react\";\nimport Button from \"../../../../../../ui/Button\";\nimport BaseNoteInput from \"./note input/BaseNoteInput\";\nimport DraggableNoteList from \"./note list/DraggableNoteList\";\nimport SettingsFieldTitle from \"../../../elements/SettingsFieldTitle\";\nimport OctaveNoteInput from \"./note input/OctaveNoteInput\";\nimport {Scale} from \"../../../../../../utility/microtonal/Scale\";\nimport {useMCDispatch, useScale} from \"../../../../PlayProvider\";\nimport {RatioNote, ScaleNote} from \"../../../../../../utility/microtonal/notes\";\nimport {averageNotes} from \"../../../../../../utility/microtonal/notes/ScaleNoteUtility\";\nimport {MCActions} from \"../../../../Reducers\";\nimport ScaleEditorTabSwitcher from \"../ScaleEditorTabSwitcher\";\nimport ScalaFileSettingsPopup from \"../../scala files/ScalaFileSettingsPopup\";\nimport SVGButton, {SVGButtons} from \"../../../elements/SVGButton\";\nimport Animator from \"../../../elements/animations/Animator\";\nimport {FadeInAndOut, GrowY} from \"../../../elements/animations/Animations\";\nimport {BaseRatioNote} from \"../../../../../../utility/microtonal/notes/RatioNote\";\nimport {BaseCentNote} from \"../../../../../../utility/microtonal/notes/CentNote\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\nexport default function VisualScaleEditor(): ReactJSXElement {\n\n    const scale: Scale = useScale();\n    const mcDispatch: Function = useMCDispatch();\n\n    const getBaseNote = (): ScaleNote => {\n        if (scale.notes.length <= 1)\n            return (scale.octaveNote instanceof RatioNote) ? BaseRatioNote : BaseCentNote;\n\n        return (scale.notes.at(1) instanceof RatioNote) ? BaseRatioNote : BaseCentNote;\n    }\n    const [baseNote, setBaseNote] = useState<ScaleNote>(getBaseNote());\n    const [displayScaleSettings, setDisplayScaleSettings] = useState<boolean>(false);\n\n    // Insert a new note at the end of the scale,\n    // averaging the last note and the octave note.\n    const handleAddNote = (): void => {\n        let newNote: ScaleNote;\n        let notes: ScaleNote[] = scale.notes;\n\n        if (notes.length === 1) {\n            newNote = averageNotes(baseNote, scale.octaveNote);\n        }\n        else {\n            newNote = averageNotes(notes[notes.length - 1], scale.octaveNote);\n        }\n\n        mcDispatch({type: MCActions.ADD_NOTE, note: newNote});\n    }\n\n    const flipDisplayScaleSettings = (): void => {\n        setDisplayScaleSettings((prev: boolean) => !prev);\n    }\n\n    return (\n        <div className={'flex flex-col'}>\n\n            <div className={'flex justify-between relative z-10'}>\n                <Animator animation={FadeInAndOut}>\n                    <SettingsFieldTitle\n                        className={'mb-1'}\n                        text={'SCALE EDITOR'}\n                    />\n                </Animator>\n\n                <div className={'flex flex-row'}>\n                    <SVGButton\n                        svg={SVGButtons.cog6tooth}\n                        onClick={flipDisplayScaleSettings}\n                    />\n                    <ScaleEditorTabSwitcher />\n                </div>\n\n                <ScalaFileSettingsPopup\n                    visible={displayScaleSettings}\n                    setVisible={setDisplayScaleSettings}\n                />\n            </div>\n\n\n            <Animator\n                className={'w-full h-full flex flex-col'}\n                animation={{...GrowY, transition: { duration: 0.4 } }}\n            >\n                <Button\n                    text={'ADD NOTE'}\n                    className={'animate-none'}\n                    onClick={handleAddNote}\n                />\n\n                {/* Notes */}\n                <div className={'mt-1.5'}>\n                    <BaseNoteInput\n                        baseNote={baseNote}\n                        setBaseNote={setBaseNote}\n                    />\n\n                    <DraggableNoteList\n                        baseNote={baseNote}\n                    />\n\n                    <div className={'mt-1'}>\n                        <SettingsFieldTitle text={'OCTAVE NOTE'} />\n                        <OctaveNoteInput key={scale.octaveNote.id} />\n                    </div>\n                </div>\n            </Animator>\n\n        </div>\n    );\n}","import * as React from \"react\";\nimport SVGButton, {SVGButtons} from \"./SVGButton\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface SaveButtonProps {\n    original: string;\n    current: string;\n    onClick: () => void;\n}\n\nexport default function SaveButton(props: SaveButtonProps): ReactJSXElement {\n\n    const disabled: boolean = props.original === props.current;\n\n    return (\n        <SVGButton\n            svg={SVGButtons.arrowDownTray}\n            onClick={props.onClick}\n            disabled={disabled}\n        >\n            {/* Small bubble in the top left that lets the user know they can click. */}\n            {!disabled &&\n                <div\n                    className={'absolute animate-scale-in -top-1.5 -left-1.5 w-3 h-3 rounded-full bg-gold dark:bg-black border border-black dark:border-gold'}\n                />\n            }\n        </SVGButton>\n    );\n}","import * as React from \"react\";\nimport {useEffect, useState} from \"react\";\nimport {ScalaData} from \"../../SettingsPanelContext\";\nimport {useScalaData, useSetScalaData} from \"../../SettingsPanelProvider\";\nimport {useMCDispatch, useScale, useSetErrorMsg} from \"../../../PlayProvider\";\nimport {Scale, scaleAbstractEquals} from \"../../../../../utility/microtonal/Scale\";\nimport {generateScalaText} from \"../../../../../utility/microtonal/scala/ScalaGenerator\";\nimport SettingsFieldTitle from \"../../elements/SettingsFieldTitle\";\nimport ScaleEditorTabSwitcher from \"./ScaleEditorTabSwitcher\";\nimport {parseScalaFile} from \"../../../../../utility/microtonal/scala/ScalaParser\";\nimport {MCActions} from \"../../../Reducers\";\nimport {SVGButtonPaths, SVGButtons} from \"../../elements/SVGButton\";\nimport {FadeInAndOut, GrowY} from \"../../elements/animations/Animations\";\nimport Animator from \"../../elements/animations/Animator\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport SaveButton from \"../../elements/SaveButton\";\nimport {isFirefox} from \"react-device-detect\";\n\nexport default function ScalaFileEditor(): ReactJSXElement {\n\n    const scale: Scale = useScale();\n    const mcDispatch: Function = useMCDispatch();\n    const setErrorMsg: Function = useSetErrorMsg();\n\n    const scalaData: ScalaData = useScalaData();\n    const setScalaData: Function = useSetScalaData();\n\n    const getScala = (): string[] => {\n        let curScale: Scale = scale;\n        if (curScale.title !== scalaData.title || curScale.description !== scalaData.description)\n            curScale = {...curScale, title: scalaData.title, description: scalaData.description} as Scale;\n\n        return generateScalaText(curScale);\n    }\n\n    const originalScala: string[] = getScala();\n    const [tempScalaFile, setTempScalaFile] = useState<string[]>(originalScala);\n\n    const textareaClassName: string = `settings-panel-input resize-none ${(isFirefox) ? 'whitespace-pre overflow-x-scroll' : 'whitespace-nowrap overflow-x-auto'}`;\n    const textareaRows: number = tempScalaFile.length;\n    const textareaCols: number = window.innerWidth;\n\n    useEffect(() => {\n        setTempScalaFile(getScala());\n    }, [scale, scalaData]);\n\n    const wrapSetTempScalaFile = (event: React.ChangeEvent<HTMLTextAreaElement>): void => {\n\n        let scalaString: string = event.target.value;\n        let scalaStringList: string[] = scalaString.split('\\n');\n\n        scalaStringList = scalaStringList.map((line: string, i: number): string => {\n            if (i === scalaStringList.length - 1)\n                return line;\n            return line + '\\n';\n        });\n\n        setTempScalaFile(scalaStringList);\n    }\n\n    const submitScalaFile = (): void => {\n        let newScale: Scale;\n        try {\n            newScale = parseScalaFile(tempScalaFile.join(''));\n        } catch (e) {\n            setErrorMsg(e.message);\n            return;\n        }\n\n        if (scaleAbstractEquals(newScale, scale)) {\n            setTempScalaFile(originalScala);\n            return;\n        }\n\n        setScalaData({...scalaData, title: newScale.title, description: newScale.description});\n        mcDispatch({type: MCActions.SET_SCALE, scale: newScale});\n    }\n\n    const sendUserToScalaFileHelpPage = (): void => {\n        // Create link and simulate click.\n        const element: HTMLAnchorElement = document.createElement('a');\n        element.href = 'https://huygens-fokker.org/scala/scl_format.html';\n        element.target = '_blank';\n        element.click();\n        element.remove();\n    }\n\n    const handleScalaFileHelpKeyDown = (event: React.KeyboardEvent<HTMLDivElement>): void => {\n        if (event.key === 'Enter' || event.key === ' ') {\n            sendUserToScalaFileHelpPage();\n            event.preventDefault();\n        }\n    }\n\n    return (\n        <div className={'flex flex-col'}>\n\n            <div className={'flex justify-between'}>\n                <Animator\n                    className={'flex flex-row'}\n                    animation={FadeInAndOut}\n                >\n                    <SettingsFieldTitle\n                        className={'mb-1'}\n                        text={'SCALA EDITOR'}\n                    />\n                </Animator>\n\n                <div className={'flex flex-row'}>\n                    <SaveButton\n                        original={originalScala.join('')}\n                        current={tempScalaFile.join('')}\n                        onClick={submitScalaFile}\n                    />\n\n                    <ScaleEditorTabSwitcher />\n                </div>\n            </div>\n\n            <Animator\n                className={'relative'}\n                animation={GrowY}\n            >\n\n                <textarea\n                    className={textareaClassName}\n                    rows={textareaRows}\n                    cols={textareaCols}\n                    value={tempScalaFile.join('')}\n                    onChange={(e) => wrapSetTempScalaFile(e)}\n                />\n\n                {/* Pretty much an SVGButton. */}\n                <div\n                    className={'absolute top-1 right-1 h-min group cursor-pointer bg-neutral-200 dark:bg-bgdark outline-0'}\n                    tabIndex={0}\n                    onClick={() => sendUserToScalaFileHelpPage()}\n                    onKeyDown={(e) => handleScalaFileHelpKeyDown(e)}\n                    onMouseLeave={(e) => e.currentTarget.blur()}\n                >\n                    <svg\n                        className={'w-6 h-6 fill-none stroke-2 stroke-neutral-400 dark:stroke-black group-hocus:stroke-black dark:group-hocus:stroke-gold'}\n                        xmlns={'http://www.w3.org/2000/svg'}\n                        strokeLinecap={'round'}\n                        strokeLinejoin={'round'}\n                    >\n                        {SVGButtonPaths(SVGButtons.questionMarkCircle)}\n                    </svg>\n                </div>\n\n            </Animator>\n\n        </div>\n    );\n}","import * as React from \"react\";\nimport VisualScaleEditor from \"./visual editor/VisualScaleEditor\";\nimport ScalaFileEditor from \"./ScalaFileEditor\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport {ScaleEditorTab} from \"../../SettingsPanelContext\";\nimport {useScaleEditorTab} from \"../../SettingsPanelProvider\";\n\nexport default function ScaleEditor(): ReactJSXElement {\n\n    const currentTab: ScaleEditorTab = useScaleEditorTab();\n\n    return (\n        <>\n            {currentTab === ScaleEditorTab.VISUAL ?\n                <VisualScaleEditor />\n            :\n                <ScalaFileEditor />\n            }\n        </>\n    );\n}\n","import * as React from \"react\";\nimport TuningFrequencyEditor from \"../elements/TuningFrequencyEditor\";\nimport ScalaFileHandler from \"./scala files/ScalaFileHandler\";\nimport {useMConfig} from \"../../PlayProvider\";\nimport ScaleEditor from \"./scale editor/ScaleEditor\";\nimport Animator from \"../elements/animations/Animator\";\nimport {FadeInAndOut} from \"../elements/animations/Animations\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\nexport default function ScaleSettings(): ReactJSXElement {\n\n    const tuningFreq: number = useMConfig().scaleConfig.tuningFrequency;\n\n    return (\n        <div className={'flex flex-col'}>\n            <TuningFrequencyEditor key={tuningFreq} />\n\n            <Animator animation={FadeInAndOut}>\n                <ScalaFileHandler />\n            </Animator>\n\n            <ScaleEditor />\n        </div>\n    );\n};","import BasicSettings from \"./basic settings/BasicSettings\";\nimport ScaleSettings from \"./scale settings/ScaleSettings\";\nimport * as React from \"react\";\nimport {SettingsPanelTabs} from \"./SettingsPanelProvider\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface SettingsPanelTabProps {\n    currentTab: SettingsPanelTabs;\n}\n\nexport default function SettingsPanelTab(props: SettingsPanelTabProps): ReactJSXElement {\n\n    return (\n        <div className={'my-1.5 px-2 rounded-2xl overflow-y-auto'}>\n            {props.currentTab === SettingsPanelTabs.BASIC &&\n                <BasicSettings />\n            }\n\n            {props.currentTab === SettingsPanelTabs.SCALE &&\n                <ScaleSettings />\n            }\n        </div>\n    );\n}","import * as React from \"react\";\nimport {useState} from \"react\";\nimport SettingsFieldTitle from \"./elements/SettingsFieldTitle\";\nimport SettingsPanelTabSwitcher from \"./SettingsPanelTabSwitcher\";\nimport SettingsPanelTab from \"./SettingsPanelTab\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\nimport {SettingsPanelTabs} from \"./SettingsPanelProvider\";\n\nexport default function SettingsPanel(): ReactJSXElement {\n\n    const [currentTab, setCurrentTab] = useState<SettingsPanelTabs>(SettingsPanelTabs.BASIC);\n\n    return (\n        <div className={'flex flex-col w-full h-full border-t-2 border-r-2 border-gold rounded-tr-xl bg-bglight'}>\n            <div className={'pt-3 pb-2 text-center'}>\n                <SettingsFieldTitle text={'SETTINGS'}/>\n            </div>\n\n            <SettingsPanelTabSwitcher\n                currentTab={currentTab}\n                setCurrentTab={setCurrentTab}\n            />\n\n            <SettingsPanelTab\n                currentTab={currentTab}\n            />\n        </div>\n    );\n}","import {Tooltip} from \"@mui/material\";\nimport * as React from \"react\";\nimport {useCallback, useEffect, useRef, useState} from \"react\";\nimport {KeyShortcut} from \"../../utility/microtonal/PianoKeyMapping\";\nimport {ScaleConfig} from \"../../utility/MicrotonalConfig\";\nimport MidiReceiver from \"../../utility/midi/MIDIReceiver\";\nimport {MCActions} from \"./Reducers\";\nimport {useMConfig} from \"./PlayProvider\";\n\ninterface FrequencyBarButton {\n    frequency: number,\n    keyMapping?: string,\n    active?: boolean,\n    scaleDegree: number,\n    isEditing: boolean,\n    onClick: (index: number) => void,\n    index: number,\n    length: number,\n    divWidth: number\n}\n\nfunction FrequencyBarButton(props: FrequencyBarButton) {\n    const wrapIndex = Math.floor(props.divWidth/40)-1\n    return <Tooltip describeChild placement=\"top\" title={props.frequency}><button\n        aria-describedby={\"simple-popover\"}\n        className={\"btn w-10 max-w-10 items-center justify-center p-0 font-agrandir text-black  border-b-2 border-r-2 border-black text-sm \" +\n            `${props.active ? 'bg-gold' : \"bg-neutral-200 hover:bg-neutral-300\"} ` + \n            `${ props.index === 0 || \n                props.index === wrapIndex + 1 || \n                props.index === wrapIndex * 2 + 2 \n                ? 'rounded-l-md' : ''} ` + \n            `${ props.index === props.length || \n                props.index === wrapIndex || \n                props.index === wrapIndex * 2 + 1 \n                ? 'rounded-r-md' : ''} `\n        }\n        onClick={e => props.onClick(props.isEditing ? null : props.scaleDegree)}>\n        {Math.round(props.frequency)}\n        <div className={(props.active || props.isEditing ? \"\" : \"opacity-0\")}\n            >{props.isEditing ? \"???\" : props.keyMapping}</div>\n    </button>\n    </Tooltip>\n}\n\nconst reverseMapping = (mapping: Record<number, number>) => {\n    let final: Record<number, number> = {};\n    for (let key in mapping) {\n        final[mapping[key]] = Number(key);\n    }\n    return final;\n}\n\n// Handle modulo with negative numbers\nconst modulo = (value: number, divisor: number) => {\n    while (value < 0) {\n        value += divisor;\n    }\n    return value % divisor;\n}\n\nconst scaleDegreeToKeyIndex = (reversedMapping: Record<number, number> , scaleDegree: number, keyOffset: number, scaleLength: number, keysPerOctave: number) => {\n    let keyboardKeyNum = reversedMapping[scaleDegree];\n    if (keyboardKeyNum === undefined) {\n        return null;\n    }\n    return modulo(keyboardKeyNum - keyOffset, keysPerOctave);\n}\n\nfunction FrequencyBarComponent(props: {\n    keyMapping: Record<number, number>,\n    playMidiNote: Function,\n    setKeyMapping: Function,\n    octaveOffset: number,\n    keyboardShortcuts: Array<KeyShortcut>\n    midiReceiver: MidiReceiver,\n    mcDispatch: Function,\n    keyOffset: number,  // How many keys up should be displaying from the root key? Used for keyboard moving\n}) {\n\n    const scaleConfig: ScaleConfig = useMConfig().scaleConfig;\n\n    //Stores width of frequency bar div for wrap styling\n    const divRef = useRef<HTMLDivElement>(null);\n    const [width, setWidth] = useState<number | null>(null);\n\n    let debounceTimeout: ReturnType<typeof setTimeout>;\n\n    function handleResize() {\n        const div = divRef.current;\n        clearTimeout(debounceTimeout);\n\n        debounceTimeout = setTimeout(() => {\n          setWidth(div.offsetWidth-44);\n        }, 1);\n    }\n\n    //Updates width of freq bar on resize\n    useEffect(() => {\n        if (width === null) handleResize();\n        window.addEventListener(\"resize\", handleResize);\n\n        return () => window.removeEventListener(\"resize\", handleResize);\n    }, [width]);\n\n    const [editingNote, setEditingNote] = useState<number>(null);\n\n    let freqBarArr = [];\n    let reversedMapping = reverseMapping(props.keyMapping);\n\n    useEffect(() => {\n        if (editingNote === null) {\n            return;\n        }\n        const onKeyPress = (event: KeyboardEvent) => {\n            if (editingNote !== null) {\n                let keyIndex = -1;\n                // Validate note is currently on the keyboard\n                for (let i=0; i<props.keyboardShortcuts.length; i++) {\n                    let shortcut = props.keyboardShortcuts[i];\n                    if (shortcut.key === event.key.toLowerCase()) {\n                        keyIndex = i;\n                        break;\n                    }\n                }\n                if (keyIndex === -1) {\n                    setEditingNote(null);\n                    document.removeEventListener(\"keydown\", onKeyPress);\n                    return;\n                }\n                // We now have keyIndex and editingNote (scale degree), unset the current note with this degree and then\n                // set the new key to that note\n                let oldKey = scaleDegreeToKeyIndex(reversedMapping, editingNote, props.keyOffset, scaleConfig.scale.notes.length, scaleConfig.keysPerOctave);\n                let newKey = modulo(keyIndex + props.keyOffset, scaleConfig.keysPerOctave);\n                if (oldKey !== null) {\n                    let correctedOldKey = modulo(oldKey + props.keyOffset, scaleConfig.keysPerOctave);\n                    console.log(`Unsetting scaleDegree ${editingNote} bound to ${oldKey} ${props.keyboardShortcuts[oldKey].key} which is key mapping ${correctedOldKey}`)\n                    props.mcDispatch({type: MCActions.UNSET_KEYBIND, keyIndex: correctedOldKey});\n                }\n                console.log(oldKey, newKey);\n                props.mcDispatch({type: MCActions.SET_KEYBIND, keyIndex: newKey, scaleDegree: editingNote})\n\n                setEditingNote(null);\n                document.removeEventListener(\"keydown\", onKeyPress);\n            }\n        }\n        document.addEventListener(\"keydown\", onKeyPress);\n        return () => document.removeEventListener(\"keydown\", onKeyPress)\n    }, [editingNote]);\n\n    // console.log(props.keyMapping, reversedMapping)\n\n    // If the user is advancing forward or backwards keys, we need to rotate the frequency bar buttons around\n    let scaleOffset = null;\n    // We might have to search a bit in case the current lowest key isn't bound to anything\n    for (let i = 0; i < scaleConfig.scale.notes.length; i++) {\n        if (props.keyMapping[props.keyOffset + i] !== undefined) {\n            scaleOffset = props.keyMapping[props.keyOffset + i];\n            break;\n        }\n    }\n\n    // Stop before the octave note\n    for (let preScaleDegree = 0; preScaleDegree < scaleConfig.scale.notes.length; preScaleDegree++) {\n        // Add the offset to rotate it\n        let scaleDegree = (preScaleDegree + scaleOffset) % scaleConfig.scale.notes.length;\n        // If we are rolling keys over, the upper keys should have their octave bumped up\n        let octaveAdditive = Math.floor((preScaleDegree + scaleOffset) / scaleConfig.scale.notes.length);\n        // Map the scale degree to the midi keyboard mapping\n        let keyboardKeyNum = reversedMapping[scaleDegree];\n        let keyboardKey;\n        let keyIndex = scaleDegreeToKeyIndex(reversedMapping, scaleDegree, props.keyOffset, scaleConfig.scale.notes.length, scaleConfig.keysPerOctave);\n        if (keyIndex === null) {\n            keyboardKey = \"None\";\n        } else {\n            try {\n                keyboardKey = props.keyboardShortcuts[keyIndex].key.toUpperCase();\n            } catch (e) {\n                // Happens when trying to display bindings for keys above the\n                // keyboard max. This can happen when you increase octave all the\n                // way up, and it clips off the top.\n                keyboardKey = \"None\";\n                keyboardKeyNum = undefined;\n            }\n        }\n\n        // console.log(`prescale ${preScaleDegree} -> scaleDegree ${scaleDegree} mapped to key index ${keyIndex} ${keyboardKey}`)\n\n        freqBarArr.push\n        (\n            // <Tooltip describeChild title={\"asdf\"} key={i}\n            //          placement=\"top\">\n                    <FrequencyBarButton frequency={props.midiReceiver.ScaleDegreeToFrequency(scaleDegree, props.octaveOffset + octaveAdditive)} keyMapping={keyboardKey}\n                                        key={scaleDegree} active={keyboardKeyNum !== undefined}\n                                        isEditing={editingNote === scaleDegree}\n                                        scaleDegree={scaleDegree}\n                                        onClick={setEditingNote}\n                                        index={preScaleDegree}\n                                        length={scaleConfig.scale.notes.length - 1}\n                                        divWidth={width}/>\n            // </Tooltip>\n        )\n    }\n\n    return <div ref={divRef} className=\"w-full flex justify-center mt-10 items-center\">\n        <div className={\"flex flex-row justify-center flex-wrap\"}>\n            {freqBarArr}\n        </div>\n        <Tooltip describeChild title=\"Click a box on the frequency bar, then press the desired key on your keyboard in order to bind it to the desired frequency.\">\n            <button className=\"btn min-w-[1.75rem] w-7 aspect-square bg-white dark:bg-bgdark text-black dark:text-gold rounded-full mx-2 dark:border-2 dark:border-gold\">?</button>\n        </Tooltip>\n    </div>;\n}\n\nexport default FrequencyBarComponent;\n","import * as React from 'react'\nimport {MouseEventHandler, useRef} from \"react\";\n\ninterface PianoKeyButtonProps {\n    children: any,\n    faceUp?: boolean,\n    className?: string,\n    onClick?: MouseEventHandler | undefined\n}\n\nexport default function PianoKeyButton(props: PianoKeyButtonProps) {\n\n    const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>): void => {\n        if (event.key === 'Enter' || event.key === ' ') {\n            event.currentTarget.click();\n            event.preventDefault();\n        }\n    }\n\n    return <div className={`border-4 border-black bg-piano-edge dark:bg-bgdark\n    ${props.faceUp ? 'rounded-t-3xl border-b-0 pt-2' : 'rounded-b-3xl pb-2'} ${props.className}`}\n                onClick={props.onClick} onKeyDown={handleKeyDown} tabIndex={0} role=\"button\" aria-pressed=\"false\">\n        <div className={`w-full h-full \n        ${props.faceUp ? 'rounded-t-3xl' : 'rounded-b-3xl'} \n        p-2 bg-piano-surface flex items-center justify-center dark:bg-bglight`}>\n            {props.children}\n        </div>\n    </div>\n\n}","import * as React from 'react'\nimport PianoKeyButton from \"../../ui/PianoKeyButton\";\n\nexport default function OctaveButtons(props: {\n    octaveUp: Function,\n    octaveDown: Function\n    className: string\n}) {\n    return <div className={`flex flex-col h-full ${props.className}`}>\n        <span className={\"text-white text-center font-agrandir-wide\"}>OCTAVE</span>\n        <PianoKeyButton faceUp className={\"lg:w-24 w-16 h-1/2\"} onClick={() => props.octaveUp()}>\n            <svg className={'fill-neutral-700 dark:fill-gold'} width=\"33\" height=\"33\" viewBox=\"0 0 33 33\" xmlns=\"http://www.w3.org/2000/svg\">\n                <g clipPath=\"url(#clip0_316_24360)\">\n                    <path d=\"M16.5954 11.4768L24.6515 19.5329H8.53931L16.5954 11.4768Z\"/>\n                </g>\n                <defs>\n                    <clipPath id=\"clip0_316_24360\">\n                    <rect width=\"32.2244\" height=\"32.2244\" fill=\"white\" transform=\"translate(0.483154 0.735352)\"/>\n                    </clipPath>\n                </defs>\n            </svg>\n        </PianoKeyButton>\n        <PianoKeyButton className={\"lg:w-24 w-16 h-1/2\"} onClick={() => props.octaveDown()}>\n            <svg className={'fill-neutral-700 dark:fill-gold'} width=\"17\" height=\"9\" viewBox=\"0 0 17 9\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M8.59542 8.2085L16.6515 0.152384H0.539307L8.59542 8.2085Z\"/>\n            </svg>\n        </PianoKeyButton>\n    </div>\n}\n","import {KeyboardShortcuts, Piano as ReactPiano} from \"react-piano\";\nimport * as React from \"react\";\nimport {ScaleConfig, SynthConfig} from \"../../utility/MicrotonalConfig\";\nimport {useEffect} from \"react\";\nimport {createPianoKeyboardShortcuts, KeyShortcut} from \"../../utility/microtonal/PianoKeyMapping\";\nimport {AdditiveSynthesizer} from \"../../utility/audio/AdditiveSynthesizer\";\nimport MidiReceiver from \"../../utility/midi/MIDIReceiver\";\nimport {useMConfig} from \"./PlayProvider\";\n\ninterface ReactPianoWrapperProps {\n    midiReceiver: MidiReceiver,\n    keyMapping: Record<number, number>, \n    keyboardShortcuts: Array<KeyShortcut>,\n    rootKey: number,\n    keyOffset: number,\n    keyboardLength: number\n}\n\nconst DEFAULT_VELOCITY = 60;\n\n\n// @ts-ignore\nconst whiteKey = TAILWIND_COLORS_NEUTRAL['400'];\n// @ts-ignore\nconst blackKey = TAILWIND_COLORS_NEUTRAL['900'];\n// @ts-ignore\nconst activeKey = TAILWIND_COLORS_BLUE['400'];\n\n// The rootkey here is given differently so we can display the keyboard in a different place than the configured root\n// note. Ex. A4 == 440 but keyboard starts a C3\nexport default function ReactPianoWrapper(props: ReactPianoWrapperProps) {\n\n    const scaleConfig: ScaleConfig = useMConfig().scaleConfig;\n\n    return <>\n        <style dangerouslySetInnerHTML={{__html: `\n          .ReactPiano__Keyboard > div.ReactPiano__Key--accidental:nth-child(n+${scaleConfig.keysPerOctave + 1}) {\n            background: ${blackKey};\n          }\n          .ReactPiano__Keyboard > div.ReactPiano__Key--natural:nth-child(n+${scaleConfig.keysPerOctave + 1}) {\n            background: ${whiteKey};\n          }\n          .ReactPiano__Keyboard > div.ReactPiano__Key--active:nth-child(n+${scaleConfig.keysPerOctave + 1}) {\n            background: ${activeKey};\n          }\n        `}} />\n        <div className=\"w-2/3\">\n            <ReactPiano\n            // activeNotes={synthesizer.activeNotes} TODO: Hook up midi events\n            noteRange={{ first: props.rootKey + props.keyOffset, last: props.rootKey + props.keyOffset + props.keyboardLength }}\n            playNote={(note: any) => {props.midiReceiver.noteOn(note, DEFAULT_VELOCITY)}}\n            stopNote={(note: any) => {props.midiReceiver.noteOff(note)}}\n            keyboardShortcuts={props.keyboardShortcuts}\n        />\n        </div>\n    </>\n}","import {MicrotonalConfig} from \"../../utility/MicrotonalConfig\";\n\nexport enum OctaveAction {\n    INCREASE_OCTAVE,\n    DECREASE_OCTAVE,\n    SET_MICROTONAL_CONFIG\n}\n\nconst KEYBOARD_SETTINGS = {\n    minimumKeyboardLength: 14,\n    maximumKeyboardLength: 14\n}\n\nconst MIDI_MIN = 21;\nconst MIDI_MAX = 127;\n\ntype Action =\n    | { type: OctaveAction.INCREASE_OCTAVE }\n    | { type: OctaveAction.DECREASE_OCTAVE }\n    | { type: OctaveAction.SET_MICROTONAL_CONFIG, config: MicrotonalConfig }\n\nfunction getLowHighMidi(keysPerOctave: number, rootKey: number, octave: number, keyOffset: number, keyboardLength: number) {\n    let lowestMidiNote = rootKey + keysPerOctave * octave + keyOffset;\n    let highestMidiNote = lowestMidiNote + keyboardLength;\n    return [lowestMidiNote, highestMidiNote]\n}\n\nfunction getKeyboardLength(keysPerOctave: number) {\n    return Math.min(Math.max(KEYBOARD_SETTINGS.minimumKeyboardLength, keysPerOctave), KEYBOARD_SETTINGS.maximumKeyboardLength);\n}\n\nexport interface OctaveOffset {\n    octave: number, // How many octaves we offset from the root note?\n    keyOffset: number,  // How many keys above to move the keyboard? The totalled number\n    keysPerOctave: number,  // How many piano keys are mapped per octave?\n    keyboardLength: number, // How many piano keys to display on screen?\n    rootKey: number,    // The root key the tuning frequency is mapped to\n    userKeyOffset: number,      // The key offset as configured by the user\n}\n\nexport function initializeOctaveOffset(config: MicrotonalConfig) {\n    return {\n        octave: 0,\n        keyOffset: 0,\n        keysPerOctave: config.scaleConfig.keysPerOctave,\n        rootKey: config.scaleConfig.rootKey,\n        userKeyOffset: 0,\n        keyboardLength: getKeyboardLength(config.scaleConfig.keysPerOctave)\n    } as OctaveOffset;\n}\n\nexport function OctaveOffsetReducer(state: OctaveOffset, action: Action) {\n    let octave = state.octave;\n    let userKeyOffset = state.userKeyOffset;\n    let rootKey = state.rootKey;\n    let keysPerOctave = state.keysPerOctave;\n    switch (action.type) {\n        case OctaveAction.INCREASE_OCTAVE:\n            octave += 1;\n            break;\n        case OctaveAction.DECREASE_OCTAVE:\n            octave -= 1;\n            break;\n        case OctaveAction.SET_MICROTONAL_CONFIG:\n            rootKey = action.config.scaleConfig.rootKey;\n            keysPerOctave = action.config.scaleConfig.keysPerOctave;\n            break;\n    }\n\n    let keyboardLength = getKeyboardLength(keysPerOctave);\n    let [lowestMidiNote, highestMidiNote] = getLowHighMidi(keysPerOctave, rootKey, octave, userKeyOffset, keyboardLength);\n\n    if (lowestMidiNote <= (MIDI_MIN - keysPerOctave)) {\n        octave += 1\n    }\n    if (highestMidiNote >= (MIDI_MAX + keysPerOctave)) {\n        octave -= 1\n    }\n\n    [lowestMidiNote, highestMidiNote] = getLowHighMidi(keysPerOctave, rootKey, octave, userKeyOffset, keyboardLength);\n\n    let safetyKeyOffset = 0;\n    if (lowestMidiNote < MIDI_MIN) {\n        safetyKeyOffset += MIDI_MIN - lowestMidiNote\n    }\n    if (highestMidiNote > MIDI_MAX) {\n        keyboardLength -= highestMidiNote - MIDI_MAX\n    }\n\n    return {\n        octave: octave,\n        keyOffset: userKeyOffset + safetyKeyOffset,\n        rootKey: rootKey,\n        keysPerOctave: keysPerOctave,\n        userKeyOffset: userKeyOffset,\n        keyboardLength: keyboardLength\n    } as OctaveOffset;\n}","import * as React from \"react\";\nimport {useEffect, useReducer, useState} from \"react\";\nimport FrequencyBarComponent from \"./FrequencyBar\";\nimport OctaveButtons from \"./OctaveButtons\";\nimport {MicrotonalConfig} from \"../../utility/MicrotonalConfig\";\nimport ReactPianoWrapper from \"./ReactPianoWrapper\";\nimport {createPianoKeyboardShortcuts} from \"../../utility/microtonal/PianoKeyMapping\";\nimport Knobs from '../../ui/Knobs'\nimport MidiReceiver from \"../../utility/midi/MIDIReceiver\";\nimport {MCActions} from \"./Reducers\";\nimport {initializeOctaveOffset, OctaveAction, OctaveOffset, OctaveOffsetReducer} from \"./PianoKeyReducer\";\nimport {useMCDispatch, useMConfig} from \"./PlayProvider\";\n\nconst MIDDLE_C = 60;\n\ninterface MicrotonalPianoProps {\n    keyMapping: Record<string, number>,\n    midiReceiver: MidiReceiver,\n    setKeyMapping: Function\n}\n\nexport default function MicrotonalPiano(props: MicrotonalPianoProps) {\n\n    const microtonalConfig: MicrotonalConfig = useMConfig();\n    const mcDispatch: Function = useMCDispatch();\n\n    const [octaveOffset, offsetDispatch] = useReducer(OctaveOffsetReducer, initializeOctaveOffset(microtonalConfig))\n\n    useEffect(() => {\n        offsetDispatch({type: OctaveAction.SET_MICROTONAL_CONFIG, config: microtonalConfig})\n    }, [microtonalConfig])\n\n    const generateKeyboardShortcuts = () => {\n        return createPianoKeyboardShortcuts(microtonalConfig.scaleConfig.rootKey + octaveOffset.keyOffset + octaveOffset.octave * microtonalConfig.scaleConfig.keysPerOctave,\n            octaveOffset.keyboardLength);\n    }\n\n    let [keyboardShortcuts, setKeyboardShortcuts] = useState(generateKeyboardShortcuts());\n\n    useEffect(() => {\n        setKeyboardShortcuts(generateKeyboardShortcuts());\n    }, [microtonalConfig, octaveOffset])\n\n    const handleMasterGainChange = (value: number) => {\n        mcDispatch({type: MCActions.SET_MASTER_GAIN, gain: value});\n    }\n\n    return (\n        <div className=\"flex flex-col justify-center h-full border-gold border-t-2 border-l-2 border-b-2 rounded-tl-xl rounded-bl-xl bg-bglight\">\n            <div className=\"flex justify-center\">\n                <FrequencyBarComponent\n                    keyMapping={props.keyMapping}\n                    keyboardShortcuts={keyboardShortcuts}\n                    playMidiNote={() => {}}\n                    midiReceiver={props.midiReceiver}\n                    keyOffset={octaveOffset.keyOffset}\n                    setKeyMapping={props.setKeyMapping}\n                    octaveOffset={octaveOffset.octave}\n                    mcDispatch={mcDispatch}\n                />\n            </div>\n            <div className=\"flex flex-row justify-around w-full mt-1 flex-1 py-2\">\n                <div className=\"w-32\">\n                    <Knobs\n                        knobLabel=\"GAIN\"\n                        value={microtonalConfig.synthConfig.gain}\n                        onChange={(value: number) => handleMasterGainChange(value)}\n                        className=\"border-gold border-[3px]\"\n                    />\n                </div>\n                <ReactPianoWrapper\n                    keyboardShortcuts={keyboardShortcuts}\n                    keyMapping={props.keyMapping}\n                    keyOffset={octaveOffset.keyOffset}\n                    midiReceiver={props.midiReceiver}\n                    rootKey={microtonalConfig.scaleConfig.rootKey + octaveOffset.octave * microtonalConfig.scaleConfig.keysPerOctave}\n                    keyboardLength={octaveOffset.keyboardLength}\n                />\n                <OctaveButtons\n                    className={'pr-6'}\n                    octaveUp={() => offsetDispatch({type: OctaveAction.INCREASE_OCTAVE})}\n                    octaveDown={() => offsetDispatch({type: OctaveAction.DECREASE_OCTAVE})}\n                />\n            </div>\n        </div>\n    );\n}","import {AdditiveSynthesizer} from \"../audio/AdditiveSynthesizer\"\nimport {DEFAULT_MICROTONAL_CONFIG, DEFAULT_SCALE_CONFIG, DEFAULT_SYNTH_CONFIG, ScaleConfig} from \"../MicrotonalConfig\";\nimport {RatioNote} from \"../microtonal/notes\";\nimport {scaleDegreeToNote} from \"../microtonal/Scale\";\n\nexport default class MidiReceiver {\n\n    public midiInput: WebMidi.MIDIInput[] = [];\n    public midiOutput: WebMidi.MIDIOutput[] = [];\n    \n    public synth: AdditiveSynthesizer\n    public config: ScaleConfig = DEFAULT_SCALE_CONFIG\n    public keyMapping: Record<number, number> = DEFAULT_MICROTONAL_CONFIG.keyMapping\n\n    private static NOTE_ON_MESSAGE: number = 144;\n    private static NOTE_OFF_MESSAGE: number = 128;\n    private static PITCH_BEND_MESSAGE: number = 224;\n\n    constructor(synth: AdditiveSynthesizer) {\n        this.synth = synth;\n        this.connectToInstrument()\n    }\n\n    public connectToInstrument() {\n        if (!navigator.requestMIDIAccess) {\n            return;\n        }\n        \n        navigator.requestMIDIAccess().then(\n            (midi) => {\n                this.initDevices(midi)\n\n                midi.onstatechange = (event) => {\n                    this.initDevices(midi)\n                };\n            },\n            (err) => console.warn('unable to connect to midi', err),\n        )\n    }\n\n    public initDevices(midi: WebMidi.MIDIAccess) {\n        this.midiInput = []\n        this.midiOutput = []\n\n        for (let input of midi.inputs.values()) {\n            this.midiInput.push(input)\n            input.onmidimessage = this.onMIDIMessage.bind(this)\n        }\n\n        for (let output of midi.outputs.values()) {\n            this.midiOutput.push(output)\n        }\n    }\n\n    public onMIDIMessage(message: WebMidi.MIDIMessageEvent) {\n        let command = message.data[0]\n\n        if (command == MidiReceiver.NOTE_ON_MESSAGE) {\n            let note = message.data[1]\n            let velocity = message.data[2]\n\n\n            this.noteOn(note, velocity)\n        } else if (command == MidiReceiver.NOTE_OFF_MESSAGE) {\n            let note = message.data[1]\n\n            this.noteOff(note)\n        } else if (command == MidiReceiver.PITCH_BEND_MESSAGE) {\n            let finePitchBend = message.data[1]\n            let coarsePitchBend = message.data[2]\n\n            //this.setGlobalPitchBend(finePitchBend, coarsePitchBend)\n        } else {\n            console.warn(\"This MIDI Input is not supported yet!\")\n        }\n    }\n\n    public noteOn(note: number, velocity: number) {\n        if (note == null || note < 0 || isNaN(note)) {\n            console.warn(\"Invalid note received!\");\n            return;\n        }\n\n        let frequency = this.MidiNotesToFrequency(note);\n\n        this.synth.onPlayFrequency(frequency, velocity);\n    }\n\n    public noteOff(note: number) {\n        if (note == null || note < 0 || isNaN(note)) {\n            console.warn(\"Invalid note received!\");\n            return;\n        }\n\n        let frequency = this.MidiNotesToFrequency(note);\n\n        this.synth.onStopFrequency(frequency);\n    }\n\n    public MidiNotesToFrequency(MidiNote: number): number {\n        // First, we need to determine which key in the octave this is.\n        // This is figuring out where it is on the MIDI keyboard, so we can map it to our scale\n        let octaveKey = (MidiNote - this.config.rootKey) % this.config.keysPerOctave;\n\n        // If this somehow goes negative, bring it positive\n        while (octaveKey < 0) {\n            octaveKey += this.config.keysPerOctave;\n        }\n\n        // Now, determine how many keyboard octaves away we are from the root key.\n        let octaveOffset = Math.floor((MidiNote - this.config.rootKey) / this.config.keysPerOctave);\n\n        // Now we have the octaveKey and the octaveOffset, we can determine how it should be mapped\n        let multiplier;\n        let scaleDegree;\n        let note;\n        try {\n            scaleDegree = this.keyMapping[octaveKey];\n            note = scaleDegreeToNote(this.config.scale, scaleDegree);\n            multiplier = note.multiplier;\n        } catch (e) {\n            console.log(`Error: key in octave ${octaveKey} (MIDI number: ${MidiNote}) is not assigned to a note in the scale.`)\n            return null;\n        }\n\n        return this.ScaleDegreeToFrequency(scaleDegree, octaveOffset)\n    }\n\n    public ScaleDegreeToFrequency(scaleDegree: number, octave: number): number {\n        let note = scaleDegreeToNote(this.config.scale, scaleDegree);\n        let multiplier = note.multiplier;\n\n        // Finally, convert to a frequency.\n        return this.config.tuningFrequency * multiplier * Math.pow(this.config.scale.octaveNote.multiplier, octave);\n    }\n}","import { SynthConfig } from \"../MicrotonalConfig\";\nimport {OscillatorSettings} from \"./OscillatorSettings\";\n\nexport default class OscillatorStack {\n\n    oscillatorNodes: Array<OscillatorNode> = []\n    gainNodes: Array<GainNode> = []\n    endingPlay: boolean = false\n    stopped: boolean = false\n\n    constructor(\n            oscillatorSettings: Array<OscillatorSettings>,\n            frequency: number,\n            baseVolume: number,\n            audioContext: AudioContext,\n            dynamicsCompressor: DynamicsCompressorNode\n            ) {\n        for (let i = 0; i < oscillatorSettings.length; i++) {\n            this.oscillatorNodes[i] = audioContext.createOscillator()\n            // Set oscillator frequency relative to the base frequency\n            this.oscillatorNodes[i].frequency.setValueAtTime(\n                    oscillatorSettings[i].pitchRatio * frequency,\n                    audioContext.currentTime,\n                    )\n\n            this.oscillatorNodes[i].type = oscillatorSettings[i].waveType;\n\n            // Create local gain for this oscillator & make it silent\n            this.gainNodes[i] = audioContext.createGain()\n            this.gainNodes[i].gain.value = 0\n\n            // Connect the gain nodes to the oscillators & then to the compressor.\n            this.oscillatorNodes[i].connect(this.gainNodes[i])\n            this.gainNodes[i].connect(dynamicsCompressor)\n        }\n    }\n\n    /**\n     * Begins sound generation for the given stack.\n     */\n    async beginPlay(audioContext: AudioContext, config: SynthConfig) {\n        // Start sound & ramp to max volume for each oscillator\n        for (let i = 0; i < this.oscillatorNodes.length; i++) {\n            this.oscillatorNodes[i].start(0)\n            this.gainNodes[i].gain.setValueAtTime(0, 0)\n            this.gainNodes[i].gain.linearRampToValueAtTime(\n                    config.oscillators[i].localGain,\n                    audioContext.currentTime + (config.attack))\n        }\n\n        // Wait until attack time period is done\n        await new Promise(f => setTimeout(f, config.attack * 1001))\n\n        // If the user hasn't released the note, ramp down to the sustain level.\n        if (!this.endingPlay) {\n            for (let i = 0; i < this.oscillatorNodes.length; i++) {\n                this.gainNodes[i].gain.linearRampToValueAtTime(\n                        config.sustain * config.oscillators[i].localGain,\n                        audioContext.currentTime + (config.decay))\n            }\n        }\n    }\n\n    /**\n     * Begins release envelope & ends sound generation for the given stack.\n     */\n    async endPlay(audioContext: AudioContext, release: number) {\n        // Flag so note doesn't sustain when ending.\n        this.endingPlay = true\n\n        // Ramp down to silence\n        this.gainNodes.forEach(function (gain) {\n            // Force the note to the exact volume it should be before ramping down. Prevents weird audio bugs.\n            gain.gain.linearRampToValueAtTime(gain.gain.value, audioContext.currentTime + 0.001)\n            gain.gain.linearRampToValueAtTime(0.0001, audioContext.currentTime + (release))\n        })\n\n        // Wait until release time interval is done\n        await new Promise(f => setTimeout(f, release * 1000))\n\n        this.stopped = true\n\n        // Stop all oscillators\n        this.oscillatorNodes.forEach(function (oscillator) {\n            oscillator.stop(1)\n        })\n    }\n}","import * as React from 'react';\nimport './piano.css';\nimport {useEffect} from 'react';\nimport SynthSettings from \"./SynthSettings\";\nimport SettingsPanel from \"./settings panel/SettingsPanel\";\nimport MicrotonalPiano from \"./MicrotonalPiano\"\nimport MidiReceiver from \"../../utility/midi/MIDIReceiver\";\nimport {AdditiveSynthesizer} from \"../../utility/audio/AdditiveSynthesizer\";\nimport {MCActions, MicrotonalConfigHistory} from \"./Reducers\";\nimport Button from \"../../ui/Button\";\nimport ErrorPopup from \"../../ui/ErrorPopup\";\nimport {useMCDispatch, useMConfig, useMConfigHistory} from \"./PlayProvider\";\nimport {MicrotonalConfig} from \"../../utility/MicrotonalConfig\";\nimport SettingsPanelProvider from \"./settings panel/SettingsPanelProvider\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\nconst additiveSynth: AdditiveSynthesizer = new AdditiveSynthesizer();\nconst midiReceiver: MidiReceiver = new MidiReceiver(additiveSynth);\n\nexport default function Play(): ReactJSXElement {\n\n    const mcHistory: MicrotonalConfigHistory = useMConfigHistory();\n    const microtonalConfig: MicrotonalConfig = useMConfig();\n    const mcDispatch: Function = useMCDispatch();\n\n    useEffect(() => {\n        midiReceiver.config = microtonalConfig.scaleConfig;\n        midiReceiver.keyMapping = microtonalConfig.keyMapping;\n        additiveSynth.config = microtonalConfig.synthConfig;\n        additiveSynth.updateSettings();\n    }, [microtonalConfig]);\n\n    const handleUndo = (): void => {\n        mcDispatch({type: MCActions.UNDO_CONFIG});\n    }\n\n    const handleRedo = (): void => {\n        mcDispatch({type: MCActions.REDO_CONFIG});\n    }\n\n    return (\n        <div className={'flex flex-1 w-full h-full mt-1 overflow-auto'}>\n\n            <ErrorPopup />\n\n            <div className={'max-w-xs 2xl:max-w-md'}>\n                <SettingsPanelProvider>\n                    <SettingsPanel />\n                </SettingsPanelProvider>\n            </div>\n\n            <div className={'flex flex-col w-full ml-1'}>\n\n                {/*<PianoPanel />*/}\n\n                <div className={'absolute flex-row ml-3 mt-3'}>\n                    <Button\n                        className={'mr-1'}\n                        text={'UNDO'}\n                        disabled={mcHistory.previous.length === 0}\n                        onClick={handleUndo}\n                    />\n                    <Button\n                        text={'REDO'}\n                        disabled={mcHistory.next.length === 0}\n                        onClick={handleRedo}\n                    />\n                </div>\n\n                <div className={'h-1/2 flex-row mb-1'}>\n                    <MicrotonalPiano\n                        keyMapping={mcHistory.current.keyMapping}\n                        midiReceiver={midiReceiver}\n                        setKeyMapping={() => {}}\n                    />\n                </div>\n\n                <div className={'h-1/2 flex-row'}>\n                    {/*<SynthSettingsPanel />*/}\n                    <SynthSettings />\n                </div>\n\n            </div>\n        </div>\n    );\n}","import {SynthConfig, DEFAULT_SYNTH_CONFIG} from \"../MicrotonalConfig\";\nimport OscillatorStack from \"./OscillatorStack\";\n\n/**\n * Manages the creation of audio within the application.\n * Creates a stack of oscillators when playing a new note.\n * Oscillator stacks are mapped to the frequency they were\n * played at in a dictionary.\n *\n * The audio context, master gain and dynamics compressor\n * are a part of the Web Audio API that all oscillators\n * transmit information to in order to generate sound.\n */\nexport class AdditiveSynthesizer {\n    config: SynthConfig = DEFAULT_SYNTH_CONFIG;\n\n    /** Controls sound generation and connects to every oscillator */\n    audioContext: AudioContext = new AudioContext()\n    /** Controls the volume of the sounds generated globally. Linked to the main gain knob */\n    masterGain: GainNode = this.audioContext.createGain()\n    /** Controls the sound to prevent it from peaking & creating harsh clipping */\n    dynamicsCompressor: DynamicsCompressorNode = this.audioContext.createDynamicsCompressor()\n\n    /** Dictinoary holding oscillator stacks whose key is the base frequency being played */\n    oscillatorStacks: { [key: number]: OscillatorStack } = {}\n\n    constructor() {\n        this.dynamicsCompressor.connect(this.masterGain)\n        this.masterGain.connect(this.audioContext.destination)\n    }\n\n    /** Called whenever the synth config is updated. Updates master gain & stops all current oscillators. */\n    updateSettings() {\n        this.masterGain.gain.value = this.config.gain\n        this.clearOscillators()\n    }\n\n    /** Stops all current oscillators and removes them from the dictionary. */\n    clearOscillators() {\n        for (let frequency in this.oscillatorStacks) {\n            this.oscillatorStacks[frequency].endPlay(this.audioContext, this.config.release)\n            delete this.oscillatorStacks[frequency]\n        }\n    }\n\n    /**\n     * Creates a new oscillator stack at the frequency being played.\n     * @param {number} frequency - The base frequency of the stack.\n     * @param {number} velocity - The intensity of the note. Not yet implemented.\n     */\n    onPlayFrequency(frequency: number, velocity: number) {\n        if (this.oscillatorStacks[frequency] != null) {\n            return;\n        }\n\n        this.oscillatorStacks[frequency] = new OscillatorStack(\n                this.config.oscillators,\n                frequency,\n                this.config.gain,\n                this.audioContext,\n                this.dynamicsCompressor\n                )\n\n        this.oscillatorStacks[frequency].beginPlay(this.audioContext, this.config)\n    }\n\n    /**\n     * Stops an oscillator stack & removes it from the dictinary\n     * @param {number} frequency - The base frequency of the stack being removed.\n     */\n    onStopFrequency(frequency: number) {\n        if (this.oscillatorStacks[frequency] == null) {\n            return;\n        }\n\n        this.oscillatorStacks[frequency].endPlay(this.audioContext, this.config.release)\n        delete this.oscillatorStacks[frequency]\n    }\n}","import * as React from 'react'\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\ninterface BorderedContainerProps {\n    className?: string;\n    children: ReactJSXElement | ReactJSXElement[];\n}\n\nexport default function BorderedContainer(props: BorderedContainerProps): ReactJSXElement {\n    return (\n        <div className={`${props.className} border-gold border-2 rounded-xl bg-bglight`}>\n            {props.children}\n        </div>\n    );\n}\n","import * as React from 'react'\nimport BorderedContainer from '../ui/BorderedContainer'\n\nexport function Learn() {\n    return (\n        <div className={\"w-full p-10\"}>\n        <BorderedContainer className={\"flex justify-center px-8 py-8 text-left text-base\"}>\n        <article className={\"prose prose-white prose-invert\"}>\n        This project works on multiple fronts to bring microtonal works to life. As a starting point,\n        Easley Blackwood's microtonal etudes provide a number of difficulties to overcome in order to\n        produce a full performance. You can read about the ideas to tackle these challenges in the\n        paper below.\n        <br></br>\n        <br></br>\n        Richard Leinecker and William R. Ayers, Performing Easley Blackwood's \n        <a className=\"italic ...\"> Twelve Microtonal Etudes</a>\n        : An Open-Source Software Development Project, in \n        <a className=\"italic ...\"> Mathematics and Computation in Music 2022</a>\n        , edited by Mariana Montiel, Octavio A. Agustn-Aquino, Francisco Gmez, Jeremy Kastine, Emilio Lluis-Puebla,\n        and Brent Milam (2022): 331-339. Springer Nature.\n        <br></br>\n        <a href=\"https://doi.org/10.1007/978-3-031-07015-0_27\" \n        className=\"font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline\">\n            https://doi.org/10.1007/978-3-031-07015-0_27\n        </a>\n        </article>\n        </BorderedContainer>\n        <br></br>\n        <br></br>\n        <BorderedContainer className={\"flex justify-center px-8 py-8 text-left text-base\"}>\n        <article className={\"prose prose-white prose-invert\"}>\n        \n        The microtonal synthesizer available on the Download page was produced by Computer\n        Science majors completing their Senior Design Projects at the University of Central Florida\n        (listed below). The synthesizer (created using the JUCE framework) includes tone generators,\n        ADSR envelope controls, microtonal scale generation and keyboard mapping functionality, and\n        components for saving mappings and instruments.\n        <br></br>\n        <br></br>\n        Version 1.0.0 (2022)\n        <br></br>\n        Jake DiClemente\n        <br></br>\n        Isaiah Kovacich\n        <br></br>\n        Anthony Moore\n        <br></br>\n        Michael Ortiz\n        <br></br>\n        John Pham\n        </article>\n        </BorderedContainer>\n        <br></br>\n        <br></br>\n        <BorderedContainer className={\"flex justify-center px-8 py-8 text-left text-base\"}>\n        <article className={\"prose prose-white prose-invert\"}>\n        The browser application on the Play page was produced by Computer Science majors\n        completing their Senior Design Projects at the University of Central Florida (listed below).\n        <br></br>\n        <br></br>\n        Calvin Agar\n        <br></br>\n        Peter Devita\n        <br></br>\n        Noah Hartley\n        <br></br>\n        Zachary Hasley\n        <br></br>\n        Nathan Manierre\n        <br></br>\n        Austin Smith\n        </article>\n        </BorderedContainer>\n        <br></br>\n        <br></br>\n        <BorderedContainer className={\"flex justify-center px-8 py-8 text-left text-base\"}>\n        <article className={\"prose prose-white prose-invert\"}>\n        This project also engages students in the School of Performing Arts at the University of Central\n        Florida (listed below). Music students work on notation projects to convert microtonal notation\n        into easily readable, comprehensible, and gesturally practicable notation for the purpose of\n        performance on the microtonal synthesizer using a standard keyboard controller.\n        <br></br>\n        <br></br>\n        Michael Crisafi\n        </article>\n        </BorderedContainer>\n        </div>\n    )\n}","import * as React from \"react\";\nimport BorderedContainer from '../ui/BorderedContainer'\n\nexport function Download() {\n    return (\n        <div className={\"w-full p-10\"}>\n        <BorderedContainer className={\"flex justify-center px-8 py-8 text-left text-base\"}>\n        <article className={\"prose prose-white prose-invert\"}>\n        The most recent release of the desktop synthesizer and the source code for both the desktop \n        and browser synthesizer projects can be found at the link below.\n        <br></br>\n        <br></br>\n        <a href=\"https://github.com/microtonality\" \n        className=\"font-medium text-blue-600 underline dark:text-blue-500 hover:no-underline\">\n            https://github.com/microtonality</a>\n        </article>\n        </BorderedContainer>\n        </div>\n    )\n}","import * as React from \"react\";\nimport BorderedContainer from '../ui/BorderedContainer'\n\nexport function Contact() {\n    return(\n        <div className={\"w-full p-10\"}>\n        <BorderedContainer className={\"flex justify-center px-8 py-8 text-left text-base\"}>\n        <article className={\"prose prose-white prose-invert\"}>\n        If you have any questions or suggestions about the project, please feel free to contact us\n        through the email addresses below.\n        <br></br>\n        <br></br>\n        Dr. Ayers:\n        <br></br>\n        William.Ayers@ucf.edu\n        <br></br>\n        <br></br>\n        Dr. Leinecker:\n        <br></br>\n        Richard.Leinecker@ucf.edu\n        </article>\n        </BorderedContainer>\n        </div>\n    )\n}","import * as React from 'react'\nimport BorderedContainer from '../ui/BorderedContainer'\n\nexport function Splash() {\n    return (\n        <div className={\"w-full p-10\"}>\n        <BorderedContainer className={\"flex justify-center px-8 py-8 text-left text-base\"}>\n        <article className={\"prose prose-white prose-invert\"}>\n        This open-source development project is dedicated to the performance of microtonal music.\n        The project incorporates multiple elements to this effect, including a standalone desktop\n        software synthesizer and a browser application that allow microtonal playback. This project\n        began as an effort to fulfill Easley Blackwood's wish to hear a live performance of his Twelve\n        Microtonal Etudes (1980), but the project also has the potential to inspire performances of\n        other existing microtonal works and the creation of new works.\n        On this website, you can learn about the project, its elements, and the team members under the Learn tab,\n        you can test out some elements of microtonality in your browser under the Play tab, and you can access the\n        source code to different elements of the project, including the desktop and browser\n        applications under the Download tab. Feel free to get in touch with us if you have any issues or inquiries.\n        Our information can be found under the Contact tab.\n        <br></br>\n        Richard Leinecker and William R. Ayers, University of Central Florida\n        </article>\n        </BorderedContainer>\n        </div>\n    )\n}","import './index.css';\nimport {HashRouter, Route} from \"react-router-dom\";\nimport {Outlet, Routes} from \"react-router\";\nimport NavLink from \"./ui/NavLink\";\nimport * as React from 'react';\nimport Play from './pages/play/Play';\nimport {Learn} from \"./pages/Learn\";\nimport {Download} from \"./pages/Download\";\nimport {Contact} from \"./pages/Contact\";\nimport {Splash} from \"./pages/Splash\"\nimport PlayProvider from \"./pages/play/PlayProvider\";\nimport {ReactJSXElement} from \"@emotion/react/types/jsx-namespace\";\n\nexport default function App(): ReactJSXElement {\n  return (\n      <PlayProvider>\n          <HashRouter>\n              <Routes>\n                  <Route path='/' element={<Layout />}>\n                      <Route index element={<Splash />}/>\n                      <Route path=\"learn\" element={<Learn />}/>\n                      <Route path=\"play\" element={<Play />}/>\n                      <Route path=\"download\" element={<Download />}/>\n                      <Route path=\"contact\" element={<Contact />}/>\n                  </Route>\n              </Routes>\n          </HashRouter>\n      </PlayProvider>\n  );\n}\n\nconst Layout = (): ReactJSXElement => {\n  return (\n    <>\n      <nav className=\"relative flex flex-wrap items-center justify-between px-2 2xl:py-7 xl:py-6 lg:py-5 md:py-4 sm:py-3 xs:py-2 bg-bglight border-b-2 border-gold\">\n        <span className=\"2xl:text-xl xl:text-lg lg:text-md md:text-sm sm:text-xs xs:text-xs font-agrandir-wide leading-relaxed inline-block mr-4 px-5 whitespace-nowrap uppercase text-white\">MICROTONAL SYNTHESIZER PROJECT</span>\n          <span className=\"2xl:mr-10 xl:mr-9 lg:mr-8 md:mr-7 sm:mr-6 xs:mr-5\">\n            <NavLink to=\"/learn\" end><div className=\"hover:underline\">LEARN</div></NavLink>\n            <NavLink to=\"/play\"><div className=\"hover:underline\">PLAY</div></NavLink>\n            <NavLink to=\"/download\"><div className=\"hover:underline\">DOWNLOAD</div></NavLink>\n            <NavLink to=\"/contact\"><div className=\"hover:underline\">CONTACT</div></NavLink>\n          </span>\n      </nav>\n\n      <Outlet />\n    </>\n  )\n}\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nconst root: ReactDOM.Root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// The chunk loading function for additional chunks\n// Since all referenced chunks are already included\n// in this file, this function is empty here.\n__webpack_require__.e = function() { return Promise.resolve(); };","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkMicrotonality\"] = self[\"webpackChunkMicrotonality\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [736], function() { return __webpack_require__(8105); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","leafPrototypes","getProto","NavLink","props","React","RRDNavLink","Object","assign","className","isActive","children","Knob","value","setValue","useState","textBox","setTextBoxRaw","toFixed","toString","isMouseDown","setIsMouseDown","valueInputRef","useRef","useEffect","handleSubmit","updateTextbox","handleMouseMove","event","movementX","movementY","prevValue","clampValue","max","handleMouseUp","document","removeEventListener","val","Math","min","onChange","knobLabel","small","onMouseDown","e","preventDefault","addEventListener","style","transform","range","maxAngle","minAngle","valueToAngle","type","ref","target","onBlur","submitTextbox","parseFloat","isNaN","onKeyDown","key","current","blur","step","defaultProps","ScaleNote","constructor","num","multiplier","comments","this","id","UUIDv4","exportScala","abstractEquals","note","equals","CentNote","cents","prevRatio","includes","super","centsToMultiplier","static","pow","BaseCentNote","RatioNote","ratio","ratioToMultiplier","parsedRatio","RegExp","exec","parseInt","BaseRatioNote","BaseOctaveNote","DEFAULT_SCALE","notes","title","description","octaveNote","scaleAbstractEquals","scale1","scale2","length","i","at","scaleDegreeToNote","scale","scaleDegree","ParserPhase","parseScalaFile","file","fileLines","split","lineNum","firstLine","trim","startsWith","readTitle","shift","keysPerOctave","phase","DESCRIPTION","line","KEYS_PER_OCTAVE","Error","INCORRECT_KEYS_PER_OCTAVE_ERROR","PITCH_VALUES","parsePitchValue","INCORRECT_PITCH_VALUE_ERROR","push","NOT_ENOUGH_PITCH_VALUES_ERROR","unshift","_a","substring","words","endsWith","noteType","curIndex","char","charAt","COMMENT_BEFORE_PITCH_VALUE_ERROR","cleanPitchValue","isRatio","cleanedNumerator","slice","indexOf","cleanedDenominator","cleanRatioValue","cent","cleanCentValue","notesLength","difference","rebuildScale","untypedNote","generateEqualTemperedScale","numberOfNotes","centValues","map","scaleFromCents","EQUAL_TEMPERED_SCALES","generateETScales","scales","mapScaleToKeyboardShortcuts","keyMapping","mapScaleToKeys","defaultMultipliers","scaleMultipliers","mapping","b","multipliers","originalIndex","originalMultiplier","sort","a","abs","splice","finalMapping","Number","keyLength","keys","floor","createPianoKeyboardShortcuts","rootKey","keyboardLength","KeyboardShortcuts","firstNote","lastNote","keyboardConfig","averageNotes","note1","note2","averageRatios","averageOtherNotes","convertNote","ratioToCent","centToRatio","log2","multiplierToCents","ratio1","ratio2","addedNumerator","ratioRegex","parse1","parse2","numerator1","denominator1","numerator2","denominator2","addedDenominator","lcm","averaged","tempNote","gcd","t","DEFAULT_OSCILLATOR_SETTINGS","pitchRatio","localGain","waveType","BASIC_SYNTH","gain","pitchBend","attack","decay","sustain","release","oscillators","PIANO_SYNTH","FLUTE_SYNTH","OBOE_SYNTH","CLARINET_SYNTH","BASSOON_SYNTH","TRUMPET_SYNTH","FRENCH_HORN_SYNTH","TROMBONE_SYNTH","TUBA_SYNTH","VIOLIN_SYNTH","CELLO_SYNTH","MCActions","MicrotonalConfigReducer","state","action","console","log","actionString","configChange","newState","UNDO_CONFIG","previous","next","pop","REDO_CONFIG","config","SET_CONFIG","scaleConfig","SET_SCALE","ADD_NOTE","DELETE_NOTE","EDIT_NOTE","CONVERT_NOTE","noteIndex","newNote","noteValue","oldNote","EDIT_OCTAVE_NOTE","CONVERT_OCTAVE_NOTE","newOctaveNote","oldOctaveNote","SET_TUNING_FREQUENCY","tuningFrequency","SET_OSCILLATOR","newOscillators","synthConfig","oscIndex","osc","SET_ATTACK","SET_DECAY","SET_SUSTAIN","SET_RELEASE","SET_MASTER_GAIN","UNSET_KEYBIND","keyIndex","SET_KEYBIND","SET_PRESET","preset","commitChange","configId","OBJECT_PROTOTYPE","getPrototypeOf","change","dryRun","hasChanged","newConfig","result","InstantTransition","duration","SpringTransition","stiffness","FadeInAndOut","initial","opacity","enter","exit","ScaleIn","GrowX","width","GrowY","height","EnterLeftExitLeft","left","window","innerWidth","EnterTopExitTop","top","innerHeight","userIsSupported","deviceIsSupported","browserIsSupported","isDesktop","isChrome","isChromium","isFirefox","isOpera","Animator","animationMap","useReducedMotion","animation","AnimatePresence","visible","motion","clickOutsideRef","animate","transition","HIDE_ERROR","ErrorPopup","errorMsg","useContext","ErrorMsgContext","errorMsgDispatch","useSetErrorMsg","hideError","tabIndex","onClick","onMouseLeave","currentTarget","xmlns","strokeWidth","strokeLinecap","x1","y1","closeButtonOffset","x2","y2","DEFAULT_SYNTH_CONFIG","DEFAULT_SCALE_CONFIG","DEFAULT_MICROTONAL_CONFIG","createMicrotonalConfig","microtonalConfig","newScaleConfig","newSynthConfig","MCHistoryContext","createContext","MCDispatchContext","ErrorMsgDispatchContext","PlayProvider","microtonalConfigHistory","mcDispatch","useReducer","displayErrorMsg","UNSUPPORTED_BROWSER_ERROR","UNSUPPORTED_DEVICE_ERROR","Provider","useMConfigHistory","useMConfig","useScale","useMCDispatch","Oscillator","setLocalGain","settings","localGainInput","setLocalGainInput","gainInputRef","supportedWaveTypes","submitLocalGainInput","clampGain","newOsc","updateOscillator","focus","setAttribute","selectionStart","selectionEnd","wave","handleWaveTypeChange","mapWaveTypes","wavesJSX","forEach","toUpperCase","Range","values","onFinalChange","direction","Direction","renderTrack","border","borderColor","borderRadius","backgroundColor","marginTop","marginBottom","renderThumb","handleKeyDown","handleMultiplierSubmit","InstrumentPresets","setPreset","SynthSettings","Knobs","handleAttackChange","handleDecayChange","handleSustainChange","handleReleaseChange","mapOscillators","oscJSX","SettingsFieldTitle","text","MConfigDataContext","MConfigDataDispatchContext","ScalaDataContext","ScalaDataDispatchContext","ScaleEditorTab","ScaleEditorTabContext","ScaleEditorTabDispatchContext","SettingsPanelProvider","initMConfigData","mConfigData","setMConfigData","initScalaData","scalaData","setScalaData","scaleEditorTab","setScaleEditorTab","VISUAL","useMConfigData","useSetMConfigData","useScalaData","useSetScalaData","useScaleEditorTab","SettingsPanelTabs","SettingsPanelTabSwitcher","setCurrentTab","currentTab","BASIC","SCALE","TuningFrequencyEditor","currentTuningFreq","tuningFreqInput","setTuningFreqInput","clampTuningFrequency","freq","submitTuningFreqInput","frequency","Popup","EqualTemperedScaleSlider","sliderRef","displayValuePopup","setDisplayValuePopup","popupPosition","setPopupPosition","popupTransition","popupAnimationMap","getNextPopupPosition","beginAdjustment","endAdjustment","handleSliderChange","newScale","percentage","offsetWidth","onMouseUp","onFocus","wrapSetValue","UploadFileButton","fileInputRef","click","accept","handleFileUpload","uploadFile","Button","disabled","onMouseOut","useHandleClickOutsideRef","onClickOutside","args","handleClickOutside","contains","CloseButton","deleteNoteSVG","strokeLinejoin","FilenameEditor","tempFilename","setTempFilename","filename","filenameInputRef","selection","setSelection","name","test","RESERVED_FILENAME_ERROR","validateFilename","setFilename","message","updatedName","curSelection","letterOrNumber","validChars","cleanedName","wrapSetFilename","DescriptionEditor","tempDescription","setTempDescription","replace","setDescription","SynthFileSettingsPopup","mConfigFileData","setMConfigFileData","setVisible","desc","closePopup","SVGButton","SVGButtonPaths","svg","SVGButtons","buttonType","path","pencilSquare","pathBase","listBullet","arrowDownTray","cog6tooth","questionMarkCircle","d","SynthFileSettings","SynthFileHandler","readerResult","files","reader","FileReader","fileAsText","onload","ArrayBuffer","TextDecoder","decode","JSON","parse","configTitle","MCONFIG_UPLOAD_ERROR","onerror","readAsText","handleConfigUpload","handleConfigDownload","configJSON","stringify","File","element","createElement","href","URL","createObjectURL","download","remove","BasicSettings","tuningFreq","GENERATED_TITLE","generateScalaText","scala","getTitle","validCharacters","validChar","INVALID_CHAR_IN_TITLE_ERROR","validateTitle","invalidChar","ScalaFileHandler","scalaTitle","scalaDescription","handleScalaDownload","curScale","generateScalaFile","SCALA_FILE_UPLOAD_ERROR","handleScalaUpload","fileName","reorderIconDiv","reorderIconSVG","ReorderIcon","curDiv","isDragging","curSVG","onPointerDown","startDragging","onPointerUp","setIsDragging","DisabledReorderIcon","BaseNoteConverter","convertBaseNote","setBaseNote","setIsRatio","DisabledCloseButton","BaseNoteInput","baseNote","NoteInputField","setNoteValue","noteInputRef","updatedNote","cleanedNote","seenSlashOrPeriod","wrapSetNoteValue","handleEditNote","editNote","NoteConverter","ScaleNoteInput","deleteNote","DraggableNote","dragControls","useDragControls","yValue","useMotionValue","Reorder","y","dragListener","dragConstraints","listRef","onDragEnd","reorderScale","start","DraggableNoteList","fixedNotes","setFixedNotes","notesAreUnchanged","currentFixedNotes","axis","layoutScroll","onReorder","OctaveNoteInput","convertOctaveNote","ScaleEditorTabSwitcher","switchTab","prev","SCALA","ScalaFileSettingsPopup","VisualScaleEditor","displayScaleSettings","setDisplayScaleSettings","flipDisplayScaleSettings","handleAddNote","SaveButton","original","ScalaFileEditor","setErrorMsg","getScala","originalScala","tempScalaFile","setTempScalaFile","textareaClassName","textareaRows","textareaCols","sendUserToScalaFileHelpPage","join","submitScalaFile","rows","cols","scalaStringList","wrapSetTempScalaFile","ScaleEditor","ScaleSettings","SettingsPanelTab","SettingsPanel","FrequencyBarButton","wrapIndex","divWidth","Tooltip","describeChild","placement","active","index","isEditing","round","reverseMapping","final","modulo","divisor","scaleDegreeToKeyIndex","reversedMapping","keyOffset","scaleLength","keyboardKeyNum","undefined","divRef","setWidth","debounceTimeout","handleResize","div","clearTimeout","setTimeout","editingNote","setEditingNote","freqBarArr","onKeyPress","keyboardShortcuts","toLowerCase","oldKey","newKey","correctedOldKey","scaleOffset","preScaleDegree","keyboardKey","octaveAdditive","midiReceiver","ScaleDegreeToFrequency","octaveOffset","PianoKeyButton","faceUp","role","OctaveButtons","octaveUp","viewBox","clipPath","fill","octaveDown","DEFAULT_VELOCITY","whiteKey","TAILWIND_COLORS_NEUTRAL","blackKey","activeKey","TAILWIND_COLORS_BLUE","ReactPianoWrapper","dangerouslySetInnerHTML","__html","ReactPiano","noteRange","first","last","playNote","noteOn","stopNote","noteOff","OctaveAction","KEYBOARD_SETTINGS","minimumKeyboardLength","maximumKeyboardLength","MIDI_MIN","MIDI_MAX","getLowHighMidi","octave","lowestMidiNote","getKeyboardLength","OctaveOffsetReducer","userKeyOffset","INCREASE_OCTAVE","DECREASE_OCTAVE","SET_MICROTONAL_CONFIG","highestMidiNote","safetyKeyOffset","MicrotonalPiano","offsetDispatch","generateKeyboardShortcuts","setKeyboardShortcuts","FrequencyBarComponent","playMidiNote","setKeyMapping","handleMasterGainChange","MidiReceiver","synth","midiInput","midiOutput","connectToInstrument","navigator","requestMIDIAccess","then","midi","initDevices","onstatechange","err","warn","input","inputs","onmidimessage","onMIDIMessage","bind","output","outputs","command","data","NOTE_ON_MESSAGE","velocity","NOTE_OFF_MESSAGE","PITCH_BEND_MESSAGE","MidiNotesToFrequency","onPlayFrequency","onStopFrequency","MidiNote","octaveKey","OscillatorStack","oscillatorSettings","baseVolume","audioContext","dynamicsCompressor","oscillatorNodes","gainNodes","endingPlay","stopped","createOscillator","setValueAtTime","currentTime","createGain","connect","beginPlay","linearRampToValueAtTime","Promise","f","endPlay","oscillator","stop","additiveSynth","AudioContext","masterGain","createDynamicsCompressor","oscillatorStacks","destination","updateSettings","clearOscillators","Play","mcHistory","handleUndo","handleRedo","BorderedContainer","Learn","Download","Contact","Splash","Layout","to","end","Outlet","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","getElementById","render","HashRouter","Routes","Route","reportWebVitals","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","amdO","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","r","n","getter","__esModule","obj","__proto__","mode","ns","create","def","getOwnPropertyNames","definition","o","defineProperty","enumerable","get","resolve","g","globalThis","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}